#!/usr/bin/env bash
function gem_install_or_update() {
  if gem list "$1" --installed > /dev/null; then
    gem update "$@"
  else
    gem install "$@" --no-document
  fi
}

function install_zgen() {
  cd ~
  if [ -d "${HOME}/.zgen" ]; then
    git -C "${HOME}/.zgen" pull
  else
    git clone https://github.com/tarjoilija/zgen.git "${HOME}/.zgen"
  fi
  cd -
}

function install_homesick() {
  homesick clone chrislopresto/dotfiles
  homesick pull dotfiles
  homesick unlink dotfiles
  homesick symlink dotfiles --force
  homesick list
}

function setup_sublime_text() {
  cd ~/Library/Application\ Support/Sublime\ Text\ 3/Packages/
  rm -r User
  ln -s ~/.homesick/repos/dotfiles/sublime/Packages/User
  cd -
}

function install_ruby_gems() {
  gem_install_or_update bundler

  gem_install_or_update cocoapods
  gem_install_or_update homesick
  gem_install_or_update pry-theme
  gem_install_or_update tmuxinator
}

function install_npm_packages() {
  nodenv init
  yarn global upgrade bower ember-cli phantomjs hpm-cli eslint grunt-cli webpack@beta
}

function install_python_packages() {
  pip install -U beets
  pip install -U cider
  pip install -U pylast
  pip install -U requests
}

function restore_cider() {
  cider restore
}

function install_prezto() {
  cd ~
  if [ -d "${HOME}/.zprezto" ]; then
    git -C "${HOME}/.zprezto" pull
  else
    git clone --recursive https://github.com/sorin-ionescu/prezto.git "${ZDOTDIR:-$HOME}/.zprezto"
  fi
  cd -
}

# install_fonts () {
#   mkdir -p ~/p/fonts/google ; git clone google/fonts ~/p/fonts/google
#   cp ~/p/fonts/google/ofl/inconsolata/*.ttf ~/Library/Fonts
#   mkdir -p ~/p/fonts/powerline ; git clone powerline/fonts ~/p/fonts/powerline
#   ~/p/fonts/powerline/install.sh
# }

#install_zgen
install_ruby_gems
install_npm_packages
install_python_packages
restore_cider
#install_homesick
# # install_prezto
#setup_sublime_text
