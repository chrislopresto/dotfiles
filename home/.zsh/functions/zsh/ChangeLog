2015-11-04  Peter Stephenson  <p.stephenson@samsung.com>

	* 37062: Completion/Unix/Command/_git: allow verbose
	descriptions of commits and branches using git log.  Mechanism
	for turning this on subject to change.

2015-11-02  Daniel Hahler  <zsh@thequod.de>

	* 35303: Completion/Unix/Command/_systemd: remove it in favour of the
	one from upstream.

2015-11-01  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 37038: Doc/Zsh/builtins.yo, Src/builtin.c, Src/options.c: add
	-l option to emulate.

2015-10-31  Oliver Kiddle  <opk@zsh.org>

	* 37029: Completion/Unix/Command/_date,
	Completion/Unix/Command/_sed, Completion/Unix/Command/_tail,
	Completion/Unix/Command/_tr: update options and new tr completion

	* 37028: Completion/Redhat/Command/_scl: new completion

	* 36993: Eric Cook: Functions/Misc/zed: fix argument parsing

2015-10-31  Barton E. Schaefer  <schaefer@zsh.org>

	* unposted (cf. 36998,36999): Src/mem.c: undo 36956 / restore 34451
	with expanded comment about the flip-flopping

2015-10-31  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* 37032: Completion/Unix/Command/_git: Temporarily revert 36959.

2015-10-30  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* unposted (after 37018): Src/params.c, Test/E01options.ztst: Fix
	typo in error message.

2015-10-30  Peter Stephenson  <p.stephenson@samsung.com>

	* 37027: Doc/Zsh/contrib.yo, Functions/Zle/match-word-context:
	add editing word context to allow detecting being between words.

	* 37022: Doc/Zsh/expn.yo, Doc/Zsh/options.yo, Src/glob.c,
	Src/options.c, Src/zsh.h: add GLOB_STAR_SHORT option to
	allow shorthand ** for **/* and *** for ***/*.

2015-10-29  Peter Stephenson  <p.stephenson@samsung.com>

	* 37018: Src/math.c, Src/params.c, Test/E01options.ztst: make
	WARNCREATEGLOBAL consistent in all cases, outputting file name.

	* unposted: .gitignore: ignore .orig files.

	* 37014: Functions/MIME/zsh-mime-setup,
	Functions/Misc/add-zsh-hook, Src/Modules/socket.c,
	Src/Modules/tcp.c, Src/Modules/zpty.c, Src/builtin.c,
	Src/params.c,Src/zsh.h: improved internal parameter setting.
	Enhance WARNCREATEGLOBAL to work in many more cases.  Don't
	create REPLY as an integer if it didn't previously exist as one,
	even if the value to be set is integral, as this is likely to
	mess up later uses of REPLY.

2015-10-29  Jun-ichi Takimoto <takimoto-j@kba.biglobe.ne.jp>

	* 36983 (with fix from 36990): Completion/Unix/Command/_head,
	Completion/Unix/Command/_tail: new completions for head and tail

2015-10-27  Barton E. Schaefer  <schaefer@zsh.org>

	* 36994: Functions/Zle/bracketed-paste-magic: declare local REPLY
	for use with "zle .read-command"; use .self-insert instead of
	.self-insert-unmeta

2015-10-27  Peter Stephenson  <p.stephenson@samsung.com>

	* 36982: Doc/Zsh/expn.yo, Src/pattern.c, Test/D02glob.ztst,
	Test/D04parameter.ztst: fix actual bug with (#cN) and back off
	previous change.

	* 36977: Doc/Zsh/expn.yo: note about complications of pattern
	repetitions (#cN).

	* 36974: Src/Modules/zftp.c, Src/Zle/complist.c,
	Src/Zle/computil.c, Src/Zle/zle_thingy.c, Src/parse.c: fix empty
	argument lists.

2015-10-26  Barton E. Schaefer  <schaefer@zsh.org>

	* 36906: Kamil Dudka <kdudka@redhat.com>: Src/mem.c:
	queue_signals() in ZSH_MEM realloc()

	* 36968: Src/Modules/db_gdbm.c: use addmodulefd() to tell the
	shell about the descriptor of the dbm file

	* 36956: Src/mem.c: revert 34451, mmap() is too slow on MacOS

2015-10-26  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* users/20825: Src/Zle/zle_utils.c: get_undo_current_change()
	needs same protection as mkundoent() for execution within
	completion.

2015-10-25  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* 36962: Completion/Unix/Command/_git: _git: Fix completion of
	RHS of refspecs.

	* 36964: Completion/Unix/Command/_git: _git: Complete remotes
	branch names with slashes correctly.

	* 36960: Completion/Unix/Command/_git: _git: Enable slash matcher
	for more branch and tag completions, include 'git branch <TAB>'
	and 'git tag <TAB>'.

	* 36959: Completion/Unix/Command/_git: _git: Offer @~$n as
	completion of recent commits.

	* 36958: Completion/Unix/Command/_git: _git: Fix recent commit
	completion descriptions.

	* unposted: Completion/Unix/Command/_git: _git: Fix 'commit
	object name' completion messages.

2015-10-25  Jun-ichi Takimoto <takimoto-j@kba.biglobe.ne.jp>

	* 36911: Src/Zle/computil.c: '-optarg' should not match
	optspec '-opt='

2015-10-24  Barton E. Schaefer  <schaefer@zsh.org>

	* 36943 (with updated comment): Src/mem.c: restore scan for
	reclaimable blocks in freeheap() [had been removed by 36834]

2015-10-24  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* unposted: Completion/Unix/Command/_beep: _beep completion:
	Actually hook it for the 'beep' command.

	* 36913 + 36945: Functions/VCS_Info/VCS_INFO_quilt: vcs_info quilt:
	Pass patch subject lines to gen-applied-string

	* 36912: Functions/VCS_Info/VCS_INFO_quilt: vcs_info quilt:
	Tolerate being in child of .pc's parent

2015-10-24  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Src/utils.c: small typo.

	* 36944: Src/utils.c, Src/Modules/tcp.c, Src/Modules/socket.c:
	extend the previous to zsocket, although this needs to allow the
	fd to be closed explicitly.

	* 36941: Src/utils.c, Src/zsh.h, Src/Modules/tcp.c: ensure shell
	knows about file descriptiors used by ztcp and allow such file
	descriptors to be marked as internal if needed (not yet used).

2015-10-22  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* unposted: Doc/Zsh/contrib.yo: vcs_info docs: Typo fix.

2015-10-21  Barton E. Schaefer  <schaefer@zsh.org>

	* unposted: Src/math.c: strdup should be ztrdup

	* 36909: Src/hist.c: in getargs(), sanity-check the offsets for
	start and end of the requested words, in case of overflow

	* 36871: Functions/Zle/bracketed-paste-magic: move initial call
	to "zle .bracketed-paste-magic" to occur earlier in the function

2015-10-20  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* 36900: Completion/Unix/Command/_git: _git: stash names
	completion: Display log messages

2015-10-19  Oliver Kiddle  <opk@zsh.org>

	* 36642: Eric Cook: Completion/Unix/Command/_zfs:
	complete jail/unjail subcommands on freebsd

	* 36646: Eric Cook: Completion/Unix/Type/_zfs_dataset,
	Completion/Unix/Command/_zpool, Completion/Unix/Command/_zfs:
	solaris/openzfs differences; only use -t share solaris

	* 36889: Eric Cook: Completion/BSD/Command/_sockstat:
	completion of system specific sockstat options

	* 36869: Matthew Martin: Completion/Unix/Command/_ssh: use
	permissions to limit files completed for ssh identity files

2015-10-18  Frank Terbeck  <ft@bewatermyfriend.org>

	* 36888: Functions/VCS_Info/vcs_info: vcs_info: Prevent
	warn_create_global warning with '-preinit-' state

2015-10-15  Peter Stephenson  <p.stephenson@samsung.com>

	* 36864: Completion/Unix/Command/_nm,
	Completion/Unix/Command/_objdump: new objdump completion plus
	tweak to _nm.

2015-10-14  Barton E. Schaefer  <schaefer@zsh.org>

	* 36853: Src/exec.c: replace pushheap/popheap by NEWHEAPS/OLDHEAPS
	in doshfunc() to optimize memory management

2015-10-14  Peter Stephenson  <p.stephenson@samsung.com>

	* 36856: Doc/Zsh/contrib.yo, Functions/Chpwd/cdr: add -p and -P
	options to cdr for pruning the directory list.

2015-10-11  Barton E. Schaefer  <schaefer@zsh.org>

	* 36841: Completion/Base/Widget/_complete_help: factor out and
	update the patterns that filter "uninteresting" functions out
	of the $funcstack list when generating the call trace to show
	where a tag is active.

	* 36836: Src/mem.c: zhalloc() avoids re-scanning all heaps when
	the last known heap with free space does not have enough space

	* 36834: Src/mem.c: freeheap() preserves last allocated heap

2015-10-11  Frank Terbeck  <ft@bewatermyfriend.org>

	* 36830: Functions/VCS_Info/Backends/VCS_INFO_get_data_git:
	vcs_info: Silence an error message with new git versions

	* 36832: Functions/VCS_Info/Backends/VCS_INFO_get_data_git:
	vcs_info: Remove dependency on "seq"

2015-10-06  Peter Stephenson  <p.stephenson@samsung.com>

	* 36780: Src/params.c: ensure HOME parameter is unset if
	corresponding internal variable is null.

2015-10-04  Barton E. Schaefer  <schaefer@zsh.org>

	* 36773: Src/utils.c: limit CORRECT / CORRECT_ALL to directory
	names in cases where it is obvious that a directory is expected

2015-10-03  Barton E. Schaefer  <schaefer@zsh.org>

	* unposted (cf. 36696): Test/C03traps.ztst: test case for 36766

	* unposted: Src/exec.c, Src/loop.c: back out 36707, fixed by 36766

	* 36766: Src/exec.c: fix incorrect reset of noerrexit during
	"if" conditions

2015-10-03  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 36760: Src/pattern.c: ensure we don't do anything untoward
	with an already metafied pattern trial match.

2015-10-03  Mikael Magnusson  <mikachu@gmail.com>

	* 36754: Functions/TCP/tcp_open, Functions/TCP/tcp_read,
	Functions/TCP/tcp_send, Functions/TCP/tcp_shoot: Tweak some
	usage output in the tcp_* functions

2015-10-02  Jun-ichi Takimoto <takimoto-j@kba.biglobe.ne.jp>

	* 36732: Completion/Unix/Command/_zsh: support -s and -b,
	and complete script arguments

2015-10-01  Peter Stephenson  <p.stephenson@samsung.com>

	* 36737: Src/pattern.c: Ensure we are not dereferencing
	zero-length unterminated string.

	* 36735: Doc/Zsh/contrib.yo, Functions/Misc/zcalc: ~/.zcalcrc.

	* Andrew Janke: 36729: MACHINES, NEWS, README: fix some typos.

	* 36722: Completion/Unix/Command/_git: allow range to complete
	after ^, taking acoount of backslash quoting.

2015-10-01  Mikael Magnusson  <mikachu@gmail.com>

	* 36709: Doc/Zsh/zle.yo, Functions/Zle/bracketed-paste-url-magic,
	Src/Zle/zle_main.c, Src/Zle/zle_params.c, Src/Zle/zle_thingy.c:
	zle -f from inside widget to set flags and make yank start/end
	zle params writable.

	* 36692: Functions/Zle/bracketed-paste-url-magic: simpler
	alternative for handling pasted urls

2015-09-30  Barton E. Schaefer  <schaefer@zsh.org>

	* users/20672: Src/text.c: missing "do" in gettext2() for "select"
	
	* 36707: Src/exec.c, Src/loop.c: distinguish ERR_RETURN value
	of retflag so that execif() can ignore it in the test sublist

	* cf. 36690: Doc/Zsh/builtins.yo: remove sentence fragment

2015-09-30  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* 36725: Functions/VCS_Info/Backends/VCS_INFO_get_data_git:
	vcs_info git: Compute %b correctly when "git am"-ing onto
	detached heads.

	* 36725: Functions/VCS_Info/Backends/VCS_INFO_get_data_git:
	vcs_info git: Compute %b correctly when rebasing detached heads.

	* 36725: Functions/VCS_Info/Backends/VCS_INFO_get_data_git:
	vcs_info git: Compute %b correctly when merging to detached
	heads.

2015-09-30  Jun-ichi Takimoto <takimoto-j@kba.biglobe.ne.jp>

	* 36697: Completion/Base/Utility/_arguments: handle options
	of _arguments correctly

2015-09-30  Peter Stephenson  <p.stephenson@samsung.com>

	* Matthew Martin: 36693: Doc/Zsh/arith.yo: arithmetic rounds
	towards zero.

	* 36711: Src/glob.c, Src/pattern.c: Memory for early unmetafied
	pattern trial string is on the heap.

2015-09-28  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 36682: Src/glob.c, Src/pattern.c, Src/zsh.h,
	Src/Zle/complist,c, Src/Zle/zle_hist.c: expand pattern interface
	to allow unmetafying trial string once for reuse.

2015-09-28  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* unposted: Test/D04parameter.ztst: Test for 36669

2015-09-28  Daniel Hahler  <git@thequod.de>

	* 36601: Functions/VCS_Info/Backends/VCS_INFO_get_data_git:
	vcs_info: handle missing .git/rebase-apply/{next,msg-clean}

2015-09-28  Barton E. Schaefer  <schaefer@zsh.org>

	* 36669: Src/lex.c: fix ${(z)...} of an an incomplete math
	expression by restoring "((" at the front of the token

2015-09-28  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* unposted: Etc/zsh-development-guide: Update link to my
	ChangeLog generator script, on account of patching it to handle
	commas properly (thanks Mikael).

2015-09-28  Mikael Magnusson  <mikachu@gmail.com>

	* unposted: Completion/Zsh/Context/_brace_parameter,
	Completion/Zsh/Type/_delimiters, Completion/Zsh/Type/_globquals,
	Functions/Calendar/age: Fix broken case condition and "qualifer"
	typo

2015-09-27  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* 36651: Doc/Zsh/options.yo, Src/exec.c, Src/math.c,
	Test/E01options.ztst: WARN_CREATE_GLOBAL += math expressions

	* Matthew Martin: 36653: Completion/Unix/Command/_user_admin:
	OpenBSD's usermod has no -a flag

2015-09-27  Barton E. Schaefer  <schaefer@zsh.org>

	* 36663: Src/mkmakemod.sh, Src/zsh.mdd: replace obsolete
	"autobins" commentary with "autofeatures"

	* 36661: Src/Modules/curses.mdd: replace obsolete "autobins"
	setting with "autofeatures"

2015-09-28  Jun-ichi Takimoto <takimoto-j@kba.biglobe.ne.jp>

	* 36631: Completion/Unix/Command/_sh,
	Completion/Unix/Command/_zsh: separate _zsh from _sh	

2015-09-26  Barton E. Schaefer  <schaefer@zsh.org>

	* 36641: Src/Modules/complist.c: fix multibyte handling in
	incremental search during menu selection

2015-09-26  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* unposted (see 36633): Completion/Unix/Command/_hg: _hg:
	Enable --option=value syntax and disable '-xy Xarg Yarg' syntax

2015-09-25  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* unposted: Src/Zle/zle_tricky.c Src/Zle/zle_utils.c: zle:
	Document the C helper function processcmd().

2015-09-25  Christoph Mathys  <eraserix@gmail.com>

	* 36626: Completion/Unix/Command/_hg: _hg: completion for
	'hg bookmarks'

2015-09-25  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 36630: Doc/Zsh/contrib.yo, Doc/Zsh/manual.yo,
	Functions/Chpwd/zsh_directory_name_generic: new helper function.

2015-09-24  Barton E. Schaefer  <schaefer@zsh.org>

	* 36623: Doc/Zsh/contrib.yo: document bracketed-paste-magic and
	url-quote-magic; add cross-reference to vim text object widgets

2015-09-24  Mikael Magnusson  <mikachu@gmail.com>

	* 36603: Src/glob.c: fix dirfd leak during Y shortcut qualifier

2015-09-24  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* unposted: Completion/Unix/Command/_hg: Declare $expl as an array

2015-09-24  Christoph Mathys  <eraserix@gmail.com>

	* 36613: Completion/Unix/Command/_hg: extend completion for hg
	push to support branch and bookmark

2015-09-23  Barton E. Schaefer  <schaefer@zsh.org>

	* 36604: Functions/Misc/zrecompile: fix getopts+shift calculation

2015-09-23  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* unposted: Src/Zle/compmatch.c: Followup to 36586: Change C99
	comment syntax to the C89 syntax.

2015-09-23  Mikael Magnusson  <mikachu@gmail.com>

	* Eric Cook: 36571: Completion/Linux/Command/_losetup,
	Completion/Zsh/Command/_zsocket: Completion for zsocket and
	updated losetup's completion

2015-09-22  Barton E. Schaefer  <schaefer@zsh.org>

	* 36587: Functions/Zle/edit-command-line: use +LINE:COLUMN to
	place the cursor when invoking emacs variants, for emacsclient

2015-09-22  Peter Stephenson  <p.stephenson@samsung.com>

	* 36586: Han Pingtian: Src/Zle/compmatch.c: tweak to completion
	matching with right anchor.

	* 36545: Han Pingtian: Doc/Zsh/compwid.yo: tweak doc for match
	anchors e and E.

	* 36538: Han Pingtian: Doc/Zsh/compwid.yo: tweak doc for match
	anchors to get correct difference between b and B.

2015-09-22  Jun-ichi Takimoto <takimoto-j@kba.biglobe.ne.jp>

	* 36578: Doc/Zsh/compsys.yo: option in a mutually exclusive set
	has key "set-opt" in $opt_args

2015-09-21  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 36580: Src/Zle/compmatch.c: don't copy empty buffer and check
	size is consistent.

2015-09-21  Frank Terbeck  <ft@bewatermyfriend.org>

	* 36575: Completion/Unix/Command/_tmux: _tmux: 'lock-server'
	option is gone in tmux.git

	* 36576: Completion/Unix/Command/_tmux: _tmux: Fix tmux homepage
	URI

2015-09-21  Jun-ichi Takimoto <takimoto-j@kba.biglobe.ne.jp>

	* 36574: Completion/Unix/Command/_lldb: new completion for
	the lldb debugger

	* 36556: Completion/Unix/Command/_sh: remove unnecessary
	helpspec to '_argument --'

2015-09-21  Peter Stephenson  <p.stephenson@samsung.com>

	* 36577: configure.ac, Src/zsh.h: supplement 36559 to
	use LONG_MAX for 64-bit long.

	* unposted: Src/zsh.h: typo in 36559.

2015-09-19  Barton E. Schaefer  <schaefer@zsh.org>

	* unposted: Doc/Zsh/builtins.yo: zcompile prepares scripts for
	sourcing, not for execution

	* 36566: Src/parse.c: check for regular file before lseek()

	* 36562: Src/utils.c: sanitize $PWD on import, per POSIX

2015-09-19  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 36559: Src/pattern.c: test earlier for overflow in pattern
	range.

	* unposted: Test/D07multibyte.ztst: fix typo.

2015-09-18  Barton E. Schaefer  <schaefer@zsh.org>

	* unposted (cf. users/20586): Doc/Zsh/builtins.yo: clean up
	cross-references to the "Autoloading Functions" section.

2015-09-17  Barton E. Schaefer  <schaefer@zsh.org>

	* unposted: Test/D04parameter.ztst: test for 36552

	* 36552: Src/utils.c: fix Nularg string in quotestring(QT_DOLLARS)

2015-09-14  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* unposted: Doc/Zsh/zle.yo README: docs: Typo fixes

2015-09-13  Axel Beckert  <abe@deuxchevaux.org>

	* 36523: Thue Janus Kristensen: Completion/Unix/Command/_gphoto2:
	Replace --delete-files with --delete-file.

2015-09-12  Barton E. Schaefer  <schaefer@zsh.org>

	* 36525: Src/Zle/zle_misc.c: revert only the selfinsert() bit of
	36496 because selfinsert() may be called with incomplete wide
	character processing from places other than getkeymapcmd()

	* unposted: Functions/Zle/bracketed-paste-magic: revert 36483 as
	multibyte is now handled by "zle .read-command"; adapt to new
	default behavior of zle_highlight for paste

	* 36522: Src/Zle/zle_thingy.c: unmetafy the argument of "zle -U"

	* 36509: Src/Modules/curses.c: allocate hash table nodes with
	zshcalloc() to avoid garbage flag values

2015-09-12  Jun-ichi Takimoto <takimoto-j@kba.biglobe.ne.jp>

	* 36491: Src/glob.c, Test/D07multibyte.ztst: Multibyte
	support for the parameter expansion flags B, E and N.

2015-09-11  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* 36443: Doc/Zsh/zle.yo Src/Zle/zle_refresh.c: 
	Highlight pasted/yanked text as standout by default (i.e., when
	$zle_highlight doesn't specify otherwise).

	* 36443: Revert 35834.

2015-09-11  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 36496 (plus tweak for key buffer length): Src/Zle/zle_hist.c,
	Src/Zle/zle_keymap.c, Src/Zle/zle_main.c, Src/Zle/zle_misc.c,
	Src/Zle/zle_vi.c: Read full multibyte string early for
	self-insert.

	* unposted: Config/version.mk: Update internal build to
	5.1.1-dev-0

	* unposted: Config/version.mk: 5.1.1

	*  Sebastian Gniazdowski: 36489: Src/Modules/curses.c: fix bug
	with hash table for colours.

	* 36483: Functions/Zle/bracketed-paste-magic: use
	[[:INCOMPLETE:]] to get rest of multibyte character.

2015-09-11  Peter Stephenson  <p.stephenson@samsung.com>

	* unposted: NEWS, README: update for minor new features that
	have just appeared.

2015-09-10  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* 36445: Doc/Zsh/zle.yo Src/Zle/zle_params.c: Expose yankb,
	yanke, ZLE_YANK to widgets.

2015-09-10  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 36478: Src/pattern.c, Src/zsh.h, Src/Zle/comp.h,
	Doc/Zsh/expn.yo, Test/D07multibyte.ztst: add [[:INCOMPLETE:]] and
	[[:INVALID:]] pattern tests.

2015-09-10  Barton E. Schaefer  <schaefer@zsh.org>

	* 36470: Src/Zle/zle_main.c: Auxiliary to 36468, return an empty
	buffer from zleread() if a widget exits

2015-09-10  Peter Stephenson  <p.stephenson@samsung.com>

	* 36468: Src/hist.c: Infinite loop if we tried to exit from a
	Zle widget but the lexer thought the current lexical expression
	needed finishing.

	* 36460: Test/E01options.ztst: Discard benign error on failure
	to write to pipe with no one reading.

2015-09-08  Oliver Kiddle  <opk@zsh.org>

	36422: Src/compat.c: add missing unmeta()

2015-09-07  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* 36437: Doc/Zsh/zle.yo Src/Zle/zle.h: Document interaction of
	$region_highlight and $zle_highlight.

	* unposted: Doc/Zsh/zle.yo: ZLE_STATE: fix obvious documentation
	typo.

2015-09-07  James Clarke  <jrtc27@jrtc27.com>

	* 36441: Completion/Unix/Command/_git: _git: Fixed typo in
	--author-date-order description

2015-09-06  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Config/versiom.mk, Etc/FAQ.yo, NEWS, README: make
	5.1-test-1 with updates for 5.1.1.

2015-09-05  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* unposted: Doc/Zsh/params.yo Doc/Zsh/zle.yo: Minor documentation
	tweaks.

	* 36410: Doc/Zsh/contrib.yo
	Functions/VCS_Info/Backends/VCS_INFO_get_data_git: vcs_info git:
	Present merge heads as patches

2015-09-04  Peter Stephenson  <p.stephenson@samsung.com>

	* 36421: Src/pattern.c: can't-get-the-staff fix for idiocy in
	36415.

2015-09-04  Jun-ichi Takimoto <takimoto-j@kba.biglobe.ne.jp>

	* 36417: Doc/Zsh/manual.yo: fix/update top level texinfo menu

2015-09-04  Peter Stephenson  <p.stephenson@samsung.com>

	* 36415: Src/pattern.c, Test/D07multibyte.ztst: remap bytes from
	invalid multibyte characters to 0xDC00 + index which is invalid
	in Unicode.  Strictly this only works if whcar_t is
	ISO-10646-compliant, however it ought to be at least as good as
	the current fudge in any case.

2015-09-03  Peter Stephenson  <p.stephenson@samsung.com>

	* 36416: Src/Zle/zle_refresh.c, Src/Zle/zle_utils.c: If
	keyboard interrupt during getzlequery(), don't propagate further,
	just redraw the line.  Also handle logical error that we
	attempted to redraw the line partially if an error or interrupt
	was propagated.

2015-09-03  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* 36403: Src/hashtable.c Test/A02alias.ztst: type -w +=
	suffix alias

2015-09-02  Barton E. Schaefer  <schaefer@zsh.org>

	* unposted: Test/A05execution.ztst: test for 36393

	* 36393: Src/signals.c: process queued signals during dotrap()

2015-09-02  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 36378: Src/exec.c: skip directories when looking for autoload
	files.

2015-09-02  Peter Stephenson  <p.stephenson@samsung.com>

	* 36399: Src/text.c, Test/A04redirect.ztst: shell code with
	multiple here documents wasn't shown properly.

2015-09-01  Mikael Magnusson  <mikachu@gmail.com>

	* 36380: Src/utils.c: Avoid gcc case syntax

	* 36347: Src/params.c, Test/A06assign.ztst: Fix appending empty
	array to associations

2015-09-01  Barton E. Schaefer  <schaefer@zsh.org>

	* 36376: Src/utils.c: handle signals during read1char() so it is
	possible to interrupt correct/correctall prompts

2015-09-01  Peter Stephenson  <p.stephenson@samsung.com>

	* 36365: Src/Zle/zle_tricky.c: magic-space removed the rest of
	the line if the lexer found something complicated.

	* unposted: Config/version.mk: update version to 5.1-dev-0 to
	avoid clash with 5.1 release.

2015-09-01  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* 36353: Completion/Unix/Command/_git: _git: Unbreak after
	previous.

2015-08-30  Mateusz Karbowy  <mateusz.karbowy@gmail.com>

	* 36328 + 36340: Completion/Unix/Command/_git: _git-cherry-pick:
	Complete other branches only

2015-08-30  Axel Beckert  <abe@deuxchevaux.org>

	* 36338: Functions/Zle/*-magic: s/5.0.9/5.1/ in source comments

2015-08-30  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Config/version.mk: Release version 5.1

2015-08-29  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* 36321: Completion/Debian/Command/_debcheckout: _debcheckout:
	New completion.

2015-08-28  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* 36306: Completion/Unix/Command/_subversion: _subversion:
	Complete --show-item values

2015-08-28  Peter Stephenson  <p.stephenson@samsung.com>

	* users/20475: Doc/Zsh/contrib.yo: mention that cdr mechanism
	keeps unique list with most recent use first.

	* users/20466: Test/V09datetime.ztst: make test for skipping
	strftime extention tests one that is known to fail on
	Solaris.  Reason is not yet known, but there's no current
	evidence for a shell bug so replace the failure by skipping
	test for the release.

2015-08-28  Mikael Magnusson  <mikachu@gmail.com>

	* 36302: Src/Modules/attr.c: Fix compilation with libcap 2.24

	* 36314: Functions/Prompts/prompt_bart_setup: Avoid using
	short_loops syntax in distributed files

2015-08-27  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* unposted: Completion/Unix/Command/_subversion: _subversion:
	Avoid SHORT_LOOPS

	* 36304: Completion/Unix/Command/_git: _git-cat-file: Fix
	regression in 36237

2015-08-27  Barton E. Schaefer  <schaefer@zsh.org>

	* unposted (cf. Axel Beckert 36292): Test/A05execution.ztst:
	discard even more extraneous stderr in "hang" test

2015-08-26  Barton E. Schaefer  <schaefer@zsh.org>

	* 36288: Src/Zle/zle_tricky.c: refine 36825, slightly different
	test for redirect context

	* 36285: Src/Zle/zle_tricky.c: update 36025, context cannot be
	command and redirect at the same time, redirect wins

	* 36282: Test/A05execution.ztst: discard stderr of "hang" test

2015-08-25  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Config/version.mk: 5.0.8-test-3.

2015-08-24  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* 36277: Completion/Unix/Command/_git: _git: Updated for
	git-clone 2.4.5.

2015-08-24  Peter Stephenson  <p.stephenson@samsung.com>

	* unposted: Etc/FAQ.yo: replace 5.0.9 with 5.1.

2015-08-23  Jun-ichi Takimoto <takimoto-j@kba.biglobe.ne.jp>

	* users/20455: Src/Modules/zpty.c: do not use posix_openpt()
	on OpenBSD

2015-08-22  Barton E. Schaefer  <schaefer@zsh.org>

	* 36274: Src/Zle/zle_vi.c: clear virangeflag when getvirange()
	has an error (the next keystroke is not a motion/selection).

	* 36273: Src/Zle/zle_move.c: teach endofline() and endoflinehist()
	about invicmdmode() cursor placement.

2015-08-21  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Config/version.mk, Src/parse.c, Src/Zle/zle_misc.c:
	update to 5.0.8-test-2 and fix some exports.

2015-08-21  Barton E. Schaefer  <schaefer@zsh.org>

	* 36266: Functions/Zle/bracketed-paste-magic: preserve emulation
	and setopt context for init and finish functions, handle vi modes

	* 36256: Src/builtin.c: local options should remain in effect
	for "emulate -L" even if additional option settings are applied

2015-08-21  Peter Stephenson  <p.stephenson@samsung.com>

	* 36268: Test/C04funcdef.ztst: test for 36265.

	* 36265 plus FAQ: fix alias expansion after "function"
	Names after the first were treated as command words so had
	non-global aliases expanded. Add an FAQ note that use of the
	function keyword works around other alias problems.  Also
	fixes problem that "function { ... }" didn't work with
	IGNORE_BRACES set.

	* 36264: Src/glob.c: pathbuf is apparently metafied; document
	this and unmetafy for system calls.

	* unposted: README, Etc/FAQ.yo: update latest release from 5.0.8
	to 5.1 in descriptive text.

	* 36262: Src/builin.c, Src/compat.c, Src/utils.c,
	Test/D07multibyte.ztst: replace 36232: the unmeta()
	was needed at a place higher up.  Add test.

	* 36250, tweaked: README, NEWS: highlight bracketed paste mode;
	next version will be 5.1 rather than 5.0.9.

2015-08-20  Jun-ichi Takimoto <takimoto-j@kba.biglobe.ne.jp>

	* 36243: Completion/Unix/Type/_pids: fix a few problems of
	"_pids -m pattern"

2015-08-19  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* 36247: Completion/Unix/Command/_git: __git_objects: Complete
	HEAD:./foo correctly in worktree subdir

	* 36237: Completion/Unix/Command/_git: __git_objects: Complete
	HEAD:foo correctly in worktree subdir

	* 36236: Completion/Unix/Command/_git: _git-log: Complete
	multiple revspecs

	* 36236: Completion/Unix/Command/_git: _git-log: complete
	'git rm'd files

2015-08-19  Oliver Kiddle  <opk@zsh.org>

	* 36148: Completion/Unix/Command/_git: _git-log: Complete flags
	after positional argument

2015-08-19  Peter Stephenson  <p.stephenson@samsung.com>

	* 36241: Test/V09datetime.ztst: Test for 36227.

2015-08-19  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* 36208: Completion/Unix/Command/_subversion: _subversion:
	Complete a few more option switches

2015-08-18  Peter Stephenson  <p.stephenson@samsung.com>

	* 36232: Src/compat.c: Unmeta an additional chdir().

	* 36227: Src/Builtins/sched.c, Src/Modules/datetime.c,
	Src/Modules/stat.c, Src/builtin.c, Src/prompt.c, Src/utils.c,
	Src/watch.c: real fix for metafication problem in ztrftime:
	unmetafy fmt on input and metafy return value with correct
	length.

	* unposted: revert 36222, not the correct fix.

	* 36222: Src/Modules/datetime.c: unmetafy output from strftime.

	* 36218: Src/files.c: use unmetafied file name for mkdir()
	system call.

	* 36216: Doc/Zsh/zle.yo: Simpler saving of UNDO_LIMIT_NO.

2015-08-17  Barton E. Schaefer  <schaefer@zsh.org>

	* 36212: Functions/Zle/narrow-to-region: save and restore HISTNO
	along with other editor state, for sanity of "zle undo"

2015-08-18  brian m. carlson  <sandals@crustytoothpaste.net>

	* 36209: Functions/VCS_Info/Backends/VCS_INFO_get_data_git:
	vcs_info: avoid grep error message when file is missing

2015-08-17  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* unposted: Completion/Linux/Command/_sshfs: _sshfs: Fix
	completion of options with values

	* 36158: Completion/Linux/Command/_sshfs: _sshfs: Fix completion
	of and after -o

	* 36109: Src/Zle/zle_misc.c: bracketed-paste: change quoting
	style

	* 36186: Etc/FAQ.yo: FAQ (3.24): Update for bracketed paste

2015-08-17  Mikael Magnusson  <mikachu@gmail.com>

	* 36172: Completion/Unix/Command/_imagemagick: Use $formats a
	bit more correctly

2015-08-17  Barton E. Schaefer  <schaefer@zsh.org>

	* unposted (cf. 36200): Completion/Base/Completer/_expand: back out
	backslash handling change from 34961.

2015-08-17  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Doc/Zsh/contrib.yo: use of $f in zmv.

2015-08-17  Oliver Kiddle <opk@zsh.org>

	* 36165: Completion/Unix/Type/_files: simplify file-patterns
	default to a single pattern

2015-08-17  Barton E. Schaefer  <schaefer@zsh.org>

	* unposted: Functions/Zle/url-quote-magic: mention
	bracketed-paste-magic in comment

2015-08-17  Mikael Magnusson  <mikachu@gmail.com>

	* 36177: Completion/Zsh/Command/_setopt: complete printexitvalue
	both ways

	* 36183: Completion/Unix/Command/_ssh: update to 7.0

2015-08-16  Barton E. Schaefer  <schaefer@zsh.org>

	* 36195, 36196: Functions/Zle/bracketed-paste-magic: wrapper of
	bracketed-paste for compatibilty with url-quote-magic and other
	self-insert wrapper widgets

2015-08-15  Barton E. Schaefer  <schaefer@zsh.org>

	* 36180: Src/jobs.c: avoid infinite job stop/continue loop on
	"wait PID" for a background job

2015-08-15  Mikael Magnusson  <mikachu@gmail.com>

	* Eric Cook: 36091: Completion/Unix/Command/_ncftp: search
	XDG_DATA_HOME for bookmarks saved by lftp

2015-08-14  Oliver Kiddle <opk@zsh.org>

	* 36146: Completion/Zsh/Type/_command_names,
	Completion/Zsh/Command/_zmodload: avoid mix of -/ and -g with
	_files as that just overrides user preferences

2015-08-13  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* unposted: Completion/Unix/Command/_subversion: _subversion:
	Complete property names for propdel

2015-08-13  Oliver Kiddle <opk@zsh.org>

	* 36131: Functions/Zle/narrow-to-region, Src/Zle/zle_utils.c:
	make use of undo limits; call mkundoent() when $UNDO_CHANGE_NO is
	referenced for a clear change number marking the current state

	* Eric Cook: 36113: Completion/Unix/Type/_find_net_interfaces:
	ip(8) may add suffixes which is not good for completion matches

	* Wieland Hoffmann: 36123: Completion/Unix/Command/_git:
	protect against word splitting in __git_is_committish_range

2015-08-12  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Kamil Dudka: 36106: Src/Zle/zle_keymap.c: fix const parameter.

2015-08-12  Oliver Kiddle <opk@zsh.org>

	* 36127: Completion/Zsh/Context/_brace_parameter,
	Completion/Unix/Command/_git, Completion/Unix/Command/_ifconfig,
	Completion/Unix/Command/_kvno, Completion/Unix/Command/_mh,
	Completion/Unix/Command/_rm, Completion/Unix/Command/_ssh,
	Completion/Unix/Command/_stty, Completion/Unix/Command/_vim,
	Completion/Unix/Type/_pdf, Completion/Unix/Command/_clay:
	assorted minor completion function changes

	* 36125: Src/Zle/zle_hist.c: don't set history context in get-line

	* 35834 (tweaked): Src/Zle/zle_misc.c: strip a final newline from
	pasted text: inserting is hard to tell apart from accepting it
	[reverted in 36443]

2015-08-12  Mikael Magnusson  <mikachu@gmail.com>

	* 36077: Functions/VCS_Info/Backends/VCS_INFO_get_data_bzr,
	Functions/VCS_Info/Backends/VCS_INFO_get_data_hg,
	Functions/VCS_Info/Backends/VCS_INFO_get_data_p4,
	Functions/VCS_Info/Backends/VCS_INFO_get_data_svk,
	Functions/VCS_Info/Backends/VCS_INFO_get_data_svn,
	Functions/VCS_Info/VCS_INFO_formats,
	Functions/VCS_Info/VCS_INFO_hook,
	Functions/VCS_Info/VCS_INFO_quilt,
	Functions/VCS_Info/VCS_INFO_set, Functions/VCS_Info/vcs_info,
	Functions/VCS_Info/vcs_info_lastmsg,
	Functions/VCS_Info/vcs_info_printsys: vcs_info: stop exporting
	everything

	* 36078: Doc/Zsh/contrib.yo: vcs_info: Adjust documentation for
	no longer exporting

	* 36116: Completion/Unix/Command/_git: various fixes

	* 36117: Completion/Unix/Command/_wget: complete headers for
	--header and add --no-use-server-timestamps

	* 36120: Completion/Unix/Command/_sort: Fix syntax error

	* 36119: Completion/Zsh/Command/_strftime: Add completion for
	zsh/datetime's strftime builtin

2015-08-11  Barton E. Schaefer  <schaefer@zsh.org>

	* 36108: NEWS: list of major changes so far since 5.0.8

	* 36104: Src/exec.c, Src/jobs.c: change order of child_block()
	and dont_queue_signals() to resolve yet another race condition

	* 36092: Doc/Zsh/mod_zpty.yo, Src/Modules/zpty.c: return the pty
	master file descriptor in $REPLY for use with "zle -F" etc.

	* 36090: Src/init.c: keep signals queued for preprompt()

2015-08-11  Oliver Kiddle <opk@zsh.org>

	* 36096: Src/Zle/zle_move.c: special . mark in vi mode

	* 36044: Doc/Zsh/zle.yo, Src/Zle/iwidgets.list, Src/Zle/zle_keymap.c,
	Src/Zle/zle_move.c: deactivate-region widget for escape in visual mode

	* 35952: Jun-ichi Takimoto: Src/Zle/zle_bindings.c: bind escape in
	vi mode so it is a full key sequence and later keys aren't dropped

2015-08-11  Jun-ichi Takimoto <takimoto-j@kba.biglobe.ne.jp>

	* 36067: Doc/Zsh/builtins.yo, Doc/Zsh/compsys.yo,
	Doc/Zsh/contrib.yo, Doc/Zsh/expn.yo: fix typo and format

2015-08-10  Barton E. Schaefer  <schaefer@zsh.org>

	* 36084: Src/glob.c, Src/text.c: use zrealloc() consistently

	* 36079: Src/signals.c: do not allow update_job() and its helpers
	to run the signal queue while we are processing a job exit.

2015-08-10  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 36083: Src/builtin.c, Test/B02typeset.ztst: set array value
	when consistently retying scalar and array.

2015-08-10  Peter Stephenson  <p.stephenson@samsung.com>

	* 36074: Src/signals.c: Don't rely on implicit value for
	saving status of background process.

2015-08-10  Frank Terbeck  <ft@bewatermyfriend.org>

	* 36046: Completion/Unix/Command/_tmux: _tmux: Update command line
	options

	* 36048: Completion/Unix/Command/_tmux: _tmux: Update options for
	supported commands

	* 36062: Completion/Unix/Command/_tmux: _tmux: Add support for new
	sub-commands

	* 36063: Completion/Unix/Command/_tmux: _tmux: Remove dead code

	* 36050: Completion/Unix/Command/_tmux: _tmux: Don't unset, set
	empty in local scope

	* 36058: Completion/Unix/Command/_tmux: _tmux: No need to unset
	local variables

	* 36057: Completion/Unix/Command/_tmux: _tmux: Replay all
	arguments when dispatching to new _tmux()

	* 36054: Completion/Unix/Command/_tmux: _tmux: "local -x" serves
	no purpose

	* 36049: Completion/Unix/Command/_tmux: _tmux: options =>
	session_options

	* 36056: Util/check-tmux-state: Add helper script to check state
	of _tmux completion

	* 36052: Completion/Unix/Command/_tmux: _tmux: Remove old
	sub-commands and their aliases

	* 36064: Completion/Unix/Command/_tmux: _tmux: Add new command
	aliases

	* 36047: Completion/Unix/Command/_tmux: _tmux: Fix options with
	changed scope

	* 36051: Completion/Unix/Command/_tmux: _tmux: Remove support for
	old options

	* 36059: Completion/Unix/Command/_tmux: _tmux: Add new session
	options

	* 36055: Completion/Unix/Command/_tmux: _tmux: Add support for new
	server options

	* 36061: Completion/Unix/Command/_tmux: _tmux: Add support for new
	window options

	* 36060: Completion/Unix/Command/_tmux: _tmux: Update TODO

	* 36070: Completion/Unix/Command/_tmux: _tmux: Update bell-action
	and prefix options

	* 36069: Completion/Unix/Command/_tmux: _tmux: Fix \ooo display in
	completion list

	* 36075: Util/check-tmux-state: Disable "local" keyword in
	script to make data retrieval work

2015-08-10  Peter Stephenson  <p.stephenson@samsung.com>

	* 36045: Test/A05execution.ztst: make effect of failures
	in wait test cleare.

	* not quite posted: Src/Modules/socket.c, Src/Modules/tcp.c:
	check for error return before testing for EINTR.

	* Joshua Krusell: 36039: Src/Modules/socket.c,
	Src/Modules/tcp.c: Restart socket commands on EINTR.

	* 35885: Doc/Zsh/mod_system.zo: document how to close
	fd's opened with sysopen.

2015-08-09  Barton E. Schaefer  <schaefer@zsh.org>

	* 36033: Src/glob.c, Src/pattern.c: a few more queue_signals()
	to protect global state changes

2015-08-09  Mikael Magnusson  <mikachu@gmail.com>

	* unposted: Test/C03traps.ztst: add tests for outputting traps
	specified with SIG prefix or numbers fixed by 36008.

2015-08-09  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 26027: Src/builtin.c: fix retying variables in opposite
	order (should be an error).

	* 36025:Src/Zle/zle_tricky.c: Catch another case of context in
	get_comp_string():  after "foo=bar; setopt " we didn't recognise
	"setopt" as the command.  Attempt to do this without actually
	understanding what the command context code is attempting to do
	after a command separator.

2015-08-09  Barton E. Schaefer  <schaefer@zsh.org>

	* 36026: Src/Modules/zftp.c: zero freed pointers in cleanup_()
	in case the module is re-loaded after unloading.

	* 36022: Src/loop.c: fix bug that some loop constructs could
	not be interrupted if all they did was variable assignments or
	math expressions

	* 36022: Src/exec.c, Src/init.c, Src/input.c, Src/parse.c,
	Src/signals.c: revise signal queueing to better control the
	circumtances in which trap handlers are executed

2015-08-08  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* 36008: Src/builtin.c: trap: Fix listing of traps created
	under non-alias non-canonical signal spelling

2015-08-08  Mikael Magnusson  <mikachu@gmail.com>

	* 35954: Doc/Zsh/mod_system.yo: sysopen -u is not optional

2015-08-09  Jun-ichi Takimoto <takimoto-j@kba.biglobe.ne.jp>

	* 35929: Src/jobs.c: protect FDT_PROC_SUBST by #ifdef

2015-08-08  Jun-ichi Takimoto <takimoto-j@kba.biglobe.ne.jp>

	* 35928: Src/utils.c, Doc/Zsh/prompt.yo: date/time format such
	as '%-m' should work even if strftime(3) doesn't support it.
	Also clarify document.

2015-08-05  Mikael Magnusson  <mikachu@gmail.com>

	* 35989: Completion/Unix/Command/_ssh: update to 6.9

	* unposted: Completion/Unix/Command/_ssh: use -q for the
	option suffix

	* Christian Hesse: 35991: Completion/Unix/Command/_ssh: add ssh
	option FingerprintHash

2015-08-05  Oliver Kiddle <opk@zsh.org>

	* Eric Cook: 35973: Completion/BSD/Command/_systat,
	Completion/Unix/Command/_vmstat: new completions

	* Eric Cook: 35972: Completion/Unix/Command/_ssh: allow for
	Directive=Value format in .ssh/config

	* Christian Hesse: 35986: Completion/Unix/Command/_ssh:
	add ssh option UpdateHostKeys

	* unposted (c.f. 35902): Functions/Zle/incremental-complete-word:
	use - after zle -U in case $key starts with -

2015-08-04  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* unposted: Src/builtin.c: Typo fix.

2015-08-02  Daniel Hahler  <zsh@thequod.de>

	* 35970: Completion/Unix/Command/_git,
	Completion/Zsh/Context/_brace_parameter: completion: fix typos in _git
	and _brace_parameter.

2015-08-01  Jun-ichi Takimoto <takimoto-j@kba.biglobe.ne.jp>

	* 35957: Completion/Unix/Command/_make: fix _make-expandVars(),
	and use variables set in the command line and environment.

2015-07-31  Oliver Kiddle <opk@zsh.org>

	* 35963: Src/Modules/system.c: simplify condition found by
	coverity scan to include tautology

	* Matthew Martin: 35960 (tweaked): Completion/Unix/Command/_find:
	complete correct options for OpenBSD's find

2015-07-29  Barton E. Schaefer  <schaefer@zsh.org>

	* 35953: Src/lex.c, Test/A01grammar.ztst: fix handling of command
	substitution in math context, particularly in "for ((...))"

2015-07-28  Barton E. Schaefer  <schaefer@zsh.org>

	* 35947: Etc/zsh-development-guide: update discussion of module
	wrappers, some examples

2015-07-27  Barton E. Schaefer  <schaefer@zsh.org>

	* 35937: Functions/Misc/zargs: wait for process IDs instead of
	job numbers in parallel mode, in case zargs is in a pipeline

2015-07-26  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* 35274 (plus tweaks): Completion/BSD/Command/_watch-snoop
	Completion/Unix/Command/_watch: completion: Add FreeBSD's
	watch(1)

2015-07-26  Oliver Kiddle <opk@zsh.org>

	* 35901: Completion/X/Type/_x_font: complete full names as removing
	later components was broken for aliases and unwanted in any case

2015-07-26  Jun-ichi Takimoto <takimoto-j@kba.biglobe.ne.jp>

	* Antony Lee: 35899: Completion/Unix/Type/_python_modules:
	faster method of generating list of python modules

2015-07-25  Barton E. Schaefer  <schaefer@zsh.org>

	* unposted: Functions/Prompts/prompt_bart_setup: add RPS2 handling,
	update help text, clean up indentation whitespace

2015-07-25  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 35910: Src/input.c: Don't add to raw lex buffer if lex
	stopped.  Fixes crash on completion of incomplete
	math expresion e.g. '$((3*4)'.

	* 35909: Src/utils.c: fix $((...) completion in _expand by
	normalising quoting of the math expression containing tokens.

	* 35908: Src/ZLe/zle_tricky.c: fix $((...)) completion
	by expand-or-complete widget.

2015-07-24  Barton E. Schaefer  <schaefer@zsh.org>

	* 35896: Doc/Zsh/params.yo, Doc/Zsh/zle.yo: index zle_highlight

	* 35882: Src/Zle/iwidgets.list: read-command has ZLE_NOTCOMMAND

2015-07-24  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* 35810: Etc/FAQ.yo: FAQ += edit-command-line

	* 35809: Util/zyodl.vim: zyodl.vim: Fix nested parentheses

	* 35807: Functions/Zle/edit-command-line: edit-command-line:
	Fix for non-7bit-data (after 35769)

2015-07-24  Oliver Kiddle <opk@zsh.org>

	* 35865: Doc/Zsh/prompt.yo: document %^ prompt expansion

	* 35864: Doc/Zsh/mod_system.yo, Src/Modules/system.c,
	Src/Modules/system.mdd: add sysopen, sysseek and systell to
	system module

	* 35879: Eric Cook: Completion/Linux/Command/_btrfs: fix for
	subcommands that don't have a second subcommand

2015-07-24  Peter Stephenson  <p.stephenson@samsung.com>

	* 35883: Src/hist.c: Don't attempt to back up over history if
	expanding alias.

2015-07-23  Peter Stephenson  <p.stephenson@samsung.com>

	* 35873: Test/D03procsubst.ztst: add original test from 35847:

	* 35872: Src/utils.c: protect against NULL pointers in unmeta().

	* 35849: Src/exec.c, Src/jobs.c, Test/D03procsubst.ztst: close
	file descriptors from process substitution in parent after
	fork.

	* 35854: Stc/hist.c: ensure character unget doesn't cause
	infinite recursion.

	* 35793: Src/zsh.h: avoid undefined behaviour shifting signed
	number.

2015-07-23  Oliver Kiddle <opk@zsh.org>

	* 35753: Completion/Zsh/Type/_ps1234: allow for numbers after
	the ( in ternary expressions and fix backslash quoting

	* 35867: Completion/Unix/Command/_patchutils: new completion

	* 35866: Completion/Unix/Command/_gzip: complete also for pigz

	* 35866: Completion/Unix/Command/_zcat: allow for NetBSD gzip

	* 35824: Doc/Zsh/zle.yo, Src/Zle/iwidgets.list, Src/Zle/zle.h,
	Src/Zle/zle_misc.c, Src/Zle/zle_refresh.c: allow highlighting of
	just pasted text, put text from bracketed paste in cut buffers

	* 35815: Functions/Misc/nslookup: fix for newer nslookup

	* 35814: Src/Zle/zle_main.c: POSTEDIT needs to be unmetafied

2015-07-22  Barton E. Schaefer  <schaefer@zsh.org>

	* 35839: Joshua Krusell <js.shirin@gmail.com>:
	Src/Modules/socket.c, Src/Modules/tcp.c: fix select polling in
	ztcp and zsocket

	* unposted: Completion/Zsh/Type/_directory_stack: move some more
	recent code so an old comment is connected to the correct bit of
	older code

	* users/20324: Completion/Zsh/Type/_directory_stack: add (D) flag
	for tilde-fied completion listing

	* 35826: Src/Modules/newuser.c, Src/Modules/zftp.c,
	Src/Zle/complist.c, Src/Zle/zle_misc.c, Src/init.c, Src/params.c,
	Src/utils.c, Src/watch.c: add getsparam_u() to return unmetafied
	string, use it for a number of references to non-special params

	* 35823: Functions/Zle/narrow-to-region: fix handling of MARK
	and CURSOR, clean up documentary comment

2015-07-22  Barton E. Schaefer  <schaefer@zsh.org>

	* unposted: Test/B02typeset.ztst: fix another test for 35581
	
	* 35582: Test/A06assign.ztst, Test/B02typeset.ztst: test for 35581

	* 35581: Src/params.c: output array assignments with spaces inside
	the parens

2015-07-16  Barton E. Schaefer  <schaefer@zsh.org>

	* 35805: Test/E01options.ztst: tests for 35799

2015-07-15  Barton E. Schaefer  <schaefer@zsh.org>

	* 35799: Src/params.c: with NO_EXEC, parse parameter subscript
	expressions to correctly balance enclosing braces, but do not
	perform the subscripting

2015-07-15  Mikael Magnusson  <mikachu@gmail.com>

	* unposted: Completion/Zsh/Type/_ps1234: unposted: _ps1234:
	Fix ternary test char completion

2015-07-14  Oliver Kiddle  <opk@zsh.org>

	* 35789: (tweaked c.f. Bart: 35791) Completion/Unix/Type/_files:
	duplicate glob qualifier handling from _path_files so it is
	called once and not for each file pattern

2015-07-13  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* 35790: Util/zyodl.vim: zyodl.vim: Be compatible with Vim 6.

	* 35775: Doc/Zsh/.vimrc Etc/zsh-development-guide Util/zyodl.vim:
	New zsh-specific yodl vim syntax highlighting.

2015-07-13  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* 35769: Functions/Zle/edit-command-line: edit-command-line:
	Go to the right byte offset

2015-07-13  Oliver Kiddle  <opk@zsh.org>

	* 35737: (tweaked c.f. Peter: 35759): Src/Zle/zle_utils.c,
	Functions/Zle/read-from-minibuffer: use new undo limit for
	minibuffer and beep when limit is reached

	* 35756: Completion/Zsh/Type/_ps1234: use the actual
	colours in the completion list for terminal colours

	* 35774: Completion/Unix/Type/_dates: fix double
	formatting of date explanation message

2015-07-13  Daniel Hahler  <zsh@thequod.de>

	* 35779: Completion/Unix/Command/_git: _git-config: remove
	extraneous "local expl".

2015-07-12  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* unposted: Test/B01cd.ztst: Typo

2015-07-10  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Test/B01cd.ztst: notes on ZTST_unimplemented: and
	ZTST_skip.

2015-07-10  Mikael Magnusson  <mikachu@gmail.com>

	* 35761: Test/V09datetime.ztst: Make sure to skip alternate
	format extension test properly

2015-07-10  Peter Stephenson  <p.stephenson@samsung.com>

	* unposted: another ZTST_skip.

	* 35760: Test/A01grammar.ztst, Test/C02cond.ztst,
	Test/V09datetime.ztst, Test/ztst.zsh: ZTST_skip
	can be used to skip test case.

2015-07-09  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 35708: Doc/Zsh/zle.yo, Src/Zle/zle_params.c,
	Src/Zle/zle_utils.c; UNDO_LIMIT_NO.

2015-07-09  Peter Stephenson  <p.stephenson@samsung.com>

	* 35751: Src/exec.c, Test/C03traps.ztst: fix ERR_RETURN /
	ERR_EXIT in else branch of if.

2015-07-09  Mikael Magnusson  <mikachu@gmail.com>

	* 35745: Src/utils.c, Test/V09datetime.ztst: ztrftime: Pass
	everything unhandled to the system strftime()

	* unposted: (c.f. Jun T: 35754): Test/V09datetime.ztst: Make
	V09 set a known timezone

2015-07-09  Oliver Kiddle  <opk@zsh.org>

	* 35748: Completion/Zsh/Type/_ps1234,
	Completion/Zsh/Command/_print: fixes to prompt spec completion
	where it contains date formats

	* 35749: (c.f. Jun T: 35732): Completion/Unix/Type/_date_formats:
	fix exclusion list for flags/modifiers

2015-07-08  Oliver Kiddle  <opk@zsh.org>

	* 35729: Completion/Zsh/Command/_compadd: new compadd completion

	* Matthew Martin: 35727: Completion/Unix/Type/_diff_options:
	support OpenBSD for diff options

2015-07-07  Oliver Kiddle  <opk@zsh.org>

	* 35700: Completion/Unix/Type/_date_formats: complete OS specific
	date format specifiers and put % in a prefix

	* 35718: Completion/Unix/Command/_find, Completion/Unix/Type/_dates,
	Completion/Zsh/Type/_globquals: new calendar style date completion

2015-07-07  Peter Stephenson  <p.stephenson@samsung.com>

	* unposted: Src/Zle/complete.c: remove compiler warning.

2015-07-06  Barton E. Schaefer  <schaefer@zsh.org>

	* unposted: Doc/Zsh/expn.yo: alphabetize ${(b)...} flag

	* 35709: Doc/Zsh/expn.yo: explain :s/// modifier contexts

	* 35694: Src/subst.c, Test/D04parameter.ztst: fix handling of
	history modifiers (specifically :s/l/r/) when applied across all
	elements of an array parameter value

2015-07-06  Oliver Kiddle  <opk@zsh.org>

	* 35704: Doc/Zsh/compwid.yo, Src/Zle/compcore.c, Src/Zle/complete.c:
	compadd -E 0 should imply -J and -2

2015-07-06  Mikael Magnusson  <mikachu@gmail.com>

	* 35696: Completion/Unix/Type/_ps1234: complete colors for %F{
	and %K{

	* 35697: Completion/Unix/Type/_date_formats,
	Completion/Unix/Type/_ps1234: Complete strftime formats for %D{}

2015-07-06  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* 35441: Etc/zsh-development-guide: Make devs' ChangeLog
	generator scripts discoverable

2015-07-05  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 35692: Src/Zle/computil.c: cfp_matcher_range used wrong raw
	character if it couldn't be converted to wchar_t.

	* 35688: Src/text.c: Slightly more nearly definitive version of
	turning wordcode case statements back to text.

2015-07-04  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 35682: Src/text.c, plus Test/A01grammar.ztst: turning case
	statements parsed as multiple alternatives back into text.

2015-07-03  Oliver Kiddle  <opk@zsh.org>

	* 35681: Src/Modules/datetime.c: fix day of month initialisation

	* 35674: Src/Zle/zle_main.c: make an undo event for
	initial buffer contents

2015-07-03  Mikael Magnusson  <mikachu@gmail.com>

	* 35673: Completion/Zsh/Function/_zargs: Improve _zargs

2015-07-02  Peter Stephenson  <p.stephenson@samsung.com>

	* Han Pingtian: 35665: Src/Zle/complete.c: better error handling
	for command line match processing.

	* Eric Cook: 35663: Completion/Unix/Command/_zpool: fix for
	changed interface.

	* 35668: Src/input.c, Src/lex.c, Src/zsh.h,
	Test/D03procsubst.ztst: replacement for 35667:
	use input flag to stop unwanted backtracking,
	additional test.

2015-07-01  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 35667: Src/lex.c, Src/zsh.h, Test/D03procsubst.ztst,
	Test/D08cmdsubst.ztst: fix command expansion which
	starts but does not finish within alias.

2015-06-29  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Doc/Zsh/options.yo: fix formatting typo.

	* 35655: Doc/Zsh/options.yo, Src/exec.c, Src/options.c,
	Src/zsh.h: APPEND_CREATE option gives POSIX compatible behaviour
	for NO_CLOBBER.

2015-06-28  Barton E. Schaefer  <schaefer@zsh.org>

	* 35660: Functions/Prompts/prompt_adam1_setup: avoid perl, fix help

2015-06-29  Oliver Kiddle  <opk@zsh.org>

	* 35637: Src/Zle/zle.h, Src/Zle/zle_main.c, Src/Zle/zle_tricky.c:
	remove the now unused module hook for reverse-menu-complete

	* 35627: Src/Zle/compcore.c, Src/Zle/compctl.c, Src/Zle/complete.c,
	Src/Zle/complist.c, Src/Zle/compresult.c, Src/Zle/zle_tricky.c:
	make reverse-menu-complete start with last match in menu selection

	* 35623: Src/Zle/complist.c: fix menu-selection where initial
	selection would not be displayed without scrolling

2015-06-28  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 35643: Src/parse.c: redirections after typeset assignments
	were broken.

2015-06-27  Barton E. Schaefer  <schaefer@zsh.org>

	* 35642: Src/context.c: signal queueing in zcontext_save_partial()

	* 35634: Src/exec.c: handle failure of gettempname() in namedpipe()

2015-06-27  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 35635: Src/builtin.c: a bit more consistency about
	making elements of things local.

	* users/20281: Completion/Base/Core/_main_complete:
	don't require MULTIFUNCDEF as _main_complete is parsed
	before we can ensure it's set.

	* 35623: Src/builtin.c, Src/zsh.h, Test/B02typeset.ztst: 35610
	was incomplete: all is_array asignments should be treated as
	having a value.

2015-06-26  Barton E. Schaefer  <schaefer@zsh.org>

	* 35626: Doc/Zsh/options.yo: update POSIX_CD to note that it is on
	in ksh and sh emulations

2015-06-26  Peter Stephenson  <p.stephenson@samsung.com>

	* 35615: Src/lex.c, Src/Zle/zle_tricky.c:
	fix completion after typeset.

	* 35613: Src/builtin.c, Test/B02typeset: handle
	array slices in typeset.

2015-06-25  Peter Stephenson  <p.stephenson@samsung.com>

	* 35610: Src/builtin.c: typeset is silent if
	arguments is x=() even if array x already exists.

	* 35604: Src/exec.c, Test/B02typeset: create
	empty arrays in typeset with array=().

2015-06-24  Jun-ichi Takimoto <takimoto-j@kba.biglobe.ne.jp>

	* 35550: Src/Zle/complist.c: fix backspace in interactive
	mode of menu-select

2015-06-24  Peter Stephenson  <p.stephenson@samsung.com>

	* 35514: Han Pingtian: Src/pattern.c: [[:foo:]]
	tests in completion weren't specific enough about
	foo.

	* 35590: Src/text.c, Test/B02typeset.ztst: tweak and
	test text output for typeset.

	* various culminating in 35586, c.f. commits on typeset-array
	branch: Config/version.mk, Doc/Zsh/builtins.yo,
	Doc/Zsh/grammar.yo, Doc/Zsh/options.yo, NEWS, README,
	Src/builtin.c, Src/exec.c, Src/hashtable.c, Src/lex.c,
	Src/options.c, Src/parse.c, Src/text.c, Src/zsh.h,
	Test/B02typeset.ztst, Test/D01prompt.ztst, Test/E01options.ztst:
	Implement assignment handling for typeset etc. when matched as
	reserved words.  Document and test.

2015-06-23  Peter Stephenson  <p.stephenson@samsung.com>

	* 35573: Completion/compinit: turn off POSIX_BUILTINS
	in completion, needed to get usable OPTIND behaviour.

	* unposted: Src/Zle/zle_misc.c: add missing "void" argument
	list.

2015-06-23  Oliver Kiddle  <opk@zsh.org>

	* 35568: Completion/Zsh/Type/_file_descriptors: use symlinks in
	/proc/$$/path on Solaris and procstat on FreeBSD

	* 35529: Completion/Unix/Command/_java: fix filename completion
	after java -jar

2015-06-22  Peter Stephenson  <p.stephenson@samsung.com>

	* 35566: Src/Modules/regex.c: didn't handle faile
	parenthesis matches.

2015-06-22  Mikael Magnusson  <mikachu@gmail.com>

	* 35554: Doc/Zsh/contrib.yo: Document narrow-to-region -l and -r.

	* 35558: Functions/Zle/narrow-to-region: narrow-to-region:
	Use unique parameter names for new feature.

2015-06-21  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 35545: Functions/Zle/narrow-to-region: Add ability to return
	buffer components from narrowed region.

2015-06-19  Oliver Kiddle  <opk@zsh.org>

	* 35531: Completion/Unix/Command/_adb: fallback on file completion

	* 35527: Completion/Unix/Type/_email_addresses,
	Completion/Zsh/Command/_fc, Completion/Zsh/Command/_zpty:
	use list-separator style in cases where separator was hardcoded

	* 35528: Completion/Unix/Type/_pids: allow for IPREFIX

2015-06-18  Oliver Kiddle  <opk@zsh.org>

	* 35474, 35492: Doc/Zsh/params.yo, Doc/Zsh/zle.yo,
	Src/Zle/complist.c, Src/Zle/iwidgets.list, Src/Zle/zle_hist.c,
	Src/Zle/zle_keymap.c, Src/Zle/zle_main.c: support the
	bracketed paste mode of newer terminal emulators

	* 35487, 35496: Doc/Zsh/zle.yo, Src/Zle/complist.c,
	Src/Zle/zle_hist.c: don't reinstate previous incremental search
	string when search direction changes

	* 35510: Completion/Unix/Command/_git: use consistent
	formatting for git subcommands

	* 35504: Completion/Unix/Command/_git: complete % placeholders
	for git log --format

	* 35521: Completion/Zsh/Type/_file_descriptors: sort matches
	numerically and use pfiles on Solaris

	* Eric Cook: 35490: Completion/Zsh/Type/_file_descriptors:
	silence errors and avoid blank match due to missing local

2015-06-17  Mikael Magnusson  <mikachu@gmail.com>

	* 35477: Completion/Unix/Command/_gdb: _gdb: Allow 'core' to
	occur anywhere in a coredump filename

	* 35476: Src/params.c: Allow setting $0 when POSIX_ARGZERO is
	not set	

2015-06-16  Barton E. Schaefer  <schaefer@zsh.org>

	* 35493: Src/exec.c: erase $_ when the command line is an assignment

	* 35482: Src/init.c: be consistent about how argzero is allocated

2015-06-14  Barton E. Schaefer  <schaefer@zsh.org>

	* 35469: Functions/Zle/smart-insert-last-word: test UNDO_CHANGE_NO
	to determine whether to start over or use the next history event

	* 35467: Completion/Unix/Command/_du: complete files for non-GNU du

2015-06-12  Peter Stephenson  <p.stephenson@samsung.com>

	* 35448: Src/Modules/curses.c, Src/Modules/regex.c,
	Src/Zle/complist.c, Src/Zle/zle_utils.c, Src/builtin.c,
	Src/glob.c, Src/hist.c, Src/prompt.c, Src/utils.c, Src/zsh.h,
	Test/D07multibyte.ztst: Add non-metafied character length
	handling and use this for regex module.  Add test.
	Rename mb_metacharinit() to mb_charinit() since it doesn't
	involve metafied characters.

2015-06-11  Peter Stephenson  <p.stephenson@samsung.com>

	* 35442: Doc/Zsh/options.yo: multibyte option now on
	everywhere by default.

2015-06-09  Oliver Kiddle  <opk@zsh.org>

	* 35418: Doc/Zsh/compsys.yo: fix usage synopsis for _describe
	to be clear that a single description is used

2015-06-08  Peter Stephenson  <p.stephenson@samsung.com>

	* 35416: Src/options.c: Turn on MULTIBYTE in all
	emulations, including sh.

2015-06-08  Daniel Hahler  <zsh@thequod.de>

	* 35216: Completion/Unix/Command/_git: _git-checkout: do not call
	__git_commits twice.

2015-06-07  Oliver Kiddle  <opk@zsh.org>

	* 35412: Src/builtin.c, Test/B03print.ztst: fix for - flag
	when formating strings with printf that was broken in 34841

2015-06-06  Barton E. Schaefer  <schaefer@zsh.org>

	* 35350: Completion/Zsh/Command/_fc, Doc/Zsh/builtins.yo,
	Src/builtin.c: extend "fc -I" to cover listing of "internal"
	history events only

	* 35163: Completion/Base/Core/_main_complete,
	Completion/Base/Core/_setup: move "show-ambiguity" style to _setup
	so that more precise context can be applied

2015-06-05  Peter Stephenson  <p.stephenson@samsung.com>

	* 35386: Doc/Zsh/builtins.yo, Doc/Zsh/contrib.yo,
	Functions/Misc/zed, Src/builtin.c, Src/hashtable.c,
	Src/pattern.c, Src/text.c, Src/utils.c, Src/zsh.h:
	expand tabs for function output in functions, whence, where,
	which and also zed -f using -x num option.

2015-06-03  Oliver Kiddle  <opk@zsh.org>

	* 35360 (replacing 35357): configure.ac, Src/Modules/zpty.c:
	fix for configuring zpty on FreeBSD without pty.ko loaded

2015-06-03  Peter Stephenson  <p.stephenson@samsung.com>

	* 35374: Test/D07multibyte.ztst: add tab expansion test with
	double width characters.

2015-06-02  Peter Stephenson  <p.stephenson@samsung.com>

	* 35369: Test/A06assign.ztst, Test/E01options.ztst: better
	GLOB_ASSIGN testing.

2015-06-02  Mikael Magnusson  <mikachu@gmail.com>

	* 35365: Src/exec.c: GLOB_ASSIGN should only affect scalar
	assignments, this regressed in 33816.

2015-06-02  Peter Stephenson  <p.stephenson@samsung.com>

	* users/20243: Completion/compinit: turn off GLOB_ASSIGN in
	completion system.

2015-06-02  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* 35270: Completion/Base/Utility/_describe: _describe: Document
	a known issue described in 35229 (which is the same thread as
	35127 and 34768)

	* 35271: Completion/Unix/Command/_beep: New completion:
	beep.

	* unposted: Doc/Zsh/options.yo: Typo fix

2015-06-02  Peter Stephenson  <p.stephenson@samsung.com>

	* 35359 (plus changed error strings in tests): Src/math.c,
	Test/C01arith.ztst: fix math parsing problem that trailing ")"
	wasn't detected; also improve error messages to indicate they
	refer to math expressions.

	* Baptiste Daroussin: 35357: Src/Modules/zpty.c:
	HAVE_POSIX_OPENPT is needed for FreeBSD zpty.

	* 35353: Doc/Zsh/builtins.yo, Src/builtin.c, Src/utils.c,
	Test/B03print.ztst: print -x and print -X expand tabs.

2015-06-02  Oliver Kiddle  <opk@zsh.org>

	* 35356: Completion/Unix/Type/_ttys, Completion/Unix/Command/_ps,
	Completion/Unix/Command/_last, Completion/Unix/Command/_pgrep,
	Completion/Unix/Command/_gdb: factor out completion of tty devices

	* Adrien Vergé: 35352 (tweaked): Completion/Redhat/Command/_dnf:
	completion for new Redhat package manager

2015-06-01  Peter Stephenson  <p.stephenson@samsung.com>

	* unposted: Config/version.mk: update to 5.0.8-dev-0 so
	dev installs don't trash release.

2015-05-31  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Config/version.mk: release 5.0.8, finally.

	* 35343: Doc/Zsh/expn.yo, Doc/Zsh/options.yo, Src/subst.c,
	Test/D04parameter.ztst: $#foo for any valid identifier
	is only the length of foo if POSIX_IDENTIFIERS is not set.

2015-05-30  Barton E. Schaefer  <schaefer@zsh.org>

	* users/20238: Doc/Zsh/builtins.yo, Src/builtin.c: add "fc -L" to
	operate only on the local shell history when history sharing is
	in effect.  Also avoid invoking the editor on empty results.

2015-05-30  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Han Pingtian: 35324: Functions/Zftp/zfget_match: better zfget
	completion with paths.

	* Han Pingtian: 35311: Doc/Zsh/zftpsys.yo: typo in zfuput
	behaviour.

2015-05-30  Barton E. Schaefer  <schaefer@zsh.org>

	* Oliver Kiddle: 35310 (plus undo 35268 (git 899613f)):
	Completion/Base/Utility/_store_cache: fix quoting of cached arrays

2015-05-29  Peter Stephenson  <p.stephenson@samsung.com>

	* 35326: Src/subst.c, Test/D04parameter.ztst: $#- was misparsed
	as ${#-}.

	* users/20237: Src/Modules/parameter.c: $functions[foo]
	shouldn't be unmetafied when passed as parameter body.

2015-05-28  Daniel Hahler  <zsh@thequod.de>

	* 35098: Completion/Unix/Command/_git: provide --amend also with
	"message" group.

2015-05-28  Oliver Kiddle  <opk@zsh.org>

	* 35315: Completion/Unix/Command/_git, Completion/X/Command/_matlab;
	replace inappropriate uses of _path_commands

2015-05-28  Peter Stephenson  <p.stephenson@samsung.com>

	* 35318: Doc/Zsh/builtins.yo, Doc/Zsh/options.yo, Src/builtin.c,
	Src/exec.c: POSIX_BUILTINS compatibility for OPTIND processing
	in getopts.

2015-05-27  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 35306: Src/parse.c, Test/C02cond.ztst: "test -z \("
	failed owing to overeager parsing.

	* unposted: Config/version.mk: 5.0.7-dev-4.

2015-05-27  Daniel Hahler  <zsh@thequod.de>

	* 35285: Functions/Chpwd/_cdr: fix zstyle lookup for
	recent-dirs-insert.

	* 35286: Completion/Unix/Command/_baz, Completion/Unix/Command/_tla:
	fix zstyle lookups with _baz and _tla.

	* 35293: Completion/Unix/Command/_php: fix zstyle lookup with
	_php: use trailing colon.

2015-05-27  Peter Stephenson  <p.stephenson@samsung.com>

	* Han Pingtian: 35299: Functions/Zftp/zfdir: improve effect of
	zfdir -r.

2015-05-26  Jun-ichi Takimoto <takimoto-j@kba.biglobe.ne.jp>

	* 35289: Doc/Zsh/builtions.yo: fix typos in the description
	of emulate builtin (based on 34981 by Han Pingtian)

2015-05-26  Peter Stephenson  <p.stephenson@samsung.com>

	* see 35268: Completion/Base/Utility/_store_cache: revert 34476
	(ae7dcab) as it seems to be having effects beyond the intended
	optimisation of completion caching.  To be investigated further
	after the release.

	* Han Pingtian: 35295: Functions/Zftp/zfcd_match: be more
	inventive zftp directory listing.

	* Eric Cook: 35292: Completion/Redhat/Command/_yum: complete
	installation of local files.

2015-05-23  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* 35127#1: Src/Zle/compcore.c Src/Zle/computil.c: Fix
	_describe/compdescribe problem with unsorted groups

2015-05-22  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 35266: Src/exec.c: test from users/20203 needed changing
	because of jumps in locallevel.

2015-05-23  Jun-ichi Takimoto <takimoto-j@kba.biglobe.ne.jp>

	* 35255: configure.sc, Doc/Makefile.in: if available, use
	texi2any instead of texi2html

2015-05-22  Daniel Hahler  <zsh@thequod.de>

	* 35261: Completion/Unix/Command/_git: make $ret local in
	__git_recent_commits.

2015-05-21  Peter Stephenson  <p.stephenson@samsung.com>

	* 35250: Doc/Zsh/grammar.yo: fix case documentation (SH_GLOB).

	* 35248: Src/lex.c, Src/parse.c, Test/A01grammar.ztst:
	treat fully parenthesised zsh patterns as complete
	case patterns again.

2015-05-20  Peter Stephenson  <p.stephenson@samsung.com>

	* Ismail: 35232: Completion/Unix/Type/_urls: matching
	parentheses.

2015-05-20  Barton E. Schaefer  <schaefer@zsh.org>

	* 35231: Src/params.c: make mkevnstr() safe for NULL value

2015-05-19  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* 35224: Completion/Unix/Command/_git: completion: git: Add
	fast-export --signed-tags=warn-strip

2015-05-19  Daniel Hahler  <zsh@thequod.de>

	* 35164: Completion/Unix/Command/_git: fix $pipestatus with
	__git_commit_objects/__git_recent_commits.

	* 35204: Completion/Unix/Command/_git: fix quoting in previous commit
	commit (35164).

	* 35209: Completion/Unix/Command/_git: remove -2 _describe in
	__git_recent_commits.  This fixes duplicate entries, because
	__git_recent_commits gets called twice for _git-checkout
	(for __git_revisions and __git_tree_ishs).

	* 35211: Completion/Unix/Command/_git: __git_commit_objects:
	do not use _guard, but only a pattern for skipping.

	* 35217: Completion/Unix/Command/_git: _git-send-email:
	provide completions from `__git_commit_objects_prefer_recent`.

2015-05-19  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* users/20222: Completion/Unix/Command/_git: users/20222:
	completion: git: Add matchspec for heads

2015-05-18  Peter Stephenson  <p.stephenson@samsung.com>

	* 35193: Doc/Zsh/builtins.yo, Src/builtin.c, Src/hashtable.h,
	Test/A02alias.ztst: add "unalias -a".

	* 35187: Completion/Unix/Command/_vim: fix unbalanced parentheses.

	* 35184: Src/parse.c, Test/A01grammar.ztst: fix pattern parsing
	after "|" in 35168.

	* 35168: Completion/Unix/Command/_ant,
	Completion/Unix/Command/_cp, Completion/Unix/Command/_locate,
	Completion/Unix/Command/_make, Completion/Unix/Command/_tar,
	Completion/Unix/Type/_path_commands,
	Completion/X/Command/_xrandr, Config/version.mk, Src/lex.c,
	Src/loop.c, Src/parse.c, Src/text.c, Test/A01grammar.ztst:
	Fix parsing of case patterns so "|" is extracted by looking
	for words; quote completion functions where needed in
	consequence; add test; updated version number to 5.0.7-dev-3
	because of wordcode incompatibility.

2015-05-18  Daniel Hahler  <git@thequod.de>

	* 35126: Completion/Unix/Command/_git: __git_recent_commits:
	add "return $ret" to make it useful when being called in a pipeline.

	* 35100: Completion/Unix/Command/_git: __git_recent_commits:
	massage ' ->*' from heads.
	Handle " -> master, origin/master" in decorated git-log output, and
	add it as separate entries.

	* 35101: Completion/Unix/Command/_git: add
	__git_commit_objects_prefer_recent.  This is used with __git_commits
	then, and is meant to only call __git_recent_commits, if there are
	matches.

	* 35104: Completion/Unix/Command/_git: __git_commit_objects: query
	1000 commits.  Also, `--all` and `--reflog` is used to get all commits.

	* 35103: Completion/Unix/Command/_git: add %cr to commit objects (all
	and recent).

	* 35106: completion: git: unique name for __git_recent_commits.

	* Daniel Shahaf: 35105: Completion/Unix/Command/_git: add
	distance_from_head to __git_recent_commits.

2015-05-16  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* 35161: Completion/Unix/Command/_git: completion: git: Fix
	typo in 35061

2015-05-15  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	*  35155: Src/lex.c: cmdpop() could sometimes get called too
	often on error.

2015-05-15  Oliver Kiddle  <opk@zsh.org>

	* users/20219: Completion/Unix/Command/_git: fix for git options

2015-05-15  Peter Stephenson  <p.stephenson@samsung.com>

	* 35154: NEWS: news on arithmetic evaluation changes.

	* 35153: Src/subst.c, Test/C01arith.ztst: nested math substitution.

	* 35151: Src/subst.c: improved check for both b and q flags.

	* 35131: Src/pattern.c: "[]" in a pattern is treated as an empty
	character set (matching nothing) if there are no more active "]"
	is in the pattern.

2015-05-14  Oliver Kiddle  <opk@zsh.org>

	* 35139: Completion/Zsh/Context/_brace_parameter: add (b) flag

	* Øystein Walle: 34841 (tweaked): Src/builtin.c:
	allow grouping of thousands in printf format string

	* unposted: Completion/BSD/Type/.distfiles: include new dir

	* Daniel Hahler: 35062: Completion/Unix/Command/_git:
	__git_setup_revision_options includes __git_setup_diff_options

	* Daniel Hahler: 35061: Completion/Unix/Command/_git:
	add __git_setup_diff_stage_options and use it with
	_git-diff-files and _git-diff explicitly

	* Daniel Hahler: 35016: Completion/Unix/Command/_git:
	introduce new pretty formats %g[sdD] for reflog information

2015-05-14  Peter Stephenson  <p.stephenson@samsung.com>

	* 35110: Src/builtin.c, Doc/Zsh/params.yo: don't
	implicitly initialize restricted integers to zero.

2015-05-13  Oliver Kiddle  <opk@zsh.org>

	* 35092: Src/Zle/zle_params.c: fix for numeric arguments
	from vi operator pending mode

	* 35093: NEWS, Functions/Zle/select-bracketed,
	Functions/Zle/select-quoted, Functions/Zle/surround:
	new zle widgets for Vim-style text objects

2015-05-13  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 35114: Src/Modules/zutil.c: zformat -a multibyte char widths.

	* Christian Hesse: 35107: Completion/Unix/Command/_ip: new ip
	options.

2015-05-13  Peter Stephenson  <p.stephenson@samsung.com>

	* users/20203: Src/builtin., Src/exec.c, Test/A01grammar.ztst:
	nested function in always traps after exit didn't work.

2015-05-12  Jun-ichi Takimoto <takimoto-j@kba.biglobe.ne.jp>

	* 35086: Doc/Zsh/expn.yo: reapply 35067 (with 35071) which
	has been mistakenly reverted by 35075

2015-05-12  Daniel Hahler  <git@thequod.de>

	* 35060 + 35072: Completion/Unix/Command/_git: completion: git: split
	__git_heads into local and remote

2015-05-12  Jun-ichi Takimoto <takimoto-j@kba.biglobe.ne.jp>

	* 35075: Doc/Zsh/builtins.yo, Doc/Zsh/calsys.yo,
	Doc/Zsh/compctl.yo, Doc/Zsh/compsys.yo, Doc/Zsh/compwid.yo,
	Doc/Zsh/contrib.yo, Doc/Zsh/expn.yo, Doc/Zsh/mod_clone.yo,
	Doc/Zsh/mod_complist.yo, Doc/Zsh/mod_curses.yo,
	Doc/Zsh/mod_parameter.yo, Doc/Zsh/mod_pcre.yo,
	Doc/Zsh/mod_sched.yo, Doc/Zsh/mod_stat.yo, Doc/Zsh/mod_system.yo,
	Doc/Zsh/mod_zftp.yo, Doc/Zsh/mod_zpty.yo, Doc/Zsh/mod_zselect.yo,
	Doc/Zsh/mod_zutil.yo, Doc/Zsh/options.yo, Doc/Zsh/params.yo,
	Doc/Zsh/tcpsys.yo, Doc/Zsh/zftpsys.yo, Doc/Zsh/zle.yo: improve
	manual format

	* unposted: ChangeLog: fixed entry for 35034 (2015-05-06)

2015-05-11  Oliver Kiddle  <opk@zsh.org>

	* 35049 (tweaked to make jname default): Completion/BSD/Type/_jails,
	Completion/Unix/Command/_ps, Completion/Unix/Command/_pgrep:
	allow jail completion to include jid 0 for the host and to complete
	jails by any parameter

2015-05-11  Peter Stephenson  <p.stephenson@samsung.com>

	* 35078: Src/zsh.h, Test/D04parameter.ztst: also quote backslash
	with (b) flag.

2015-05-10  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 35067 (doc tweak from Daniel, 35071): Doc/Zsh/expn.yo,
	Src/subst.c, Src/utils.c, Src/zsh.h, Src/ztype.h,
	Test/D04parameter.ztst: add ${(b)foo} for backslash
	quoting of patterns.

2015-05-10  Mikael Magnusson  <mikachu@gmail.com>

	* 35065: Src/zsh.h: Don't treat NUL as a combining character

2015-05-09  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* 35066: Completion/Unix/Command/_python
	Completion/Unix/Command/_subversion: Minor completion fix for
	pasted arguments

2015-05-09  Jun-ichi Takimoto <takimoto-j@kba.biglobe.ne.jp>

	* 35064: Src/pattern.c, Src/utils.c, Src/ztype.h: rename
	ISPRINT to ZISPRINT to avoid name conflict

2015-05-08  Peter Stephenson  <p.stephenson@samsung.com>

	* 35059: Doc/Zsh/builtins.yo, Src/params.c,
	Test/B02typeset.ztst: fix, document and test "readonly -p"
	output for arrays and specials.

	* 35056: Test/A02alias.ztst: turn off PROMPT_SP for interactive
	test.

2015-05-08  Jun-ichi Takimoto <takimoto-j@kba.biglobe.ne.jp>

	* 35057: Etc/FAQ.yo: make URL clickable (should have been
	included in 34850)

2015-05-07  Peter Stephenson  <p.stephenson@samsung.com>

	* 35054: Src/params.c, Test/B02typeset.ztst: "readonly -p"
	displays unset readonly variables with POSIXBUILTINS.

	* Eric Cook: 35052: Completion/BSD/Command/_bsdconfig,
	Completion/BSD/Command/_bsdinstall,
	Completion/BSD/Command/_jexec, Completion/BSD/Command/_jls:
	new completions.

2015-05-06  Barton E. Schaefer  <schaefer@zsh.org>

	* 35046: Src/lex.c: properly unwind cmdstack when erroring out of
	lexing a parameter expansion in braces

2015-05-06  Peter Stephenson  <p.stephenson@samsung.com>

	* c.f. 35041 (Axel Beckert): Doc/Zsh/zle.yo: typo.

2015-05-06  Jun-ichi Takimoto <takimoto-j@kba.biglobe.ne.jp>

	* 35034: Doc/Zsh/arith.yo, Doc/Zsh/builtins.yo, Doc/Zsh/cond.yo,
	Doc/Zsh/expn.yo, Doc/Zsh/grammar.yo, Doc/Zsh/options.yo,
	Doc/Zsh/params.yo, Doc/Zsh/redirect.yo, Doc/Zsh/zle.yo: improve
	format in the manual (up to Chapter18)

2015-05-05  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Config/version.mk, Etc/FAQ.yo: update for
	5.0.7-dev-2, including updated FAQ source for newer YODL.

	* 35032: Src/jobs.c: update job status with process status if
	process detected as continued.

2015-05-05  Peter Stephenson  <p.stephenson@samsung.com>

	* unposted: fix descriptions in previous commit (cosmetic).

	* 35033: Completion/Zsh/Function/_zcalc: trivial completion.

2015-05-04  Oliver Kiddle  <opk@zsh.org>

	* 35029: Src/Zle/zle_word.c, Test/X02zlevi.ztst:
	improvements to newline handling for vi-mode word movement

2015-05-04  Mikael Magnusson  <mikachu@gmail.com>

	* 35021: Src/builtin.c: Fix two bugs in typeset_setbase

2015-05-03  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 35018 (corrected): NEWS: news.

2015-05-03  Oliver Kiddle  <opk@zsh.org>

	35011: Completion/BSD/Type/_jails, Completion/Solaris/Command/_beadm,
	Completion/Solaris/Type/_be_name, Completion/Solaris/Type/_zones,
	Completion/Unix/Command/_chmod, Completion/Unix/Command/_chown,
	Completion/Unix/Command/_cmp, Completion/Unix/Command/_comm,
	Completion/Unix/Command/_cp, Completion/Unix/Command/_cut,
	Completion/Unix/Command/_date, Completion/Unix/Command/_du,
	Completion/Unix/Command/_elfdump, Completion/Unix/Command/_find,
	Completion/Unix/Command/_fuser, Completion/Unix/Command/_gcore,
	Completion/Unix/Command/_grep, Completion/Unix/Command/_iconv,
	Completion/Unix/Command/_id, Completion/Unix/Command/_join,
	Completion/Unix/Command/_last, Completion/Unix/Command/_ldd,
	Completion/Unix/Command/_ls, Completion/Unix/Command/_md5sum,
	Completion/Unix/Command/_mkdir, Completion/Unix/Command/_nl,
	Completion/Unix/Command/_nm, Completion/Unix/Command/_od,
	Completion/Unix/Command/_patch, Completion/Unix/Command/_ping,
	Completion/Unix/Command/_ps, Completion/Unix/Command/_readelf,
	Completion/Unix/Command/_rm, Completion/Unix/Command/_sed,
	Completion/Unix/Command/_sort, Completion/Unix/Command/_uname,
	Completion/Unix/Command/_uniq, Completion/Unix/Command/_wc,
	Completion/Unix/Command/_xargs, Completion/Unix/Type/_diff_options,
	Completion/Unix/Type/_file_systems: update completions for some
	common Unix commands, in particular improving FreeBSD support

2015-05-01  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 35009: README, Etc/FAQ.yo: updates for 5.0.8.

2015-05-01  Jun-ichi Takimoto <takimoto-j@kba.biglobe.ne.jp>

	* 35008: Doc/Zsh/builtins.yo: clarify description of 'exec' and
	'return'

2015-05-01  Peter Stephenson  <p.stephenson@samsung.com>

	* 35007: Doc/Zsh/zle.yo: note about scope of ZLE parameters.

2015-04-29  Peter Stephenson  <p.stephenson@samsung.com>

	* 34992: Doc/Zsh/builtins.yo, Src/builtin.c, Src/params.c,
	Test/B02typeset.ztst: With POSXIBUILTINS, parameters can be
	marked readonly if unset and in any case can't subsequently be
	marked not readonly.

2015-04-28  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 34989: Src/exec.c: AUTOCD needs to pass -- to cd to avoid
	directory being treated as option.

2015-04-28  Peter Stephenson  <p.stephenson@samsung.com>

	* Jared Ahern: 34980: Completion/Unix/Command/_make: expanding
	make variables was somewhat broken.

	* Jared Ahern: 34980: Completion/Unix/Command/_make: match
	additional forms of assignment in makefiles.

	* 34979: Src/exec.c: preserve job text in shell job fix code.

	* 34977: Src/zsh.mdd: more reliable test for whether
	preprocessor is GNU.

2015-04-25  Barton E. Schaefer  <schaefer@zsh.org>

	* 34966: Src/hashtable.c: "whence -v" for a function reports
	whether the function is autoloaded or its source file when known

	* 34965: Src/glob.c: consistent use of zalloc/zrealloc/zfree

	* 34961: Completion/Unix/Command/_mkdir: avoid _message because
	it aborts completer list too early

	* 34961: Completion/Base/Completer/_history: unquote history words
	when command line has a quote

	* 34961: Completion/compaudit: properly handle the case of finding
	no files when searching $fpath and $_compdir

	* 34961: Doc/Zsh/compsys.yo: minor wording clarification

	* 34961: Src/Modules/datetime.c: $TZ is implicitly local in
	builtin strftime (originally workers/34602 from workers/34596)

	* 34961: Src/hist.c: clean up decl's of quote() and quotebreak()

	* 34961: Doc/Zsh/mod_system.yo: sysparams[pid] and sysparams[ppid]
	added to variables index

	* 34961: Src/compat.c, Src/init.c: replace a couple of free() with
	zfree() for consistency.

	* 34961: Completion/Base/Completer/_expand: add backslash to alias
	expansion matching (related to workers/32186)

	* 34961: Test/D02glob.ztst: test for breadth-first glob with (Y1)
	qualifier (originally workers/32726)

2015-04-24  Peter Stephenson  <p.stephenson@samsung.com>

	* 34955: Src/exec.c: list_pipe_job needs saving and restoring
	with some other similar variables in execlist() in order
	to stop source() messing up job control.

2015-04-24  Mikael Magnusson  <mikachu@gmail.com>

	* Oliver: 34940: Completion/Zsh/Command/_fc: fix typo breaking
	completion for history

2015-04-17  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 34921: Src/parse.c: handle error in recursive par_event().

2015-04-17  Peter Stephenson  <p.stephenson@samsung.com>

	* 34920: Etc/zsh-development-guide: info on git pull.

2015-04-17  Daniel Hahler  <git@thequod.de>

	* 34899: Completion/Unix/Command/_vim: completion: _vim: add
	nvim to #compdef

2015-04-17  Peter Stephenson  <p.stephenson@samsung.com>

	* 34919: Src/Zle/zle_hist.c, Src/Zle/zle_misc.c: similar cases
	with send-break and push-input.

	* 34905: Src/Zle/zle_keymap.c, Src/lex.c, Src/parse.c: suppress
	parse errors resulting from keyboard interruption.

2015-04-16  Mikael Magnusson  <mikachu@gmail.com>

	* 34902: Doc/Zsh/compsys.yo, Doc/Zsh/contrib.yo, Doc/Zsh/zle.yo:
	explain the numeric argument and be consistent about what we
	call it.

2015-04-15  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 34901: Test/A04redirect.ztst: Test for the foregoing.

	* 34900: Src/exec.c: assignment before an "exec" with
	a redirection, with and without POSIXBUILTINS.

2015-04-15  Peter Stephenson  <p.stephenson@samsung.com>

	* unposted: Src/math.c: rewrite last commit to look more
	like other uses of Nularg.

	* 34892 (slightly tweaked): Src/math.c, Test/C01arith.ztst: fix
	math evaluation with empty expression resulting from substitution.

	* 34887: Src/exec, Test/E01options.ztst: assignments before
	"command special-builtin/func" in POSIX_BUILTINS mode behave as
	normal command. Tidy up case handling in code and add test.

2015-04-13  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* users/20159: Completion/Zsh/Command/_zstyle: completion: zstyle:
	Add 'show-ambiguity'

	* 34886: Completion/Unix/Command/_git: completion: git: Complete
	rebase --exec argument

	* 34885: Completion/Unix/Command/_git: completion: git: Sort
	"commit object" completions most recent first

	* 34885: Completion/Unix/Command/_git: completion: git: Fix
	another instance of the 34671 bug fixed in 34814

2015-04-13  Peter Stephenson  <p.stephenson@samsung.com>

	* Han Pingtian: 34880: Doc/Zsh/options.yo: POSIX_TRAPS doc.

	* Han Pingtian: 34875: Doc/Zsh/options.yo: CSH_JUNKIE_HISTORY doc.

	* Han Pingtian: users/20078: Doc/Zsh/options.yo: HIST_BEEP doc.

2015-04-10  Clint Adams  <clint@zsh.org>

	* 34874: Completion/Unix/Command/_cabal: completion for cabal
	command from cabal-install.

2015-04-10  Daniel Hahler  <git@thequod.de>

	* 34748: Completion/Unix/Command/_git: completion: git: update
	list of builtintools

2015-04-07  Jun-ichi Takimoto <takimoto-j@kba.biglobe.ne.jp>

	* 34850: Doc/zman.yo, Doc/ztexi.yo, Doc/META-FAQ.yo,
	Doc/Zsh/contrib.yo, Doc/Zsh/ftp_sites.yo, Doc/Zsh/manual.yo,
	Doc/Zsh/metafaq.yo, Doc/Zsh/roadmap.yo: make URLs in html/pdf
	docs clickable

2015-04-06  Barton E. Schaefer  <schaefer@zsh.org>

	* 34851: Src/builtin.c: fix thinko from 34093 that short-circuited
	some "whence -m" searches

2015-04-03  Barton E. Schaefer  <schaefer@zsh.org>

	* 34837: Src/glob.c: avoid loss of original file path when applying
	colon-modifiers in glob qualifiers, that path is still needed for
	later stat() when sorting.

2015-04-03  Jun-ichi Takimoto <takimoto-j@kba.biglobe.ne.jp>

	* 34840: Doc/Zsh/prompt.yo: minor format fixes

2015-04-02  Jun-ichi Takimoto <takimoto-j@kba.biglobe.ne.jp>

	* 34836: Doc/Zsh/prompt.yo: fix description of '%-0<<'

2015-04-01  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* 34814: Completion/Unix/Command/_git: completion: git: Fix
	bug introduced by 34671 [based on patch by Daniel Hahler]

2015-03-31  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* users/20058: Completion/Unix/Command/_ip,
	Completion/Unix/Type/_find_net_interfaces,
	Completion/Unix/Type/_net_interfaces: improve matching of
	devices already on command line in ip completion.

2015-03-31  Peter Stephenson  <p.stephenson@samsung.com>

	* Han Pingtian: 34822: Doc/Zsh/options.yo: correction to
	GLOB_SUBST doc.

2015-03-29  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 34817: Src/hist.c, Src/lex.c: catch some errors earlier when
	handling history to avoid knock-on errors and doing too much
	processing.

2015-03-29  Theo Buehler  <theo@math.ethz.ch>

	* 34792: Src/Modules/langinfo.c: langinfo: Fix pointer type

2015-03-29  Daniel Hahler  <git@thequod.de>

	* 34762: Completion/Unix/Command/_git: completion: git: add
	short option for '--dir-diff' (_git-difftool)

2015-03-28  Barton E. Schaefer  <schaefer@zsh.org>

	* 34804: Src/lex.c: refine 34734 POSIX_ALIAS change to preserve
	old behavior of [[ ]] conditionals

	* 34781: Src/lex.c, Test/A02alias.ztst: add implicit space after
	alias expansion of tokens that form words without spacing; fixes
	crash when using completion immediately following such an alias

2015-03-27  Barton E. Schaefer  <schaefer@zsh.org>

	* 34788: Src/lex.c: refine errflag handling in cmd_or_math()

2015-03-27  Peter Stephenson  <p.stephenson@samsung.com>

	* Han Pingtian: 34785: Doc/Zsh/options.yo: fix typo in SHINSTDIN.

	* 34787: Test/W01history.ztst: new tests.

2015-03-26  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 34784: Src/input.c, Src/zsh.h: fix old bug with history
	selection.

2015-03-25  Barton E. Schaefer  <schaefer@zsh.org>

	* 34779: Test/A02alias.ztst: tests for 34776

	* unposted: Test/W01history.ztst: change an F: to a comment

2015-03-25  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Han Pingtian: 34769: incorrect description of process time
	calculation.

2015-03-25  Peter Stephenson  <p.stephenson@samsung.com>

	* 34776: Src/hist.c, Src/zsh.h: suppressing alias expansions
	from history now uses same mechanism as everyone else.

2015-03-25  Barton E. Schaefer  <schaefer@zsh.org>

	* 34774: Test/W01history.ztst, Test/comptest: fix %prep and use
	read from a no-op pipe to force wait for the timeout

2015-03-23  Barton E. Schaefer  <schaefer@zsh.org>

	* 34772: Test/W01history.ztst, Test/comptest: add new test
	suite file for history; fix "read" usage in comptest for case
	where there is no TTY

2015-03-22  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 34759: Src/hist.c, Src/lex.c: safer implementation.

	* 34758: Src/hist.c, Src/lex.c: more problems with history
	interaction with command substitution: rewind over input history
	text when necessary.

2015-03-21  Barton E. Schaefer  <schaefer@zsh.org>

	* users/20034: Completion/Base/Core/_main_complete: adjust
	PREFIX and SUFFIX for unambiguous_cursor on second completion
	attempt with GLOB_COMPLETE

2015-03-20  Peter Stephenson  <p.stephenson@samsung.com>

	* 34753 / 34754: Test/C02cond.ztst: work around lack
	of separate file times with NFS.

	* 34752: Src/input.c: history expansion in command substitution
	*still* didn't work although the command put back into the
	history was correct.

2015-03-19  Peter Stephenson  <p.stephenson@samsung.com>

	* 34742: Src/hist.c: history expansion in command substitution
	didn't work.  Discriminate the case of an alias expansion
	more carefully.

2015-03-19  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* 34739: Completion/Unix/Command/_git: git completion: Fix
	regression in ce80a92 (workers/34638)

2015-03-18  Barton E. Schaefer  <schaefer@zsh.org>

	* 34734: Doc/Zsh/grammar.yo, Src/lex.c, Test/A02alias.ztst:
	restrict token aliasing (34641) to global aliases; tighten
	up POSIX_ALIASES to better match spec; update Aliasing doc
	to cover this and clarify older behavior

2015-03-18  Peter Stephenson  <p.stephenson@samsung.com>

	* 34732: configure.ac: turn off fixed site function directory if
	site function directory explicitly disabled.

2015-03-17  Peter Stephenson  <p.stephenson@samsung.com>

	* unposted: NEWS: rewrite the foregoing.

2015-03-16  Peter Stephenson  <p.stephenson@samsung.com>

	* 34725: NEWS: note thhat common site function directory
	may be overridden by configuration.

	* 34721: Doc/Zsh/calsys.yo, Functions/Calendar/after,
	Functions/Calendar/before: new glob qualifier functions.

2015-03-16  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* 34671 plus tweaks: Completion/Base/Utility/_describe
	Completion/Unix/Command/_git Doc/Zsh/compsys.yo: Add -1 -2 -J -V
	-x to _describe, use them to sort 'git --fixup' hash completions

	* 34671: Completion/Unix/Command/_git: git completion: only
	offer recent commits' tags/heads for --fixup

2015-03-15  Barton E. Schaefer  <schaefer@zsh.org>

	* 34712: Doc/Zsh/grammar.yo: clarify words that may be aliased

2015-03-15  Mikael Magnusson  <mikachu@gmail.com>

	* unposted: Completion/Zsh/Command/_zattr: Fix completion of
	attributes for files with pattern characters.

2015-03-10  Peter Stephenson  <p.stephenson@samsung.com>

	* users/19985: Doc/Zsh/params.yo: improve doc of substring
	subscripting further.

2015-03-09  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* 34673: Functions/VCS_Info/Backends/VCS_INFO_get_data_git:
	vcs_info git: Fix error message when rebase hasn't started

	* 34693: Completion/Unix/Command/_sudo: sudo completion: Don't
	false positive 'sudo -e' detection

	* 34693: Completion/Linux/Command/_strace: _strace: Fix variable
	leakage of $sys_calls

2015-03-07  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* Daniel Hahler: 34638 with tweaks: Completion/Unix/Command/_git:
	git completion: complete commit hashes and --fixup

2015-03-05  Jun-ichi Takimoto <takimoto-j@kba.biglobe.ne.jp>

	* 34643: Doc/Zsh/builtins.yo, Doc/Zsh/zle.yo: clarify which
	escape sequences are recognized by print and bindkey builtins.

2015-03-06  Peter Stephenson  <p.stephenson@samsung.com>

	* 34653: Doc/Zsh/zle.yo, Src/Zle/zle_main.c: move aborted vared
	lines to ZLE_VARED_ABORTED.

	* 34657: Doc/Zsh/params.yo: document the effect of substring
	subscripting better.

2015-03-05  Peter Stephenson  <p.stephenson@samsung.com>

	* 34654: Completion/Redhat/Command/_rpm: complete absolute file
	names after -q --whatprovides.

	* 34651: Src/lex.c: avoid core dump if no lexical token.

	* Daniel Shahaf: 34647: Completion/Zsh/Function/_add-zsh-hook:
	new completion.

2015-03-05  Jun-ichi Takimoto <takimoto-j@kba.biglobe.ne.jp>

	* 34636: Src/compat.c, Src/pattern.c, Src/utils.c, Src/ztype.c,
	configure.ac: replace broken isprint() on Mac OS X.

2015-03-04  Peter Stephenson  <p.stephenson@samsung.com>

	* 34641: Src/lex.c, Test/A02alias.ztst: make it possible to
	alias tokens.

	* Daniel Shahaf: 34640: Doc/Zsh/compsys.yo: clarify
	documentation for _guard function.

2015-03-03  Peter Stephenson  <p.stephenson@samsung.com>

	* Matthew Martin: 34637: Completion/BSD/Command/_mixerctl:
	new completion.

2015-02-28  Barton E. Schaefer  <schaefer@zsh.org>

	* users/19934: Doc/Zsh/params.yo: document %D{...} for WATCHFMT

2015-02-27  Barton E. Schaefer  <schaefer@zsh.org>

	* 34634: Src/glob.c: avoid infinite recursion on (/)# extendedglob

2015-02-27  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* 34588: Completion/Unix/Command/_user_admin: Complete
	'usermod -a'

2015-02-23  Peter Stephenson  <p.stephenson@samsung.com>

	* 34623: Src/hist.c: free history more often in previous case.

2015-02-23  Mikael Magnusson  <mikachu@gmail.com>

	* 34615 + 34619: Src/hist.c: Remeta one frame earlier

2015-02-22  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 34606: Src/subst.c, Test/C01arith.ztst: fix up arithmetic
	nested in parameter substitution.

	* 34604: Src/hist.c: Work around problem with changes in Meta
	affecting history file when read in.

2015-02-21  Barton E. Schaefer  <schaefer@zsh.org>

	* 34597: Doc/Zsh/mod_datetime.yo: Revise strftime description to
	correctly explain timezone handling and note signed int rollover

2015-02-20  Barton E. Schaefer  <schaefer@zsh.org>

	* 34590: Src/exec.c, Src/text.c: queue_signals() around more
	scopes that manipulate global state

2015-02-20  Peter Stephenson  <p.stephenson@samsung.com>

	* 34587: Src/utils.c, Test/D07multibyte.ztst: ensure multibyte
	characters don't overflow into tokens and add test.

2015-02-19  Barton E. Schaefer  <schaefer@zsh.org>

	* 34568: Src/Module.c: use META_HEAPDUP when passing dlerror()
	string to metafy()

2015-02-19  Peter Stephenson  <p.stephenson@samsung.com>

	* unposted: Config/version.mk: Mikael says it's 2015,
	apparently.

	* 34573: Src/subst.c: safer handling of failure to perform
	command substitution.

	* 34570: Config/version.mk, Src/lex.c, Src/subst.c, Src/zsh.h,
	Test/C01arith.ztst: mark arithmetic substitutions with tokens
	so the substitution code knows what to do.

2015-02-17  Peter Stephenson  <p.stephenson@samsung.com>

	* 34563: Src/input.c: Fix up memory allocation in 34560.

2015-02-16  Peter Stephenson  <p.stephenson@samsung.com>

	* 34560: Src/input. Src/lex.c, Src/zsh.h, Test/C01arith.ztst:
	case of $(( that turned into a $(...) and a (...) with
	multiple lines read before it found out.

	* 34558: Doc/Zsh/func.yo: preexec doc erroneously claimed $1
	was empty if line removed from history.

2015-02-15  Barton E. Schaefer  <schaefer@zsh.org>

	* 34551: Src/builtin.c: Avoid adding an extra "/" to the
	target path in cd_try_chdir() when the current directory is "/"

2015-02-14  Barton E. Schaefer  <schaefer@zsh.org>

	* 34543: Src/input.c, Src/lex.c: Fix crash on garbage bytes
	inside $(...)

2015-02-14  Mikael Magnusson  <mikachu@gmail.com>

	* unposted: Doc/Zsh/prompt.yo: Fix typo from 28487.

2015-02-13  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 34546: Src/exec.c, Test/D04parameter.ztst: fix another
	oddity with $_ and anonymous functions and add tests.

2015-02-13  Peter Stephenson  <p.stephenson@samsung.com>

	* 34530: Src/exec.c, Test/E01options.ztst: revised fix
	for PRINT_EXIT_VALUE from anonymous functions.

2015-02-12  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 34519: Src/exec.c: handle $_ with arguments to anonymous
	function.

2015-02-12  Barton E. Schaefer  <schaefer@zsh.org>

	* 34514: Src/exec.c, Src/parse.c, Test/E01options.ztst:
	Back out 34485, an alternate solution needs to be worked
	out.  (Tweaked to keep the unrelated hunk of the E01 test.)

	* 34476: Completion/Base/Utility/_store_cache: change the
	assignment format to avoid potentially expensive lexical
	analysis of the array values

2015-02-11  Peter Stephenson  <p.stephenson@samsung.com>

	* users/19850: Doc/Zsh/params.yo, Src/watch.c: watch variable
	supports patterns for user, tty and host names.

2015-02-10  Mikael Magnusson  <mikachu@gmail.com>

	* 34488: Src/builtin.c: Fix use-after-free for print -zf and
	print -sf

	* 34490: Src/builtin.c: Fix leak on print -zf/-sf error

2015-02-09  Peter Stephenson  <p.stephenson@samsung.com>

	* 34485: Src/exec.c, Src/parse.c, Test/E01options.ztst:
	rationalise some more anonymous function behaviour:
	don't try to handle as "simple" case as there are too
	many hidden problems; pull out some post-execution
	functions to common cases in execcmd().

2015-02-09  Mikael Magnusson  <mikachu@gmail.com>

	* 34466: Src/utils.c: Fix double unmeta in rm verification

2015-02-08  Daniel Hahler  <git@thequod.de>

	* 34469: Completion/Unix/Command/_git: git completion: add "stash"
	from refs/stash to __git_heads

	* 34470: Completion/Unix/Command/_adb: completion: adb: add
	"sideload" command

	* 34467: Completion/Unix/Command/_git: completion: git: minor doc
	fixes

	* 34468: Completion/Unix/Command/_git: completion: git: stash:
	handle 'save' being the default

2015-02-07  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* 34464: Completion/Unix/Command/_mtr: Update mtr completion
	to mtr 0.82

2015-02-03  Jun-ichi Takimoto <takimoto-j@kba.biglobe.ne.jp>

	* 34456: _arguments: lopts should be initialized as an array

2015-02-06  Peter Stephenson  <p.stephenson@samsung.com>

	* users/19825: Doc/Zsh/manual.yo: clear statement that zsh is
	not by default POSIX compatible.

2015-02-03  Barton E. Schaefer  <schaefer@zsh.org>

	* unposted: Doc/Zsh/builtins.yo: fix formatting of "--".

2015-02-03  Jun-ichi Takimoto <takimoto-j@kba.biglobe.ne.jp>

	* 34451: Src/mem.c: use mmap() also on Mac OS X

2015-02-03  Peter Stephenson  <p.stephenson@samsung.com>

	* users/19800: Doc/Zsh/params.yo: more help on $HISTORY_IGNORE.

	* 34455: Src/Modules/db_gdbm.c: some further parameter bug fixes
	including memory leak and unsetting old parameter too late.

2015-02-02  Barton E. Schaefer  <schaefer@zsh.org>

	* 34447: Src/Modules/db_gdbm.c: fix assignment of key-value array
	to ztie'd parameter.

2015-02-02  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* 34444: Completion/Unix/Command/_git: git completion: minor
	improvements to 'commit' and 'rebase'

2015-02-01  Barton E. Schaefer  <schaefer@zsh.org>

	* 34446: Doc/Zsh/mod_db_gdbm.yo, Src/Modules/db_gdbm.c: add
	"ztie -r" and "zuntie -u", update documentation for this and
	for 34430,34439.

2015-02-01  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* 34411: Completion/Unix/Command/_hg: _hg completion: Complete
	bookmark names for -r

2015-01-30  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 34439: Src/Modules/db_gdbm.c: unset parameter that's about to
	be tied when necessary.

2015-01-30  Peter Stephenson  <p.stephenson@samsung.com>

	* 34435: Completion/Unix/Command/_sh,
	Completion/Unix/Type/_cmdstring, Completion/Zsh/Command/_emulate:
	updated emulate completion; _cmdstring factors out use of
	quoted command string.

2015-01-29  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 34430: Src/Modules/db_gdbm.c, Src/params.c: various bug fixes
	and safety additions for gdbm tied hashes.

2015-01-28  Barton E. Schaefer  <schaefer@zsh.org>

	* unposted: Doc/Zsh/builtins.yo: fix other typeset doc errors

	* 34421: Doc/Zsh/builtins.yo: clean up typeset documentation

2015-01-28  Jun-ichi Takimoto <takimoto-j@kba.biglobe.ne.jp>

	* 34415: Completion/Unix/Type/_python_modules,
	Completion/Unix/Command/_python, Completion/Unix/Command/_pydoc:
	cache list of all python modules

2015-01-28  Jun-ichi Takimoto <takimoto-j@kba.biglobe.ne.jp>

	* 34423: _ruby: fix a typo

2015-01-27  Frank Terbeck  <ft@bewatermyfriend.org>

	* 34419: Doc/Zsh/contrib.yo: vcs_info documentation: Fix wording

2015-01-27  Peter Stephenson  <p.stephenson@samsung.com>

	* Daniel Shahaf: 34412: Completion/Unix/Command/_chown: complete
	all groups if running as sudo.

2015-01-27  Mikael Magnusson  <mikachu@gmail.com>

	* 34382: Src/module.c: Handle NULL return from dlerror() more
	gracefully

	* 34387: Src/module.c: Avoid loading the main zsh binary as
	a module

2015-01-26  Barton E. Schaefer  <schaefer@zsh.org>

	* 34403: Src/utils.c: refine 34399 to avoid settyinfo() when the
	input descriptor is not a TTY

2015-01-26  Peter Stephenson  <p.stephenson@samsung.com>

	* 34402: Src/Modules/db_gdbm.c: make unsetting a tied gdbm
	variable work and hence allow tied variables in nested scope.
	Untying still doesn't uncover scope properly.

2015-01-25  Barton E. Schaefer  <schaefer@zsh.org>

	* 34399: Src/utils.c: fix polltty thinko from 34365

	* 34389: Src/hist.c: fix parsing of ">!" when read from histfile
	with HIST_LEX_WORDS in effect

2015-01-25  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 34365: configure.ac, Src/hist.c, Src/utils.c; random doubling
	backoff on history lock failure.  Add zsleep() to provide
	microsecond sleeps, via nanosleep() available else select() in
	tty_poll().

	* 34369: Daniel Shahaf: document error / warning codes.
	
	* 34383: Src/utils.c: new ztrdup() shoud be dupstring().

2015-01-25  Oliver Kiddle  <opk@zsh.org>

	* 34373, 34374: Completion/Unix/Command/_chown,
	Completion/Unix/Command/_ln, Completion/Unix/Type/_directories,
	Completion/Zsh/Command/_command, Completion/Zsh/Command/_fc,
	Completion/Zsh/Command/_typeset, Completion/Zsh/Command/_unhash,
	Completion/Zsh/Command/_which, Completion/Zsh/Command/_zle,
	Completion/Zsh/Command/_zstyle, Completion/Zsh/Context/_subscript,
	Completion/Zsh/Type/_globflags, Doc/Zsh/builtins.yo,
	Completion/Zsh/Context/_brace_parameter,
	Completion/Zsh/Type/_history_modifiers: update completion of
	builtin commands, modifiers, parameter and globbing flags

2015-01-25  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* 34381: Doc/Zsh/contrib.yo: vcs_info: Documentation update

2015-01-25  Frank Terbeck  <ft@bewatermyfriend.org>

	* unposted: ChangeLog: Forgot X-Seq: numbers with Daniel's last
	few patches

2015-01-25  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* 34366: Doc/Zsh/contrib.yo,
	Functions/VCS_Info/Backends/VCS_INFO_get_data_hg: vcs_info hg:
	Support inactive bookmarks

	* 34367: Completion/Zsh/Command/_zstyle: _zstyle vcs_info: Unbreak
	branchformat completion

	* 34368: Completion/Zsh/Command/_zstyle: _zstyle vcs_info
	completion: Add missing styles

2015-01-24  Barton E. Schaefer  <schaefer@zsh.org>

	* 34350, 34353: Doc/Makefile.in, Doc/Zsh/mod_db_gdbm.yo,
	Src/Modules/db_gdbm.c: document zsh/db/gdbm module, clean up a few
	things in the code.  Still core dumps if the tied parameter is
	forced to be a local and is not untied before end of scope.

2015-01-23  Jun-ichi Takimoto <takimoto-j@kba.biglobe.ne.jp>

	* 34335: _yum: fix bugs in _yum_all_pkgs

2015-01-22  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 34331: Src/builtin.c, Src/utils.c: don't trip over
	NULL pointer in cd in rare cases where file system goes AWOL.

2015-01-22  Barton E. Schaefer  <schaefer@zsh.org>

	* 34344: Test/V07pcre.ztst: fix 34338, builtins need loading too
	
	* 34338: Test/V07pcre.ztst: check feature availability

2015-01-22  Marc Finet  <m.dreadlock@gmail.com>

	* 34333: Functions/VCS_Info/VCS_INFO_quilt: fix unapplied
	detection in subdir

2015-01-22  Jun-ichi Takimoto <takimoto-j@kba.biglobe.ne.jp>

	* 34327: _perl_modules: fix cache identifier used in
	_cache_invalid

2015-01-20  Peter Stephenson  <p.stephenson@samsung.com>

	* 34329: Doc/Zsh/builtins.yo, Src/builtin.c: add -S option
	to which and where.

	* users/19756: Test/A04redirect.ztst: add test for case of
	closing file descriptor with no error message.

	* users/19751: Src/exec.c, Test/A04redirect.ztst: remove error
	on closing file descriptors via number but keep it for those
	controlled by variable.

2015-01-18  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 34322: Src/Zle/compctl.c, Src/Zle/compresult.c, Src/exec.c,
	Src/init.c, Src/lex.c, Src/params.c, Src/prompt.c, Src/subst.c,
	Src/utils.c, Test/D04parameter.ztst: update interface to
	parsestr()/parsestrnoerr() to ensure correct token string
	is passed back.

	* 34320: Src/hist.c, Src/lex.c: alias expansion in history of
	command substitution.

2015-01-17  Axel Beckert  <abe@deuxchevaux.org>

	* 34314: Wieland Hoffmann: Completion/Unix/Command/_git: Change
	one --validate to --no-validate

2015-01-16  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Src/hist.c: fix another dubious comment.

	* unposted: Src/hist.c: improve confusing comment in previous
	commit.

	* 34313: Src/hist.c, Src/lex.c: need to turn off history
	word markers when parsing command substitution.

2015-01-16  Peter Stephenson  <p.stephenson@samsung.com>

	* 34304: Src/lex.c: improve use of new command substitution
	parsing in completion.

2015-01-15  Peter Stephenson  <p.stephenson@samsung.com>

	* 34290 (correcting typo): README: note FORCE_FLOAT behaviour change.

	* 34280: Doc/Zsh/options.yo, Src/math.c, Test/C01arith.ztst:
	make FORCE_FLOAT option also cover variables when read for
	use in arithmetic expressions.

	* 34287 (see 34286 from Markus Trippelsdorf): Src/zsh.mdd:
	use -E argument for generating signal names if gcc is
	preprocessor.

2015-01-14  Peter Stephenson  <p.stephenson@samsung.com>

	* 34283: Test/X02zlevi.ztst: also needs zpty.

	* 34275: Test/V08zpty.ztst,  Test/Y01completion.ztst,
	Test/Y02compmatch.ztst,  Test/Y03arguments.ztst: assume zpty
	doesn't work under Cygwin.

2015-01-13  Barton E. Schaefer  <schaefer@zsh.org>

	* 34273: Doc/Zsh/compsys.yo: use a sufficient number of colons
	in example style patterns to assure fixed strings can't match
	the wrong field positions

2015-01-13  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: README: fix deliberate error in previous update.

2015-01-13  Peter Stephenson  <p.stephenson@samsung.com>

	* 34260: Eric Cook: Completion/Unix/Command/_ip: relax
	restriction on interface names.

	* 34259: Eric Cook: Completion/Unix/Command/_ip: fix variable
	declarations.

2015-01-12  Peter Stephenson  <p.stephenson@samsung.com>

	* unposted: .gitignore: add Src/zsh.exe for Cygwin.

	* 34255: README, Src/math.c, Test/C01arith.ztst: propagate type
	from variable assignment.  Also note 34230 in README.

	* 34253: Doc/Zsh/contrib.yo: warning on integer arithmetic
	for zcalc, c.f. 34194.

2015-01-11  Barton E. Schaefer  <schaefer@zsh.org>

	* 34247: Test/C01arith.ztst: regression test for 34230.

	* 34230: Src/math.c: call fmod() for modulo with floats

2015-01-11  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 34234: Src/lex.c, Src/zsh.h: use structures for normal and raw
	lexical buffer state.

	* 34233: Completion/Linux/Command/_qdbus: add _qdbus "$@" trick.

2015-01-10  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Test/C04funcdef.ztst: test for the foregoing

	* 34220: Src/input.c: new $(...) parsing didn't back up over
	alias expansions.

	* unposted: Src/context.c: update copyright.

	* 34195: Thomas Mitterfellner: Completion/Linux/Command/_qdbus:
	new completion.

2015-01-10  Barton E. Schaefer  <schaefer@zsh.org>

	* unposted (cf. 34218): Completion/Base/Widget/_complete_debug,
	Completion/compinstall, Functions/Calendar/calendar,
	Functions/Zftp/zfget_match: remove -m from zmodload calls

	* 34212, 34313: Src/builtin.c: do not change unset-ness of special
	parameters when exporting them

2015-01-09  Barton E. Schaefer  <schaefer@zsh.org>

	* 34202: Completion/Base/Widget/_complete_debug,
	Completion/compinstall, Functions/Calendar/calendar,
	Functions/Zftp/zfget_match: safe tempfile creation part 3

	* users/19721: Doc/Zsh/compsys.yo: clarify context vs. style

2015-01-09  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 34194: Doc/Zsh/arith.yo: add paragraph about integer
	promotion.

	* 34189:  Src/Zle/compcore.c, Src/Zle/compctl.c,
	Src/Zle/textobjects.c, Src/Zle/zle_tricky.c, Src/builtin.c,
	Src/context.c, Src/exec.c, Src/hist.c, Src/init.c, Src/lex.c,
	Src/parse.c, Src/signals.c, Src/zsh.h, Src/zsh.mdd:
	vain attempt to make context save and restore neater and
	control the status variables thereby managed.

2015-01-09  Peter Stephenson  <p.stephenson@samsung.com>

	* 34182: Doc/Zsh/mod_files.yo: to add zf_* builtins you can
	use zmodload -m -F.

2015-01-09  Mikael Magnusson  <mikachu@gmail.com>

	* 30568: Doc/Zsh/contrib.yo, Functions/Misc/tetriscurses: Add
	tetriscurses contrib function, port of tetris to zcurses

2015-01-08  Peter Stephenson  <p.stephenson@samsung.com>

	* 34160: Src/init.c, Src/input.c, Src/lex.c, Src/parse.c,
	Src/zsh.h, Test/D08cmdsubst.ztst: fix the problem that command
	and similar substitutions weren't properly parsed so could end
	prematurely.  Use improved resolution in context save and restore
	to allow parsing the substitution while tracking the string.

2015-01-07  Barton E. Schaefer  <schaefer@zsh.org>

	* 34154 (tweaked per 34155): Src/builtin.c: reorder bin_print() to
	avoid leaking the output descriptor when incorrect/incompatible
	options were passed

2015-01-07  Jun-ichi Takimoto <takimoto-j@kba.biglobe.ne.jp>

	* 34144: Src/Zle/zle_tricky.c, Src/Zle/complist.c: allocate
	origline by ztrdup(), not by dupstring()

2015-01-06  Barton E. Schaefer  <schaefer@zsh.org>

	* 34122: Src/module.c: allow NULL third argument as intended

2015-01-06  Mikael Magnusson  <mikachu@gmail.com>

	* 34138: Src/utils.c: wcs_nicechar: only deref widthp if it
	was given

	* 34120: Src/Zle/compctl.c, Src/jobs.c: Check contents instead
	of array

	* 34108: Src/utils.c: Don't leak ifs stuff

	* 34107: Src/hist.c: getsubsargs: free ptr1 before returning

	* 34134: Src/exec.c: anon funcs: don't leak shf and related data

	* 34112: Src/builtin.c: typeset: fix leak of oldval

	* 34106: Src/hist.c: use zhtricat instead of tricat

	* 34113: Src/builtin.c: whence: use dupstring to not leak memory

	* 34119: Src/Zle/complist.c: Fix leak of string in clnicezputs

	* 34105: Src/subst.c: remove dead code

	* 34121: Src/Zle/compresult.c: Remove unneeded NULL check

	* 34104: Src/Zle/compctl.c: Remove pointless check

	* 34115: Src/Zle/compcore.c: Fix size argument to zfree

	* 34117: Src/Zle/zle_utils.c: size_t is unsigned, use int instead

	* 34116: Src/Zle/computil.c: Check for NULL before passing
	to strlen

	* 34118: Src/hist.c: Don't crash when writing out history if
	HOST is unset

	* 34114: Src/builtin.c: emulate: Handle aborting from mixed
	-L/-c correctly

2015-01-06  Barton E. Schaefer  <schaefer@zsh.org>

	* 34103: Src/subst.c: fix ancient (workers/15872) thinko that
	doesn't seem to have mattered, but must in some obscure cases

2015-01-05  Daniel Shahaf <d.s@daniel.shahaf.name>

	* 34042: Completion/Unix/Command/_git: Respect tags for subcommand
	completion.

2015-01-05  Peter Stephenson  <p.stephenson@samsung.com>

	* Timofey Titovets: 34053: Completion/Linux/Command/_modutils:
	additional compression option for kernel modules.

2015-01-04  Barton E. Schaefer  <schaefer@zsh.org>

	* 34093: Src/builtins.c: "whence" should always return nonzero
	when it finds that nothing matches its arguments

2015-01-04  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 34092: Src/utils.c: miscount of buffer length in symlink
	resolution after ".." caused error with whence -S.

	* 34091: Src/utils.c: typo with "whence -s" expansions.

	* users/19682: Doc/Zsh/builtins.yo: document recommended use of
	whence.

2015-01-02  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* users/19671: Src/builtin.c: whence -a should still work if
	there's a full path already.

	* users/19667: Doc/Zsh/builtins.yo, Src/builtin.c, Src/utils.c:
	whence -S shows intermediate steps in symlink expansion.

	* 34077: Test/A07control.ztst: add some further tests for
	return status from "for" loops.

2014-12-29  Mikael Magnusson  <mikachu@gmail.com>

	* 33963: Completion/Unix/Command/_mount: remove work of art
	in _mount

2014-12-28  Barton E. Schaefer  <schaefer@zsh.org>

	* Daniel Shahaf: 34070: Src/Zle/zle_refresh.c: fix starting
	position for memset() from 34005.

	* 34068: Completion/Base/Widget/_complete_debug,
	Completion/Unix/Command/_cvs, Completion/compinstall,
	Functions/Calendar/calendar, Functions/Zftp/zfcd_match,
	Functions/Zftp/zfcget, Functions/Zftp/zfcput,
	Functions/Zftp/zfget_match, Functions/Zftp/zfrglob,
	Functions/Zftp/zftransfer, Functions/Zftp/zfuget,
	Functions/Zftp/zfuput: create tempfiles without forking, and
	safe temp directory creation

2014-12-27  Barton E. Schaefer  <schaefer@zsh.org>

	* 34067: Completion/Base/Widget/_complete_debug,
	Completion/compinstall, Functions/Calendar/calendar,
	Functions/Zftp/zfcd_match, Functions/Zftp/zfcget,
	Functions/Zftp/zfcput, Functions/Zftp/zffcache,
	Functions/Zftp/zfget_match, Functions/Zftp/zfrglob,
	Functions/Zftp/zftransfer, Functions/Zftp/zftype,
	Functions/Zftp/zfuget, Functions/Zftp/zfuput,
	Functions/Zle/edit-command-line: safe tempfile creation

	* unposted: Test/A05execution.ztst: regressions for 34065

	* 34065: Src/exec.c, Src/loop.c: following an "if" condition, do
	not test lastval for ERR_EXIT until a new command is run

	* Takeshi Banse: 34064: Src/exec.c, Test/A06assign.ztst: assignment
	before command replaces array with export even when KSH_ARRAYS

2014-12-21  Oliver Kiddle  <opk@zsh.org>

	* Daniel Shahaf: 33977: Completion/Zsh/Command/_bindkey:
	don't complete widgets as first argument to bindkey

2014-12-19  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 34015: Src/params.c: back off yesterday's mess and
	disallow environment variables with characters with the
	top bit set.

	* 34005: Src/Zle/zle_refresh.c: Zero uninitialised memory when
	realloc'ing region_highlights.

2014-12-18  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 34008: Src/params.c: also metafy anything arriving from the
	environment.

	* 34006: Src/params.c: unmetafy anything put into the
	environment.

	* Lokesh Mandvekar: 33999: Completion/Linux/Command/_docker:
	remove completion as the version supplied with docker is
	authoritative.

2014-12-17  Barton E. Schaefer  <schaefer@zsh.org>

	* 34002: Src/Zle/zle_keymap.c: zshcalloc() in init_keymaps()
	
	* 33992: Src/jobs.c: do not attempt attachtty() for process group
	zero (which is possible in a linux pid namespace)

2014-12-18  Jun-ichi Takimoto <takimoto-j@kba.biglobe.ne.jp>

	* 33978: Src/Zle/complist.c: update command line when accept-
	and-hold is called in interactive mode of menu select

2014-12-17  Peter Stephenson  <p.stephenson@samsung.com>

	* users/19551: Doc/builtins.yo, Doc/Zsh/roadmap.yo: better
	documentation that history file reading and writing is only
	done in interactive shells.

2014-12-16  Barton E. Schaefer  <schaefer@zsh.org>

	* Jun Kuriyama: 33984: Src/builtin.c: bin_dirs() should use
	zputs() to print metafied directory names

	* Chirantan Ekbote: 33982: Src/jobs.c: minimal support for pid
	namespaces by recognizing that GETPGRP() may return 0

2014-12-15  Barton E. Schaefer  <schaefer@zsh.org>

	* 33976: Src/subst.c: fix overlapping strcpy()

2014-12-14  Mikael Magnusson  <mikachu@gmail.com>

	* users/19530: Completion/Unix/Type/_file_systems: Handle
	commented lines in /etc/filesystems

2014-12-13  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Test/D04parameter.ztst: need -f for starting zsh
	to avoid problems from user config files.

2014-12-13  Oliver Kiddle  <opk@zsh.org>

	* 33958: Completion/Unix/Command/_sudo: update for newer options

	* 33956: Doc/Zsh/zle.yo, Src/Zle/zle_bindings.c,
	Src/Zle/zle_keymap.c: document key binding changes and remove
	^X binding

	* 33846: Src/Zle/iwidgets.list, Src/Zle/zle_bindings.c,
	Src/Zle/zle_keymap.c: additional default vi-mode key bindings

2014-12-12  Oliver Kiddle  <opk@zsh.org>

	* 33950: Doc/Zsh/zle.yo, Src/Zle/iwidgets.list, Src/Zle/zle.h,
	Src/Zle/zle_keymap.c: ignore KEYTIMEOUT for vi operators

2014-12-11  Peter Stephenson  <p.stephenson@samsung.com>

	* 33876: etc.:  Completion/Base/Core/_main_complete,
	Doc/Zsh/params.yo, Src/Modules/zpty.c,  Src/Modules/zutil.c,
	Src/Zle/compcore.c, Src/Zle/compctl.c, Src/Zle/compresult.c,
	Src/Zle/textobjects.c, Src/Zle/zle_hist.c, Src/Zle/zle_keymap.c,
	Src/Zle/zle_main.c, Src/Zle/zle_misc.c, Src/Zle/zle_tricky.c,
	Src/Zle/zle_utils.c, Src/builtin.c, Src/exec.c, Src/glob.c,
	Src/hist.c, Src/init.c, Src/input.c, Src/jobs.c, Src/lex.c,
	Src/loop.c, Src/params.c, Src/parse.c, Src/prompt.c,
	Src/signals.c, Src/subst.c, Src/utils.c, Src/zsh.h: Separate
	shell errors and user interrupt flags into different bits of
	errflag: ERRFLAG_ERROR and ERRFLAG_INT.  Various
	rationalisations to make keyboard interrupts work smoothly.
	Work done on interrupt_abort branch.

2014-12-10  Mikael Magnusson  <mikachu@gmail.com>

	* 33948: Completion/Unix/Command/_getent,
	Completion/Unix/Command/_iconv, Completion/Unix/Command/_ldd:
	Parse "Gentoo" as being GNU libc

2014-12-10  Jun-ichi Takimoto <takimoto-j@kba.biglobe.ne.jp>

	* 33940: Src/lex.c: handle backslash-meta correctly in lexer

2014-12-09  Jun-ichi Takimoto <takimoto-j@kba.biglobe.ne.jp>

	* 33932: Src/utils.c: revise boundary check in unmeta()

2014-12-08  Oliver Kiddle  <opk@zsh.org>

	* 33924: Doc/Zsh/zle.yo, Src/Zle/iwidgets.list, Src/Zle/zle.h,
	Src/Zle/zle_move.c, Src/Zle/zle_vi.c, Test/X02zlevi.ztst:
	allow vi line/characterwise mode to be forced

2014-12-08  Peter Stephenson  <p.stephenson@samsung.com>

	* 33927: Completion/Unix/Command/_nm: .elf files and
	directories.

	* 33843: Completion/Unix/Type/_files: minor optimisation for
	recursive-files.

2014-12-07  Barton E. Schaefer  <schaefer@zsh.org>

	* 33912: Completion/Unix/Command/_od: fix filename default case

	* 33901: Completion/Base/Core/_main_complete: fix warning message
	reference to funcstack (updates 33859)

	* 33894: Src/utils.c: boundary conditions in unmeta(), unmetafy()

2014-12-07  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Daniel Shahaf: 33883: Doc/Zsh/expn.yo,
	Completion/Zsh/Type/_globquals: documentation for (*) glob
	qualifier.

2014-12-07  Jun-ichi Takimoto <takimoto-j@kba.biglobe.ne.jp>

	* 33829: Test/X02zlevi.ztst, Test/comptest: unbind ESC~ asa
	a more reliable workaround

2014-12-06  Mikael Magnusson  <mikachu@gmail.com>

	* 33882: Completion/Unix/Command/_gcc: Complete CXXFLAGS as
	CFLAGS too

2014-12-05  Oliver Kiddle  <opk@zsh.org>

	* 33861: Completion/Unix/Command/_lsof:
	update lsof completion for new options

	* 33860: Src/Zle/textobjects.c, Src/Zle/zle_misc.c,
	Src/Zle/zle_move.c, Src/Zle/zle_vi.c, Test/X02zlevi.ztst:
	minor fixes to vi mode changes

	* 33845: Src/Zle/zle_hist.c: save correct cursor position with
	push-line from vi command mode

2014-12-05  Peter Stephenson  <p.stephenson@samsung.com>

	* 33866: Completion/compinit: need multifuncdef for TRAPINT
	TRAPQUIT definition.

	* 33859 with typo fix: Completion/Base/Core/_main_complete: to
	propagate signal from trap we need to use function style.

2014-12-05  Barton E. Schaefer  <schaefer@zsh.org>

	* 33854: Src/glob.c: errors end recursion through scanner(), which
	makes **/ more easily interruptible

2014-12-04  Barton E. Schaefer  <schaefer@zsh.org>

	* 33841: Doc/Zsh/params.yo: explain array append a bit better

2014-12-03  Mikael Magnusson  <mikachu@gmail.com>

	* Eric Cook: 33689: Completion/Unix/Command/_cp: make cp
	--reflink's argument optional

2014-12-01  Peter Stephenson  <p.stephenson@samsung.com>

	* Jun T: 33830 plus CVS removal: Doc/Zsh/metafaq.yo: typo in
	sourceforge URL; don't mention CVS.

2014-11-30  Oliver Kiddle  <opk@zsh.org>

	* 33823: Src/Zle/zle_misc.c, Test/X02zlevi.ztst: overwrite mode
	shouldn't replace newlines

	* 33820: configure.ac, Src/hist.c: detect support for realpath()
	with a NULL argument and fixes to the use of it

	* 33800: Src/Zle/zle_main.c: remove old workaround for ancient
	systems to consume typeahead before setting up the terminal

	* 33818: Src/Builtins/sched.c, Src/Zle/complist.c,
	Src/exec.c, Src/sort.c, Src/utils.c: fix types passed to sizeof
	detected by coverity as being wrong

2014-11-28  Barton E. Schaefer  <schaefer@zsh.org>

	* 33819: Test/A06assign.ztst: regression tests for 33816

	* 33816 (2nd part): Src/exec.c: GLOB_ASSIGN changes integer and
	floating type variables to string scalars rather than treat single
	match file names as arithmetic expressions

2014-11-28  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: avoid compiler warning about a set-but-not-used var.

2014-11-28  Wayne Davison  <wayned@users.sourceforge.net>

	* 33139: Doc/Zsh/expn.yo: add example for finding broken symlinks.

2014-11-28  Peter Stephenson  <p.stephenson@samsung.com>

	* 33815: Src/Zle/zle_word.c: fix word transposition bug where
	wrong words could be transposed.

2014-11-27  Barton E. Schaefer  <schaefer@zsh.org>

	* 33805: Doc/Zsh/params.yo: rewrite intro, tweak formatting

	* 33804: Completion/compinit: hide values of large arrays in
	typeset output by declaring with the -H attribute

2014-11-26  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Test/C01arith.ztst: test binary input using 0b.

2014-11-26  Peter Stephenson  <p.stephenson@samsung.com>

	* 33793: Src/math.c, Src/utils.c, Doc/Zsh/arith.yo: Arithmetic
	constants beginning 0b specify binary.

2014-11-25  Oliver Kiddle  <opk@zsh.org>

	* Jun T: 33769: Test/comptest: workaround for KEYTIMEOUT to
	work from test cases on Darwin and FreeBSD

	* 33770: Src/Zle/zle_main.c: avoid calling identical FIONREAD
	ioctl twice in succession

	* users/19365 (credit Death Jester and Jan Larres):
	Completion/Base/Completer/_external_pwds;
	completer for current directory of other shell processes

2014-11-25  Barton E. Schaefer  <schaefer@zsh.org>

	* 33791: Src/loop.c: fatal errors in the try-block part of an
	"always" construct cause the entire construct to have nonzero
	status, even when TRY_BLOCK_ERROR is used to suppress the error.

2014-11-24  Peter Stephenson  <p.stephenson@samsung.com>

	* Daniel Hahler: 33746: Doc/Zsh/builtins.yo: read -q refers to -t.

2014-11-24  Mikael Magnusson  <mikachu@gmail.com>

	* 33785: Src/Modules/tcp.c: Fix leaks of desthost in ztcp.

2014-11-23  Barton E. Schaefer  <schaefer@zsh.org>

	* 33775: Src/exec.c: error opening file in $(<...) is not fatal

2014-11-23  Oliver Kiddle  <opk@zsh.org>

	* 33743: Src/Modules/zpty.c, configure.ac: use posix_openpt
	if it is available

2014-11-23  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 33729: Completion/Unix/Command/_git: "git remote add" should
	complete local repositories.

	* 33740: Stephane: Doc/Zsh/expn.yo: "hideval" parameter type.

	* 33740: Stephane: Etc/FAQ.yo: Another way of avoiding MULTIO
	effects on pipes.

2014-11-22  Barton E. Schaefer  <schaefer@zsh.org>

	* 33763 (cf. Baptiste Daroussin 33747): Doc/Zsh/mod_system.yo:
	fix nested item list in generated zshmodules.1 man page.

2014-11-21  Barton E. Schaefer  <schaefer@zsh.org>

	* 33750: Src/text.c: handle function autoloads for DEBUG_BEFORE_CMD

	* unposted: Doc/Zsh/zle.yo: add menu reference to Text Objects

2014-11-21  Oliver Kiddle  <opk@zsh.org>

	* saga.xu: 33712: Completion/Debian/_apt: add --auto-remove

	* 33738: Src/Zle/zle_vi.c, Test/X02zlevi.ztst: account for a
	selection in vi-replace-chars

	* 33730: Doc/Zsh/zle.yo, Src/Zle/iwidgets.list,
	Src/Zle/textobjects.c, Src/Zle/zle.mdd, Src/Zle/zle_keymap.c,
	Test/X02zlevi.ztst: vim style text objects for selecting words

2014-11-21  Peter Stephenson  <p.stephenson@samsung.com>

	* Sebastien Alaiwan: 33728: Completion/Unix/Command/_bzr:
	complete bzr shelve.

2014-11-20  Peter Stephenson  <p.stephenson@samsung.com>

	* unposted but see 33723: Etc/FAQ.yo: typo in sed command that's
	been there about twenty years.

2014-11-19  Peter Stephenson  <p.stephenson@samsung.com>

	* users/19404: Etc/FAQ.yo: login shells are not after all
	necessarily interactive.

	* 33679: Doc/Zsh/grammar.yo: Note that alternation in case
	patterns works just like filename generation, despite
	appearances to the contrary.

2014-11-17  Oliver Kiddle  <opk@zsh.org>

	* 33704: Doc/Zsh/zle.yo, Src/Zle/zle_bindings.c,
	Src/Zle/zle_keymap.c, Src/Zle/zle_refresh.c, Src/Zle/zle_vi.c,
	Test/X02zlevi.ztst, Test/comptest: key bindings, documentation,
	tests and minor fixes for vim style visual selection changes

	* 33636: Src/Zle/iwidgets.list, Src/Zle/zle_misc.c,
	Src/Zle/zle_move.c, Src/Zle/zle_refresh.c, Src/Zle/zle_vi.c:
	add support for a linewise visual selection mode

	* 33635: Src/Zle/iwidgets.list, Src/Zle/zle_misc.c,
	Src/Zle/zle_move.c, Src/Zle/zle_refresh.c, Src/Zle/zle_vi.c:
	adapt region to function as vim style visual selection mode

	* 33700: Doc/Zsh/zle.yo, Src/Zle/iwidgets.list,
	Src/Zle/zle_misc.c, Src/Zle/zle_utils.c: new widget
	for put in vim style visual selection mode

	* 33699: Test/X02zlevi.ztst, Test/comptest: support short
	delays in zle tests where we need KEYTIMEOUT to elapse

2014-11-16  Oliver Kiddle  <opk@zsh.org>

	* 33633: Src/Zle/zle_vi.c: support vim style text objects

	* 33632: Src/Zle/zle_main.c, Src/Zle/zle_vi.c: use viopp and visual
	local keymaps if they exist

2014-11-15  Oliver Kiddle  <opk@zsh.org>

	* 33697: Doc/Zsh/zle.yo, Src/Zle/iwidgets.list, Src/Zle/zle_word.c:
	new vim style vi-backward-word-end widgets

	* 33696: Doc/Zsh/zle.yo, Src/Zle/iwidgets.list, Src/Zle/zle_hist.c:
	simple up/down line widgets that don't go through history lines

	* 33695: Src/Zle/zle_vi.c, Test/X02zlevi.ztst, Test/comptest:
	fix various vi-indent problems and vi-swap-case on a blank line

2014-11-13  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Artur Penttinen: 19371 plus tweak: run-help helper for ip.

	* Marc Finet: 33687 (first and last patches): ensure length of
	working directory is correct and return as soon as there's
	an error chasing symlinks.

2014-11-13  Barton E. Schaefer  <schaefer@zsh.org>

	* 33686: Test/B06fc.ztst: set PS1 before pattern-matching for it

	* 33656: Src/builtin.c: different algorithm for "whence -am" to
	produce results more consistent with "whence -m"

2014-11-13  Oliver Kiddle  <opk@zsh.org>

	* 33669: Src/Zle/zle_utils.c, Test/X02zlevi.ztst: allow an empty
	line to be yanked with yy by allocating 1 byte instead of 0

2014-11-11  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 33658: Doc/Zsh/options.yo: AUTO_CD depends on SHIN_STDIN.

2014-11-09  Oliver Kiddle  <opk@zsh.org>

	* 33599: Jun T.: Test/comptest: workaround zpty issue that
	causes vi test cases to fail on MacOS and FreeBSD

	* 33640: clutton: Completion/BSD/Command/_kld: look in
	/boot/modules instead of /modules for third-party modules

	* 33643: Doc/Zsh/options.yo: elaborate documentation of
	the PRIVILEGED option

	* 33639: Src/Zle/zle_vi.c, Test/X02zlevi.ztst: fix bug with vi
	operators on a blank line and with backward bracket matching

	* 33659: Completion/Unix/Command/_gpg: use --dump-options to get
	most of the gpg options to complete

2014-11-08  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 33655: Src/zsh.h: remove overlap of node flags.

	* 33653: Src/builtin.c: handle -a option to whence in
	combination with -m.

2014-11-08  Barton E. Schaefer  <schaefer@zsh.org>

	* 33648: Completion/Unix/Command/_gpg: complete for gpg2 as well

2014-11-06  Oliver Kiddle  <opk@zsh.org>

	* 33624: Src/Zle/zle_utils.c: keep region active when widget fails

2014-11-07  Mikael Magnusson  <mikachu@gmail.com>

	* 33607: Src/Modules/attr.c: Fix some minor problems in zattr module

2014-11-06  Barton E. Schaefer  <schaefer@zsh.org>

	* 33614 (based on RedHat BZ-978613): Src/exec.c: signal safety
	when updating global state in execshfunc()

2014-11-05  Oliver Kiddle  <opk@zsh.org>

	* 33604: Src/Zle/zle_utils.c, Src/Zle/zle_vi.c, Test/X02zlevi.ztst:
	fix change merging for vi mode where a change has just been undone

2014-11-04  Oliver Kiddle  <opk@zsh.org>

	* 33596: Src/Zle/zle_keymap.c: make local keymap keybinding hide
	global keymap binding that is a prefix of the local binding

2014-11-02  Oliver Kiddle  <opk@zsh.org>

	* 33593: Src/Zle/zle_vi.c, Test/X02zlevi.ztst:
	support numeric argument to vi-join

	* 33575: Src/Zle/zle_params.c, Src/Zle/zle_utils.c: reset vi change
	start position if text is inserted before it or on history movement

2014-11-02  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 33591: Src/exec.c, Test/D04parameter.ztst: don't treat an exec
	within an subshell as an exec of the parent shell even if about
	to exit.  Fixes incorrect SHLVL in subshell.

2014-10-31  Oliver Kiddle  <opk@zsh.org>

	* unposted: Src/jobs.c: quash compiler warning

	* unposted: Test/X02zlevi.ztst: correct cursor position in test

2014-10-31  Peter Stephenson  <p.stephenson@samsung.com>

	* unposted: .gitignore: add /.project for GitEye.

	* 33582: Src/Modules/zftp.c: don't include tcp.mdh in zftp.c as
	it only contains private module definitions.

	* via private email: Jérémie Roquet: Src/options.c: more care
	with errors using setuid().

2014-10-30  Oliver Kiddle  <opk@zsh.org>

	* 33570, 33576: Doc/Zsh/zle.yo, Src/Zle/iwidgets.list, Src/Zle/zle.h,
	Src/Zle/zle_misc.c, Src/Zle/zle_vi.c, Test/X02zlevi.ztst: make kill-
	ring/yank-pop work in vi mode after vi-put-before and vi-put-after

2014-10-29  Barton E. Schaefer  <schaefer@zsh.org>

	* 33566: Jun T.: Src/Modules/zselect.c: quash compiler warning

	* 33563: Completion/Base/Core/_main_complete, Src/Zle/complist.c:
	fix thinko in status message for INT/QUIT signals; check errflag
	in output loops so that unexpectedly long completion listings can
	be interrupted

2014-10-29  Oliver Kiddle  <opk@zsh.org>

	* 33528: Src/Zle/iwidgets.list, Src/Zle/zle_vi.c,
	Test/X02zlevi.ztst: take notice of last column position when
	using vi-yank and an upward cursor movement

2014-10-27  Mikael Magnusson  <mikachu@gmail.com>

	* 33561, 33562: Src/jobs.c: The time builtin forgot to unmetafy
	TIMEFMT.

2014-10-26  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 33564: Test/A05execution.ztst: more care with monitor option.

	* 33542: Test/A05execution.ztst: test previous patch.

	* 33531 (plus fix to test job pointer and removing
	lastpid_status): Doc/Zsh/builtins.yo, Doc/Zsh/options.yo,
	Src/exec.c, Src/init.c, Src/jobs.c, Src/linklist.c,
	Src/signals.c: retain up to CHILD_MAX statuses of exited
	background processes; remove old lastpid_status mechanism;
	slightly improve safety of permanently allocated linked lists.

2014-10-24  Barton E. Schaefer  <schaefer@zsh.org>

	* 33526: Completion/Unix/Type/_path_files: fix path prefix
	handling when NO_CASE_GLOB is in effect

2014-10-24  Peter Stephenson  <p.stephenson@samsung.com>

	* 33480 slightly tweaked: Src/Zle/zle_tricky.c: fix completion
	after $' but before closing quote (if any).

2014-10-24  Mikael Magnusson  <mikachu@gmail.com>

	* 33485: Completion/Unix/Command/_su: fix a missing ;; case
	terminator

2014-10-23  Oliver Kiddle  <opk@zsh.org>

	* 33520: Src/Zle/zle_vi.c, Test/X02zlevi.ztst: correct cursor
	positioning following a vi mode yank operation

	* unposted: .editorconfig: specify 8 char indent for ChangeLog

	* 33519: Src/Zle/zle_move.c, Test/X02zlevi.ztst: last character
	in the buffer can be cut, changed or yanked using vi-forward-char

	* 33518: Doc/Zsh/zle.yo, Src/Zle/zle.h, Src/Zle/zle_utils.c,
	Src/Zle/zle_vi.c, Test/X02zlevi.ztst: add support for "_ vi
	buffer and arguments to vi-set-buffer from a zle widget

	* 33514: Src/Zle/zle_utils.c: even with a named vi buffer, we
	should update the default buffer

	* 33513: Src/Zle/iwidgets.list: vi mode deletions should replace
	cut buffer not append to it

	* 33512: Src/Zle/zle.h, Src/Zle/zle_main.c, Src/Zle/zle_utils.c,
	Src/Zle/zle_vi.c: add support for "0 vi buffer and yank to it

2014-10-22  Barton E. Schaefer  <schaefer@zsh.org>

	* 33515: Src/Zle/compmatch.c: suppress parser error messages in
	comp_match()

	* 33493: Src/Builtins/rlimits.c, Src/exec.c: use correct command
	name in error messages about "ulimit" failure; restore internal
	copy of limits if setrlimit() fails, so the error won't repeat

2014-10-21  Oliver Kiddle  <opk@zsh.org>

	* 33486: Completion/X/Command/_rdesktop: new completion function

	* 33485: Completion/BSD/Command/_portsnap,
	Completion/Darwin/Command/_defaults,
	Completion/Darwin/Command/_fink, Completion/Debian/Command/_dchroot,
	Completion/Debian/Command/_dchroot-dsa,
	Completion/Debian/Command/_make-kpkg,
	Completion/Debian/Command/_update-alternatives,
	Completion/Debian/Command/_vim-addons, Completion/Unix/Command/_du,
	Completion/Unix/Command/_ecasound, Completion/Unix/Command/_ffmpeg,
	Completion/Unix/Command/_ln, Completion/Unix/Command/_mail,
	Completion/Unix/Command/_mosh, Completion/Unix/Command/_mysqldiff,
	Completion/Unix/Command/_od, Completion/Unix/Command/_pgrep,
	Completion/Unix/Command/_pydoc, Completion/Unix/Command/_ri,
	Completion/Unix/Command/_su, Completion/Zsh/Command/_tcpsys,
	Completion/Zsh/Command/_zattr: fixes for zstyle context handling

	* 33481: Completion/Mandriva/Command/_rebootin,
	Completion/Unix/Type/_directories, Completion/Unix/Type/_pdf,
	Completion/Unix/Type/_pids, Completion/openSUSE/Command/_yast,
	Completion/openSUSE/Command/_SUSEconfig: resolve completion
	clashes and tidy-up SUSE/Mandriva related functions

2014-10-17  Peter Stephenson  <p.stephenson@samsung.com>

	* see 33475: Completion/Unix/Command/_gcc: allow .cpp files as
	input.

2014-10-14  Oliver Kiddle  <opk@zsh.org>

	* 33455: Syohei YOSHIDA: Completion/Unix/Command/_global:
	update GNU global option completion

	* 33467: Completion/Debian/Command/_apt-move,
	Completion/Debian/Command/_bts, Completion/Linux/Command/_sysstat,
	Completion/Mandriva/Command/_urpmi, Completion/Redhat/Command/_rpm,
	Completion/Solaris/Command/_ptree, Completion/Unix/Command/_arp,
	Completion/Unix/Command/_at, Completion/Unix/Command/_bittorrent,
	Completion/Unix/Command/_bogofilter, Completion/Unix/Command/_bpython,
	Completion/Unix/Command/_bzr, Completion/Unix/Command/_cdrdao,
	Completion/Unix/Command/_chmod, Completion/Unix/Command/_cpio,
	Completion/Unix/Command/_df, Completion/Unix/Command/_django,
	Completion/Unix/Command/_git, Completion/Unix/Command/_less,
	Completion/Unix/Command/_lha, Completion/Unix/Command/_metaflac,
	Completion/Unix/Command/_module, Completion/Unix/Command/_monotone,
	Completion/Unix/Command/_mpc, Completion/Unix/Command/_netcat,
	Completion/Unix/Command/_notmuch, Completion/Unix/Command/_pkg-config,
	Completion/Unix/Command/_prove, Completion/Unix/Command/_rar,
	Completion/Unix/Command/_rsync, Completion/Unix/Command/_rubber,
	Completion/Unix/Command/_sablotron, Completion/Unix/Command/_screen,
	Completion/Unix/Command/_stgit, Completion/Unix/Command/_strip,
	Completion/Unix/Command/_systemd, Completion/Unix/Command/_telnet,
	Completion/Unix/Command/_tidy, Completion/Unix/Command/_tmux,
	Completion/Unix/Command/_vcsh, Completion/Unix/Command/_zpool,
	Completion/Unix/Type/_users, Completion/X/Command/_urxvt,
	Completion/X/Command/_x_utils: correct return status on functions
	and numerous other minor fixes

2014-10-13  Peter Stephenson  <p.stephenson@samsung.com>

	* 33459: Test/D04parameter.ztst: test for variable substitution
	in variable splitting.

2014-10-13  Oliver Kiddle  <opk@zsh.org>

	* 33438: Completion/Base/Utility/_sequence: use the new way of
	splitting strings with a dynamic separator from 33423 and quote
	separators where needed

2014-10-12  Barton E. Schaefer  <schaefer@zsh.org>

	* 33445: Src/init.c: fix handling of SHIN_STDIN (-s) when combined
	with INTERACTIVE (-i) on the shell invocation command line

2014-10-12  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 33423: Doc/Zsh/expn.yo, Src/subst.c: parameter expansion
	(p) flag allows delimited strings to contain simple $param
	expansions.

2014-10-11  Barton E. Schaefer  <schaefer@zsh.org>

	* unposted: Test/B06fc.ztst: tests for 33429.

2014-10-10  Barton E. Schaefer  <schaefer@zsh.org>

	* 33429: Src/builtin.c, Src/hist.c: disallow non-integer values
	for the temporary HISTSIZE and SAVEHIST of "fc -p", and fix
	crash on zero values for same

2014-10-11  Oliver Kiddle  <opk@zsh.org>

	* 33424: Completion/Debian/Type/_deb_architectures,
	Completion/Debian/Command/_apt-file,
	Completion/Debian/Command/_dak, Completion/Debian/Command/_madison,
	Completion/Debian/Command/_dpkg-buildpackage,
	Completion/Debian/Command/_pbuilder,
	Completion/Debian/Command/_reprepro,
	Completion/Debian/Command/_svn-buildpackage: use common function
	for completing Debian architectures

2014-10-10  Oliver Kiddle  <opk@zsh.org>

	* 33420: Completion/Zsh/Command/_zmodload: complete -R/-m options and
	fix feature completion

	* fREW Schmidt: 33375: Completion/Unix/Command/_runit: sv completion

	* Daniel Shahaf: 33396: Completion/Unix/Command/_xxd: new completion

	* Yuri D'Elia: 33397: Completion/X/Command/_xautolock: new completion

2014-10-09  Frank Terbeck  <ft@bewatermyfriend.org>

	* 33405: Functions/VCS_Info/vcs_info: Make sure maxexports
	is set when VCS_INFO_set is called

2014-10-09  Barton E. Schaefer  <schaefer@zsh.org>

	* 33403: Completion/Base/Utility/_call_program: be conservative
	about redirecting stderr, the caller may have already done so

2014-10-09  Marc Finet  <m.dreadlock@gmail.com>

	* 33391: Functions/VCS_Info/Backends/VCS_INFO_get_data_git:
	vcs_info git: fix applied patch detection on git am

2014-10-08  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Config/version.mk: update to 5.0.7-dev-0 to avoid
	installation clashes with 5.0.7.

2014-10-07  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Config/version.mk: 5.0.7

2014-10-06  Mikael Magnusson  <mikachu@gmail.com>

	* 33365: Src/exec.c: avoid buffer overflow for very long fds in >&
	fd syntax.

2014-10-06  Peter Stephenson  <p.stephenson@samsung.com>

	* unposted (discussed offline): README: update description of
	integer import problem.

2014-10-04  Barton E. Schaefer  <schaefer@zsh.org>

	* 33354: Src/jobs.c, Test/A05execution.ztst: when backgrounding
	a pipeline, close all pipe descriptors in the parent; add test
	for both this and 33345+33346

2014-10-03  Bart Schaefer  <schaefer@zsh.org>

	* 33346: Src/parse.c: another bit of the 33345 repair

2014-10-03  Peter Stephenson  <p.stephenson@samsung.com>

	* 33345: Src/parse.c, Test/C04funcdef.ztst: fix longstanding
	anonoymous function corruption of "complex" state that allowed
	complex wordcode to be passed to execsimple(), causing crash.

	* unposted: src/parse.c: comments were the wrong way round.

	* 33343: Src/parse.c, Test/C04funcdef.ztst: variant anonymous
	function syntax with arguments.

2014-10-02  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: 5.0.6-dev-1.

2014-10-02  Oliver Kiddle  <opk@zsh.org>

	* 33323: Completion/Zsh/Command/_typeset, Doc/Zsh/builtins.yo,
	Src/builtin.c: fix bug in removing math functions and complete
	-M option to functions

	* 33315: Completion/Unix/Command/_sysctl: fix pattern to
	match freebsd10 and later

2014-10-02  Peter Stephenson  <p.stephenson@samsung.com>

	* unposted: remove "major".

	* 33330: README, Etc/FAQ.yo: information for forthcoming 5.0.7
	release.

	* 33332: Test/C01arith.ztst: test numeric import fix in 33276.

2014-10-02  Barton E. Schaefer  <schaefer@zsh.org>

	* 33320 (cf. PWS 33311): Completion/Base/Completer/_expand_alias,
	Src/Zle/compcore.c, Src/utils.c, Src/ztype.h: revert 33069; add
	typtab_flags bits (replaces specialcomma boolean) to record any
	unusual handling of typtab entries; signal safety; make bangchar
	non-special during completion lexing of the command line.

2014-10-02  Peter Stephenson  <p.stephenson@samsung.com>

	* 33325: Src/exec.c, Test/A05execution.ztst: fix ksh autoloads
	with redirections on function definitions.

2014-10-01  Barton E. Schaefer  <schaefer@zsh.org>

	* 33319: Doc/Zsh/grammar.yo: fix parens in example from 33312

2014-10-02  Axel Beckert  <abe@deuxchevaux.org>

	* 33284: Mathieu Malaterre: Completion/Unix/Command/_{graphics,
	image}magick: Add missing JPEG 2000 file extensions.

2014-10-01  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 33312: Doc/Zsh/builtins.yo, Doc/Zsh/grammar.yo: document
	redirections applied to function definitions.

2014-09-30  Barton E. Schaefer  <schaefer@zsh.org>

	* 33298: Src/lex.c: make lexrestore() more signal-safe

2014-09-30  Peter Stephenson  <p.stephenson@samsung.com>

	* 33294: Src/Modules/parameter.c, Test/A04redirect.ztst:
	functions[func] value for functions with redirections and
	extra tests.

	* 33293: Src/Zle/compctl.c, Src/Zle/zle_refresh.c: fix warnings
	from swish new compilers with a contemporary outlook.

2014-09-29  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 33286: Src/exec.c, Test/A04redirect.ztst: handle redirections
	for multiple named functions.

	* 33285: NEWS, Src/exec.c, Src/hashtable.c, Src/parse.c,
	Src/signals.c, Src/zsh.h, Test/A04redirect.ztst: redirections in
	function definitions are applied at execution not definition.

2014-09-29  Frank Terbeck  <ft@bewatermyfriend.org>

	* 33277: Functions/VCS_Info/VCS_INFO_reposub: Fix
	VCS_INFO_reposub's command expansion

2014-09-29  Peter Stephenson  <p.stephenson@samsung.com>

	* users/19183: Src/hist.c: handle unlikely error case with
	fdopen() better.

	* 33276: Src/params.c, Src/zsh.h: safer import of numerical
	variables from environment.

2014-09-28  Barton E. Schaefer  <schaefer@zsh.org>

	* 33268: Src/exec.c, Src/init.c, Src/signals.c: interactive shells
	treat SIGPIPE like SIGHUP if and only if SHTTY is disconnected

2014-09-27  Barton E. Schaefer  <schaefer@zsh.org>

	* 33256: Src/prompt.c: fix prompttrunc() counting of %{ %} spans

2014-09-26  Peter Stephenson  <p.stephenson@samsung.com>

	* 33242: Src/parse.c: don't treat tokens immediately following
	end of shell constructs for, while, repeat, if as being in
	command position.

	* Wieland Hoffmann: 33252: Completion/Unix/Command/_notmuch:
	complete more subcommands.

2014-09-25  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* users/19143: Src/glob.c: **/*(odonT) didn't work because
	the trailing slash wasn't properly ignored.

2014-09-25  Peter Stephenson  <p.stephenson@samsung.com>

	* unposted: NEWS: tweak last change.

2014-09-24  Oliver Kiddle  <opk@zsh.org>

	* 33238: Completion/Unix/Command/_quilt: correct return values

2014-09-24  Peter Stephenson  <p.stephenson@samsung.com>

	* Eric Cook: 33224: Completion/Linux/Command/_btrfs: complete
	directory as second argument.

2014-09-23  Barton E. Schaefer  <schaefer@zsh.org>

	* 33223: Completion/Base/Utility/_call_program: discard stderr
	except when _complete_debug is in progress.

2014-09-23  Øystein Walle  <oystwa@gmail.com>

	* 33179: Completion/Unix/Command/_git: _git: updates for Git 2.0.0

	* 33176: Completion/Unix/Command/_git: _git: Add missing --list to
	git-tag

	* 33178: Completion/Unix/Command/_git: _git: updates for Git 2.1.0

	* 33177: Completion/Unix/Command/_git: _git: fix typo in git-apply

	* 33180: Completion/Unix/Command/_git: _git: add missing --3way
	option

2014-09-23  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: NEWS: more minor tweaks.

	* unposted: NEWS: mention numeric output with underscore separators.

	* unposted: NEWS: mention new
	/usr/local/share/zsh/site-functions default.

2014-09-23  Peter Stephenson  <p.stephenson@samsung.com>

	* 33221 (including 33173 from Anthony Heading):
	Completion/Unix/Command/_perforce: complete directories
	when handling unmaintained files and rationalise code that does
	this.

	* unposted: Completion/Unix/Command/_dvi: add dvipdf to list of
	commands.

	* Richard Hartmann: 33218: Completion/X/Command/_mplayer:
	complete m4a files.

2014-09-22  Oliver Kiddle  <opk@zsh.org>

	* 33198: Completion/Unix/Command/_augeas: new augtool completion

	* users/19113: Completion/Linux/_cryptsetup: reorganised function

2014-09-22  Daniel Hahler  <dhahler@gmail.com>

	* 33217: Functions/VCS_Info/Backends/VCS_INFO_get_data_git:
	vcs_info: use `--ignore-submodules=dirty` with diff/diff-index

2014-09-22  Peter Stephenson  <p.stephenson@samsung.com>

	* 33208: Tanu Kaskinen: improve printing of paths at end of
	configuration.

2014-09-20  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 33214 (modified yet further): configure.ac: test prefixes better.

	* 33213: configure.ac, Config/defs.mk.in: try again.

	* 33212: Src/zsh.mdd: Src/init.c, Src/zsh.mdd, configure.ac: add
	/usr/local/share/zsh/site-functions to head of fpath if not
	present from result of running configure.  There's no
	configuration for this as it serves as a fallback.

	* Tanu Kaskinen: 33209: Doc/Makefile.in: don't fail
	catastrophically when builing zsh.texi if yodl isn't available.

2014-09-19  Barton E. Schaefer  <schaefer@zsh.org>

	* 33206: Doc/Zsh/mod_computil.yo: fix compdescribe doc

	* 33205: Completion/Base/Utility/_describe: if passed both an
	array of completions and an array of display strings, keep them
	in sync when filtering for matches.

2014-09-18  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* users/19097: Doc/Zsh/mod_parameter.yo,
	Src/Modules/parameter.c: remove functypetrace and instead add
	cross-reference to zsh_eval_context.

2014-09-16  Marc Finet  <m.dreadlock@gmail.com>

	* 33188: Functions/VCS_Info/Backends/VCS_INFO_get_data_git:
	vcs_info git: set rrn before using it

	* 33184: Doc/Zsh/contrib.yo,
	Functions/VCS_Info/Backends/VCS_INFO_get_data_git: vcs_info git:
	consider patches for rebase

2014-09-16  Mikael Magnusson  <mikachu@gmail.com>

	* 33136: Doc/Zsh/expn.yo, Src/glob.c: P glob qualifier appends
	words when negated.

	* 33137: Completion/Unix/Type/_path_files: complete # to introduce
	a glob flag

2014-09-14  Marc Finet  <m.dreadlock@gmail.com>

	* 33149: Misc/vcs_info-examples: vcs_info examples: fix typo

	* 33151: Completion/Unix/Command/_git: completion git: support
	aliases when \n exist

	* 33147: Functions/VCS_Info/Backends/VCS_INFO_get_data_git:
	vcs_info git: detect revert or cherry-pick with multiple commits

	* 33148: Functions/VCS_Info/VCS_INFO_quilt: vcs_info quilt:
	refactor standalone detection

	* 33145: Functions/VCS_Info/Backends/VCS_INFO_get_data_git:
	vcs_info git: fix applied-string name

	* 33150: Completion/Unix/Command/_git: completion git: fix
	send-email --confirm values

2014-09-12  Barton E. Schaefer  <schaefer@zsh.org>

	* 33143: Src/init.c: POSIX_ARGZERO more closely matches bash et al.

2014-09-12  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* users/19075: Doc/Zsh/mod_parameter.yo,
	Src/Modules/parameter.c: $functypestack gives "function",
	"source" or "eval" for parallel element of $funcstack.

2014-09-09  Peter Stephenson  <p.stephenson@samsung.com>

	* Eric Cook: 33132: Completion/Unix/Type/_net_interfaces: use ip
	on Linux to get interface names.

2014-09-08  Peter Stephenson  <p.stephenson@samsung.com>

	* users/19059 based on users/19058 (Paulo César Pereira de
	Andrade): Src/pattern.c, Test/D02glob.ztst: remove inefficiency
	with multiple "*"s in pattern matching and add test.

2014-09-07  Barton E. Schaefer  <schaefer@zsh.org>

	* 33122: Src/Modules/pcre.c, Test/V07pcre.ztst: typo from 32891
	caused incorrect matches for pcre_match -n

2014-09-06  Barton E. Schaefer  <schaefer@zsh.org>

	* 33118: Src/subst.c: record original param unset state when
	${name:#word} et al. need to treat empty the same as unset, to
	avoid incorrect NO_UNSET error

	* 33116: Src/hist.c: followup to 32580 to prevent double-locking
	with shared or incremental history

	* unposted: Doc/Zsh/expn.yo: clarify ${(~j.|.)array} example

2014-08-21  Mikael Magnusson  <mikachu@gmail.com>

	* 33061: Completion/Zsh/Command/_setopt,
	Completion/Zsh/Command/_unsetopt: More useful setopt / unsetopt
	completion.

2014-09-04  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 33110: Doc/Zsh/expn.yo: document use of $IFS[1] for variable
	padding.

2014-09-04  Peter Stephenson  <p.stephenson@samsung.com>

	* Alexandre Rames: 33108: Completion/Unix/Command/_stgit:
	--patch completion.

	* 33091: Doc/Zsh/builtins.yo: improve documentation for ttyctl.

2014-09-03  Barton E. Schaefer  <schaefer@zsh.org>

	* 33100: Src/exec.c: check $fd more rigorously in "exec {fd}<&-"

	* 33088: Completion/Base/Widget/_complete_debug: indentation in $PS4

2014-09-01  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Mark Oteiza: 33081: Completion/Unix/Type/_mime_types: suppress
	error message if unnecessary file not found.

2014-08-31  Barton E. Schaefer  <schaefer@zsh.org>

	* unposted: Test/A05execution.ztst: further tweaking of the
	descriptor leak regression test that sometimes hangs

	* 33077: Src/exec.c: SHTTY = -1 when closing it in closem()

2014-08-30  Barton E. Schaefer  <schaefer@zsh.org>

	* 33070: Doc/Zsh/prompt.yo, Src/prompt.c: add %(e..) based on %e

	* 33069: Completion/Base/Completer/_expand_alias: remove internal
	quoting	before looking up aliases when expanding aliases in an
	unquoted word

2014-08-29  Peter Stephenson  <p.stephenson@samsung.com>

	* 33057: Doc/Zsh/prompt.yo, Src/prompt.c: %e in prompts shows
	evaluation / execution depth.

2014-08-28  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 33062: Etc/zsh-development-guide: update note on use of
	.distfiles based on 33047.

	* unposted: Config/version.mk: update to 5.0.6-dev-0 for new
	commits post release.

	* unposted: Config/version.mk: 5.0.6.

2014-08-24  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Config/version.mk: 5.0.5-dev-3.

2014-08-24  Barton E. Schaefer  <schaefer@zsh.org>

	* unposted (see 33050): Completion/Unix/Command/_git: un-transpose
	help text for git merge -{-no,}-verify

2014-08-23  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 33047: .distfiles, Completion/.distfiles,
	Completion/AIX/.distfiles, Completion/AIX/Command/.distfiles,
	Completion/AIX/Type/.distfiles, Completion/BSD/.distfiles,
	Completion/BSD/Command/.distfiles, Completion/Base/.distfiles,
	Completion/Base/Completer/.distfiles,
	Completion/Base/Core/.distfiles,
	Completion/Base/Utility/.distfiles,
	Completion/Base/Widget/.distfiles,
	Completion/Cygwin/Command/.distfiles,
	Completion/Darwin/Command/.distfiles,
	Completion/Darwin/Type/.distfiles, Completion/Debian/.distfiles,
	Completion/Debian/Command/.distfiles,
	Completion/Debian/Type/.distfiles,
	Completion/Linux/Command/.distfiles,
	Completion/Linux/Type/.distfiles,
	Completion/Mandriva/.distfiles,
	Completion/Mandriva/Command/.distfiles,
	Completion/Redhat/.distfiles,
	Completion/Redhat/Command/.distfiles,
	Completion/Solaris/Command/.distfiles,
	Completion/Solaris/Type/.distfiles, Completion/Unix/.distfiles,
	Completion/Unix/Command/.distfiles,
	Completion/Unix/Type/.distfiles, Completion/X/.distfiles,
	Completion/X/Command/.distfiles, Completion/X/Type/.distfiles,
	Completion/X/Utility/.distfiles, Completion/Zsh/.distfiles,
	Completion/Zsh/Command/.distfiles,
	Completion/Zsh/Context/.distfiles,
	Completion/Zsh/Function/.distfiles,
	Completion/Zsh/Type/.distfiles,
	Completion/openSUSE/Command/.distfiles, Config/.distfiles,
	Doc/.distfiles,Doc/Zsh/.distfiles, Doc/help/.distfiles,
	Etc/.distfiles, Functions/.distfiles,
	Functions/Calendar/.distfiles, Functions/Chpwd/.distfiles,
	Functions/Compctl/.distfiles, Functions/Example/.distfiles,
	Functions/Exceptions/.distfiles, Functions/MIME/.distfiles,
	Functions/Misc/.distfiles, Functions/Newuser/.distfiles,
	Functions/Prompts/.distfiles, Functions/TCP/.distfiles,
	Functions/VCS_Info/.distfiles,
	Functions/VCS_Info/Backends/.distfiles,
	Functions/Zftp/.distfiles, Functions/Zle/.distfiles,
	Misc/.distfiles, Scripts/.distfiles, Src/.distfiles,
	Src/Builtins/.distfiles, Src/Modules/.distfiles,
	Src/Zle/.distfiles, StartupFiles/.distfiles, Test/.distfiles,
	Util/.distfiles, Util/mkdisttree.sh: Files controlled by git
	are part of the source distribution unless explicitly included
	in DISTFILES_NOT.  The .distfiles file is still needed for
	the directory to be processed.

	* unposted: Etc/.gitignore: ignore generated FAQ*.html files.

2014-08-23  Barton E. Schaefer  <schaefer@zsh.org>

	* 33046: Completion/Unix/Command/.distfiles,
	Completion/Unix/Command/_chsh, Completion/Unix/Type/_users: new
	completion for "chsh"

2014-08-22  Barton E. Schaefer  <schaefer@zsh.org>

	* 33042: NEWS, Src/jobs.c: $? and $pipestatus report 128+signal
	number for stopped jobs as well as terminated jobs

2014-08-21  Mikael Magnusson  <mikachu@gmail.com>

	* 33038: Src/glob.c: Fix {a..b} expansion hanging when either
	endpoint is a literal NUL character

2014-08-20  Barton E. Schaefer  <schaefer@zsh.org>

	* Lokesh Mandvekar: 33032: Completion/Linux/Command/_docker,
	Completion/Linux/Command/.distfiles: new completion for docker

2014-08-15  Barton E. Schaefer  <schaefer@zsh.org>

	* unposted (see 33006): Test/A05execution.ztst: timeout the final
	"read" in hung shell regression

	* 33012: Src/utils.c: add an error return value (-1) to xsymlinks()
	to differentiate when xbuf is set to the empty string; silences
	bogus warning about failed expansion

2014-08-14  Oliver Kiddle  <opk@zsh.org>

	* 32998: Completion/Unix/Command/_dsh, Completion/Unix/Command/_nm,
	Completion/Unix/Command/_mosh, Completion/Unix/Command/_rsync,
	Completion/Unix/Command/_wget: completion function updates

	* 32997: Completion/Base/Utility/_sequence, Doc/Zsh/compsys.yo,
	Completion/Unix/Command/_mount, Completion/Unix/Command/_nmap,
	Completion/Unix/Command/_pgrep, Completion/Unix/Command/_zip:
	add completion utility function for lists

2014-08-14  Peter Stephenson  <p.stephenson@samsung.com>

	* 33002: Doc/Zsh/tcpsys.yo, Functions/TCP/tcp_expect: add option
	-P to tcp_expect for tagging matches with a string rather than
	a parameter index.

2014-08-13  Oliver Kiddle  <opk@zsh.org>

	* 32925: Completion/Zsh/Command/_kill: complete process groups,
	partly as a way to suppress insertion of ambiguous PID prefix

	* 32893: Completion/Unix/Type/_pids: move use of _call_program
	inside the _tags loop to allow processes to be separated

2014-08-12  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Config/version.mk: update to 5.0.5-dev-2.

2014-08-12  Mikael Magnusson  <mikachu@gmail.com>

	* 32985: NEWS: Add NEWS entry for array zipping operators.

2014-08-12  Peter Stephenson  <p.stephenson@samsung.com>

	* Axel Beckert: 32975, 32984: Doc/Zsh/Makefile.in: texi2html.conf
	location was inconsistent when building out of tree.

2014-08-10  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Completion/Base/Completer/.distfiles,
	Completion/Linux/Command/.distfiles,
	Completion/Unix/Command/.distfiles, Config/version.mk,
	Etc/.distfiles, Etc/FAQ.yo, Functions/Zle/.distfiles, NEWS,
	README: updates for 5.0.5-dev-1 and 5.0.6 release.

2014-08-10  Axel Beckert  <abe@deuxchevaux.org>

	* unposted: Doc/Zsh/expn.yo: Fix typo.

2014-08-08  Barton E. Schaefer  <schaefer@zsh.org>

	* unposted: NEWS, Doc/Zsh/prompt.yo: mention 32971 in NEWS,
	clarify RPROMPT behavior in docs.

2014-08-07  Barton E. Schaefer  <schaefer@zsh.org>

	* 32971 (plus doc tweak): Doc/Zsh/prompt.yo, Src/prompt.c:
	negative argument with %(l..) conditional and with %<< or %>>
	truncation calculates space available before right margin
	(positive argument still counts space used since left margin).

2014-08-06  Peter Stephenson  <p.stephenson@samsung.com>

	* unposted, see 32968: Completion/openSUSE/Command/.distfiles
	Completion/openSUSE/Command/_SuSEconfig ->
	Completion/openSUSE/Command/_SUSEconfig: rename file.

2014-08-04  Barton E. Schaefer  <schaefer@zsh.org>

	* Miles Ohlrich: 32958: Src/Zle/compctl.c: bitwise logic fix

2014-08-04  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 32954: Doc/Zsh/expn.yo: missed this.

	* 32954 (plus new test): Src/cond.c, Test/D02glob.ztst:
	(#q) on patterns with [[ ... = ... ] and [[ ... != ... ]]
	shouldn't force a glob, it should simply be ignored.

	* unposted: Src/subst.c:  remove unused variables.

2014-08-04  Mikael Magnusson  <mikachu@gmail.com>

	* 32949 (wip 32928, 32937): Doc/Zsh/expn.yo, Src/subst.c,
	Test/D04parameter.ztst: Add :^ and :^^ for zipping arrays.

2014-08-03  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 32944: Doc/Zsh/builtins.yo: read -qs is handled properly.

	* users/19006: Doc/Zsh/expn.yo: document position of
	RC_EXPAND_PARAM handling during parameter substitution.

2014-08-01  Peter Stephenson  <p.stephenson@samsung.com>

	* 32932: Src/glob.c, Src/utils.c: add hmkarray() and
	use to fix leak.

2014-07-31  Barton E. Schaefer  <schaefer@zsh.org>

	* 32931: Src/glob.c: with NO_NOMATCH, using a subscript glob
	qualifier on a not-matching pattern should still return the
	original pattern

2014-07-30  Peter Stephenson  <p.stephenson@samsung.com>

	* unposted: Src/Builtins/sched.c, Src/Modules/datetime.c,
	Src/Modules/stat.c: missed updates to ztrftime().

	* 32919: Doc/Zsh/tcpsys.yo Functions/TCP/tcp_output: %P
	at start of prompt in TCP function system causes standard
	%-style substitution.

	* 32918: Doc/Zsh/prompt.yo, Src/builtin.c,Src/prompt.c,
	Src/utils.c, Src/watch.c: add ability to display times with
	fractions of a second in prompts.

2014-07-28  Barton E. Schaefer  <schaefer@zsh.org>

	* 32593: Completion/Unix/Command/_qemu: update --vga option

2014-07-26  Axel Beckert  <abe@deuxchevaux.org>

	* Omari Norman: 32817: Add completion for moosic.

	* Sebastian Ramacher: 32816: Add completion for bpython and
	variants.

	* 32911: Expand bpython completion to bpython2 and bpython3.

2014-07-26  Barton E. Schaefer  <schaefer@zsh.org>

	* 32910: Src/mkmakemod.sh: quiet update of timestamp files

2014-07-24  Barton E. Schaefer  <schaefer@zsh.org>

	* 32853: configure.ac, Src/mem.c, Src/zsh_system.h: redefine
	the VARARR() macro to use heap rather than stack allocation;
	enable old behavior via "configure --with-stack-allocation"

	* unposted (see 32892): Src/builtins.c: 'fc -I' is an error

	* 32903: Src/Modules/parameter.c: new empty (unset) elements in
	the special parameter hash tables are special themselves, so that
	adding elements via assignment syntax handles them correctly.

2014-07-24  Peter Stephenson  <p.stephenson@samsung.com>

	* unposted: Functions/Zle/replace-argument, Doc/Zsh/contrib.yo:
	allow negative numeric prefix to count backwards from last
	argument.

2014-07-23  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Jai Keerthan: users/18981: Completion/Unix/Command/_tmux:
	improved function completion.

2014-07-23  Barton E. Schaefer  <schaefer@zsh.org>

	* 32898 (credit Jun T.): Doc/Zsh/mod_pcre.yo: fix bug in 32891.

2014-07-23  Ansgar Burchardt  <ansgar@debian.org>

	* 32895: Completion/Unix/Command/_nm: Match more shared library
	names.

2014-07-20  Barton E. Schaefer  <schaefer@zsh.org>

	* unposted: Doc/Zsh/builtins.yo: force retention of whitespace
	in "fc" item prototype

	* 32891: Doc/Zsh/mod_pcre.yo Src/Modules/pcre.c: the CASE_MATCH
	option should apply to =~ when using pcre; fix pcre_match bug
	with handling of empty string argument.

2014-07-17  Barton E. Schaefer  <schaefer@zsh.org>

	* 32882 (cf. Augie Fackler 32879): Src/hist.c: restore correct
	reload of backslash-continuation lines from history, broken by
	workers/30443 just before the zsh 5.0.0 release; fix bad history
	write of events ending with an even number of backslashes.

2014-07-17  Oliver Kiddle  <opk@zsh.org>

	* 32849: Completion/Linux/Command/_ss: new completion function

	* 32848: Completion/Unix/Command/_perl,
	Completion/Unix/Command/_python, Completion/Unix/Command/_ruby:
	fix words array before using _normal for script arguments

2014-07-17  Peter Stephenson  <p.stephenson@samsung.com>

	* 32866 (plus extra undo fix in read-from-minibuffer):
	Doc/Zsh/contrib.yo, Functions/Zle/read-from-minibuffer,
	Functions/Zle/replace-argument: new replace-argument function;
	fixes in read-from-minibuffer not to pass through numeric
	argument to recursive edit and to hide minibuffer edit from
	undo history.

2014-07-15  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Koen Wilde: 32863:  Completion/Unix/Command/_mpc: mpc "insert"
	command.

2014-07-08  Peter Stephenson  <p.stephenson@samsung.com>

	* Dominic Hopf: 32837: Config/defs.mk.in: improve handling of
	installation location for help directories.

	* 32832: Doc/Zsh/grammar.yo Doc/Zsh/params.yo: attempt to
	improve documentation for how assignment works.

2014-07-03  Axel Beckert  <abe@deuxchevaux.org>

	* Felipe Sateler: 32819: Completion/Debian/Command/_axi-cache:
	Update for axi-cache completion.

	* Vincent Lefevre: 32818: Completion/Unix/Command/_gzip:
	--rsyncable option is missing

	* Daniel Bolton: 32815: Completion/Debian/Command/_aptitude:
	missing resolver options

	* Sebastian Ramacher: 32814: Completion/Debian/Command/_dpkg:
	Add --add-architecture, --remove-architecture, and
	--print-foreign-architectures options.

2014-07-03  Mikael Magnusson  <mikachu@gmail.com>

	* 32821: Completion/Unix/Command/_gcc: Update _gcc as of GCC
	4.8.3 for generic options and x86.

2014-07-03  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Jun T: 32833: Completion/Unix/Command/_python,
	Completion/Unix/Command/_ruby: complete file arguments as for
	perl.

2014-06-30  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Jun T: 32823: Completion/Unix/Command/_perl: complete file
	instead of script after -e.

2014-06-26  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Jun T: 32812: Doc/zsh.yo, Doc/ztexi.yo: put table of contents
	at front of manual.

2014-06-26  Peter Stephenson  <p.stephenson@samsung.com>

	* 32799: Doc/Zsh/builtins.yo, Src/Builtins/rlimits.c: resource
	NTHR is not properly handled on netBSD.

2014-06-24  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 32789: Src/lex.c Src/mem.c Src/zsh_system.h configure.ac:
	--enable-zsh-valgrind allows valgrind to analyse heap
	allocations.

2014-06-16  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Jun T: 32781: Doc/Zsh/options.yo: source builtin and path
	search doc.

2014-06-14  Jun T  <takimoto-j@kba.biglobe.ne.jp>

	* 32779: Doc/Zsh/options.yo: fix a typo in options.yo

2014-06-13  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 32768, with further modifications: Doc/Zsh/options.yo,
	Src/exec.c, Src/options.c, 	Src/zsh.h, Test/E01options.ztst,
	Test/ztst.zsh:  LOCAL_LOOPS option to restrict effect of
	continue and break in function scope.

	* 32666: Doc/Zsh/compat.yo: shell emulation based on executable
	name incompletely documented.

2014-06-11  Barton E. Schaefer  <schaefer@zsh.org>

	* Jun T: 32767: Src/glob.c: another spot to tweak bracechardots()

2014-06-10  Barton E. Schaefer  <schaefer@zsh.org>

	* 32766: Src/glob.c: bracechardots() agrees with xpandbraces()
	about what constitutes a {C1..C2} pattern, thus preventing crash

	* Jun T: 32765: Src/glob.c: fix build when not MULTIBYTE_SUPPORT

2014-06-09  Peter Stephenson  <p.stephenson@samsung.com>

	* Jun T: 32755: Doc/Zsh/grammar.yo: move line that was in the
	wrong place.

2014-06-07  Barton E. Schaefer  <schaefer@zsh.org>

	* Nikolas Garofil: 32737: Src/utils.c: properly ifdef declarations

	* Nikolas Garofil: 32736 (tweak per 32741): Src/zsh_system.h:
	memmove() should return its dest argument

	* Nikolas Garofil: 32735: Src/signals.c: define ret before use

	* Nikolas Garofil: 32734: Src/mem.c: remove unused pointers

	* Nikolas Garofil: 32733: Src/prototypes.h: use size_t in bcopy()

	* Nikolas Garofil: 32732 (tweak per 32739): Src/compat.c: fix
	const declaration inconsistency

2014-06-06  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Jun T: 32719: Doc/Zsh/contrib.yo: minor issues.

	* Jun T: 32715: Doc/Zsh/calsys.yo, Doc/Zsh/grammar.yo,
	Doc/Zsh/zle.yo: formatting fixes.

	* 32682 with tweaks: Doc/Zsh/options.yo, Src/hist.c,
	Src/options.c, Src/zsh.h: INC_APPEND_HISTORY_TIME is new
	behaviour, with INC_APPEND_HISTORY reverting to its previous
	behaviour.

	* Andrew Magee: 32698: Completion/Unix/Command/_hg: show
	committable files.

2014-06-05  Barton E. Schaefer  <schaefer@zsh.org>

	* 32723: Src/glob.c: add braces around some if/else branches

	* 32716 (via Jun T. 31714): Src/utils.c: properly test iconv
	return values for error conditions

2014-06-04  Barton E. Schaefer  <schaefer@zsh.org>

	* 32711: Test/A07control.ztst: run "continue" test in a new
	shell, lest it inadvertently continue the loop that reads the
	test chunks from this file

	* Daniel Shahaf: 32708: Doc/Zsh/expn.yo, Src/glob.c,
	Test/D02glob.ztst: glob qualifier (Y) implies (oN), plus
	incidental patch to avoid adding a meaningless bitvalue to
	sort-order flags

2014-06-03  Barton E. Schaefer  <schaefer@zsh.org>

	* Daniel Shahaf: 32694: Completion/Zsh/Type/_globquals,
	Doc/Zsh/expn.yo, Src/glob.c, Test/D02glob.ztst: the number
	of matches to find is the suffix argument of (Y) qualifier

2014-06-03  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Jun T: 32681: Doc/Zsh/zle.yo: formatting issue.

2014-06-03  Peter Stephenson  <p.stephenson@samsung.com>

	* unposted: Src/cond.c: restore cond_match() in case used in
	modules.

2014-06-02  Barton E. Schaefer  <schaefer@zsh.org>

	* 32656 (via Jun T. via waltarix on github): when __APPLE__ is
	defined at compile, normalize Unicode filenames in zreaddir()

2014-06-02  Peter Stephenson  <p.stephenson@samsung.com>

	* Daniel Shahaf: users/18870: Src/glob.c, Test/D02glob.ztst:
	glob scanner needed some coaxing with counting matches with (Y)
	glob qualifier.

2014-06-02  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* 32662: Functions/VCS_Info/Backends/VCS_INFO_get_data_git:
	vcs_info git: Fix stagedstr for empty repos

2014-06-01  Barton E. Schaefer  <schaefer@zsh.org>

	* 32653: Completion/Unix/Command/_php: complete files with the
	".phar" extension as well as ".php", and respect the suffixes
	zstyle to change this

	* 32634 (plus doc): Doc/Zsh/options.yo, Doc/Zsh/params.yo,
	Src/init.c, Src/options.c, Src/params.c, Src/zsh.h: add the
	POSIX_ARGZERO option to allow toggling between the original
	value of $0 and the value set by FUNCTION_ARGZERO

	* Daniel Shahaf: users/18857: Doc/Zsh/expn.yo, Src/glob.c,
	Test/D02glob.ztst: add (Y) glob qualifier

2014-06-01  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 32640: Doc/Zsh/cond.yo, Doc/Zsh/expn.yo, NEWS, Src/cond.c,
	Src/glob.c, Test/D02glob.ztst: (#q) with EXTENDED_GLOB forces
	globbing in [[ ... ]].

2014-05-29  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 32624:  Src/builtin.c, Src/jobs.c: use correct scaling factor
	(clock ticks) for times.

	* Keerthan Jai: users/18860: Completion/Unix/Command/_man: man
	-M overrides manpath.

	* unposted: Src/params.c: use DIGBUFSIZE for pipestatus numeric
	buffer.

2014-05-29  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* 32619: Functions/VCS_Info/Backends/VCS_INFO_get_data_svn:
	vcs_info svn: Use the revision of cwd

	* 32621: Functions/VCS_Info/Backends/VCS_INFO_get_data_svn:
	vcs_info svn: 'Fix set-branch-format' when in subdirs

	* 32620: Doc/Zsh/contrib.yo: Typo fix after commit eb4c70d

2014-05-18  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Jun T: 32616: Src/Builtins/rlimits.c: unnecessary printf
	argument in limits on some systems.

2014-05-16  Peter Stephenson  <p.stephenson@samsung.com>

	* Roman Neuhauser: users/18827 (plus tweaks to original
	comments): Doc/Zsh/contrib.yo: more efficient way of extracting
	hg bookmarks.

2014-05-13  Barton E. Schaefer  <schaefer@zsh.org>

	* 32609: Src/parse.c, Test/CO2cond.ztst: [[ $var ]] behaves as
	[[ -n $var ]] for bash/ksh compatibility; restore ksh [ -t ]
	compatibility when POSIX_BUILTINS is not set; allow operators
	defined by modules to be called with no arguments, although
	this affects only runtime interpretation, not parsing.

2014-05-09  Peter Stephenson  <p.stephenson@samsung.com>

	* Eric Cook: 32602: Doc/Zsh/grammar.yo: status of try + always
	block is from the former, not the latter.

2014-05-08  Peter Stephenson  <p.stephenson@samsung.com>

	* m0viefreak: 32600: Src/Zle/computil.c: fix problem with
	_arguments thinking -- is a single letter option called '-',
	which it isn't.

2014-05-06  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* 32597: Functions/VCS_Info/Backends/VCS_INFO_get_data_git:
	vcs_info git: Describe detached heads symbolically.

2014-04-29  Peter Stephenson  <p.stephenson@samsung.com>

	* Tomoki Sekiyama: 32592: add CORRECT_IGNORE_FILE variable.

2014-04-23  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Sebastien Alaiwan: 32562: Completion/Unix/Command/_bzr:
	updates for bzr completion.

	* Jasper Lievisse Adriaanse: 32558: configure.ac:
	_XOPEN_SOURCE_EXTENDED now works OK on OpenBSD.

2014-04-25  Barton E. Schaefer  <schaefer@zsh.org>

	* 32580: Src/hist.c: avoid indefinite wait in lockhistfile() by
	checking for lock file time stamp far in the future relative to
	the local clock.  Change behavior of HIST_FCNTL_LOCK to use only
	fcntl() locking, rather than applying both kinds of lock.

2014-04-20  Barton E. Schaefer  <schaefer@zsh.org>

	* 32569: Src/loop.c: lastval ($?) should not be reset between
	word list substitution and loop body execution in for/select.

	* 32568: Src/exec.c, Src/loop.c: consistency in handling of errflag
	condition during substitutions in for/select word lists, function
	definition name position, and anonymous function argument lists.

2014-04-17  Barton E. Schaefer  <schaefer@zsh.org>

	* Andrew Waldron: 32552 (updated by 32560): Src/exec.c,
	Src/parse.c, Src/subst.c, Test/C04funcdef.ztst:  fix segfault
	when using process substitution in anonymous function argument
	list; disallow process substitution in function name position.

2014-04-15  Barton E. Schaefer  <schaefer@zsh.org>

	* Jun T: 32546: Completion/Unix/Type/_path_files: better handling
	of ignored files when using -W to specify prefixes.

2014-04-13  Barton E. Schaefer  <schaefer@zsh.org>

	* 32540: Src/Zle/zle_tricky.c, Src/Zle/zle_utils.c: following
	successful history expansion, discard saved line position data
	rather than restoring from it (updates 32531).

2014-04-07  Peter Stephenson  <p.stephenson@samsung.com>

	* 32527: Doc/Zsh/contrib.yo, Functions/Misc/zcalc,
	Functions/Zle/zcalc-auto-insert: zcalc-auto-insert widget
	for key binding in zcalc.

2014-04-06  Barton E. Schaefer  <schaefer@zsh.org>

	* unposted: Doc/Zsh/options.yo: fix typo in option cross-reference

	* 32531: Src/Zle/zle_refresh.c, Src/Zle/zle_tricky.c, Src/hist.c:
	fix memory leaks detected by valgrind, two in ZLE region highlight
	and one in :A history modifier.

2014-04-06  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Sebastian Ramacher: 32533: Completion/Debian/Command/_apt: add
	completion for "apt-mark".

	* Alessandro Ghedini: 32532: Completion/Debian/Command/_apt:
	support 'apt' command.

	* 32530: llua: Completion/Unix/Command/_zfs: repeatable -o
	argument.

	* 32521: Doc/Zsh/params.yo: document that LOGNAME comes
	from getlogin().

2014-04-05  Daniel Shahaf  <d.s@daniel.shahaf.name>

	* 32528: Completion/Zsh/Command/_zstyle, Doc/Zsh/contrib.yo,
	Functions/VCS_Info/Backends/VCS_INFO_get_data_git,
	Misc/vcs_info-examples: vcs_info: Add check-for-staged-changes

	* 32528: Doc/Zsh/contrib.yo: vcs_info: Document 'post-backend'
	hook and bzr 'check-for-changes' support.

2014-03-28  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Danek Duvall: 32505: Completion/Unix/Command/_pgrep: improved
	Solaris compatibility for pgrep completion.

2014-03-23  Barton E. Schaefer  <schaefer@zsh.org>

	* m0viefreak: users/18660: Src/Zle/compresult.c,
	Src/Zle/zle_misc.c, Src/Zle/zle_refresh.c: fix auto-removable
	suffix highlighting

	* m0viefreak: users/18657: Completion/Unix/Command/_git: fix
	compadd for auto-removable suffix in _git_stash

	* m0viefreak: users/18655: Completion/Unix/Command/_git: fix
	compadd for auto-removable suffix in _git_commit_ranges

2014-03-21  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Takeshi Banse: 32502: Completion/Unix/Command/_git: fix typo
	in argument list.

2014-03-20  Peter Stephenson  <p.stephenson@samsung.com>

	* users/18644: Doc/Zsh/zle.yo: bindkey -s doc should refer to
	documentation for argument interpretation.

	* Completion/Unix/Command/_perforce: finally, after more than
	ten years, complete depots after // in file paths as it always
	should have done.

2014-03-18  Barton E. Schaefer  <schaefer@zsh.org>

	* 32500: Src/pattern.c: handle interrupts during pattern matching

	* Jun T: 32497: Test/X02zlevi.ztst, Test/comptest: avoid using
	comptesteval in the middle of a series of tests; the change in
	control required for sourcing the command file can confuse the
	simulated interactive input

2014-03-17  Peter Stephenson  <p.stephenson@samsung.com>

	* Jun T: 32494: Doc/zman.yo: Yodl hack to fix indentation
	in nroff -man output.

	* Jun T: 32493: Doc/Zsh/contrib.yo, Doc/Zsh/mod_pcre.yo,
	Doc/Zsh/mod_regex.yo, Doc/Zsh/mod_sched.yo: some formatting
	fixes.

2014-03-16  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Mariusz Fik: 32847: Completion/openSUSE/Command/_zypper: new
	options.

2014-03-14  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Doc/Zsh/options.yo: document effect of 32479.

	* Jun T: 32482: Doc/zman.yo: fix character translation table
	usage with some versions of Yodl.

2014-03-14  Peter Stephenson  <p.stephenson@samsung.com>

	* 32479: Src/builtin.c, Src/signals.c: with POSIXTRAPS
	never propagate an implicit return from within a trap.

2014-03-13  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Kosuke Asami: 32473: Completion/Unix/Command/_pgrep: tidy up

	* Kosuke Asami: 32471: Completion/Unix/Command/_pgrep: handle
	BSD process options.

	* Kosuke Asami: 32472: Completion/Unix/Command/_pgrep: new options.

2014-03-13  Peter Stephenson  <p.stephenson@samsung.com>

	* Jun T: 32480: Src/Zle/zle_vi.c: fix crash in vi mode when too
	few previous changes.

2014-03-09  Barton E. Schaefer  <schaefer@zsh.org>

	* 32468: Src/Modules/zutil.c: save/restore match/mbegin/mend
	when doing pattern lookups against zstyle contexts

2014-03-03  Barton E. Schaefer  <schaefer@zsh.org>

	* users/18550: Doc/Zsh/compsys.yo: matcher-list clarifications

2014-03-03  Simon Ruderich  <simon@ruderich.org>

	* 32289: Doc: Add zsh version to footer in HTML documentation.

2014-03-03  Oliver Kiddle  <opk@zsh.org>

	* 32441: Completion/Base/Completer/_extensions, Doc/Zsh/compsys.yo:
	add completer for file extensions

	* 32450: Src/Zle/zle_hist.c: make get-line set the history
	number that was saved with the line

	* 32448: Src/Zle/zle_params.c: fix seg fault after recursive-edit

	* 32439 (with Yuri D'Elia): Completion/Base/Core/_main_complete:
	add new show-ambiguity style

	* 32436: Src/Zle/complist.c: allow = to be used in ZLS_COLORS
	patterns if it is quoted or inside parentheses

2014-03-01  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 32453: Functions/Misc/zcalc: fix default base handling.

	* Manuel Presnitz: 32412 modified c.f. 32415:
	Completion/Zsh/Type/_globquals, Doc/Zsh/expn.yo, Src/glob.c,
	Src/zsh.h: gigabyte and terabyte units for glob qualifiers.

2014-02-28  Peter Stephenson  <p.stephenson@samsung.com>

	* users/18531 plus doc etc.: Doc/Zsh/contrib.yo,
	Functions/Zle/.distfiles, Functions/Zle/expand-absolute-path:
	new expand-absolute-path ZLE widget.

2014-02-26  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Jun T: 32435: Completion/Base/Core/_description,
	Completion/Unix/Command/_rm: improved quoting for ignore-line
	style.

2014-02-24  Oliver Kiddle  <opk@zsh.org>

	* unposted: Doc/Zsh/compsys.yo: fix typo

	* unposted: Completion/X/Command/_x_utils: duplicate local
	statement was printing variable value

	* users/18498: Completion/Base/Completer/_expand_alias: observe
	add-space style in _expand_alias so suffix can be disabled

	* users/18485: Completion/Unix/Command/_git: add .. as an
	auto-removable suffix in git revision ranges

2014-02-24  Peter Stephenson  <p.stephenson@samsung.com>

	* Hong Xu: 32492: Completion/Unix/Command/_npm: fix outdated
	completion.

	* Sebastien Alaiwan: 32462: Completion/Unix/Command/_bzr:
	improve completion with directory path.

2014-02-23  Barton E. Schaefer  <schaefer@zsh.org>

	* 32427: Doc/Zsh/zle.yo, Src/Zle/zle_main.c: avoid busy loop
	on closed descriptors for "zle -F" handlers.  Assure that the
	handlers are called on error conditions and document the extra
	argument that is passed in the error case.

2014-02-19  Peter Stephenson  <p.stephenson@samsung.com>

	* 32414: Src/glob.c: improved error message for missing glob
	qualifier delimiters.

2014-02-18  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Eric Cook: 32408: Completion/Linux/Command/_btrfs: additional
	completions

	* Eric Cook: 32409: Completion/Linux/Command/_btrfs: updated
	completion for subcommands.

	* Eric Cook: 32411: Completion/Linux/Command/_btrfs: minor typo.

	* Eric Cook: 32410: Completion/Linux/Command/_btrfs: remove hard tabs.

	* m0viefreak: Util/helpfiles: 32402: prefer col -bx to colcrt.

	* m0viefreak: Util/helpfiles: 32405: Util/helpfiles: remove old
	example now shell code is integrated in distribution.

	* m0viefreak: 32404: Util/helpfiles: use env to find perl.

	* m0viefreak: 32403: Doc/Zsh/contrib.yo: update zshcontrib
	manual for helpfiles improvements.

2014-02-18  m0viefreak  <m0viefreak.cm@googlemail.com>

	* 32396: Completion/Unix/Command/_git: _git: fix
	__git_committish_range_{first,last} and __git_is_committish_range

	* 32395: Completion/Unix/Command/_git: _git: diff: refactor and
	fix wrong completions

	* 32397: Completion/Unix/Command/_git: _git: fix __git_submodules
	to only use the actual name of the submodule

	* 32398: Completion/Unix/Command/_git: _git: completion updates up
	to latest git v1.9.0

2014-02-17  Barton E. Schaefer  <schaefer@zsh.org>

	* unposted (users/18468): Doc/Zsh/builtins.yo, Doc/Zsh/params.yo:
	document interactions of "fc -R" etc. with "fc -l" and $HISTCMD

2014-02-15  Barton E. Schaefer  <schaefer@zsh.org>

	* 32389 (with Jun Takimoto): Test/X02zlevi.ztst, Test/comptest:
	additional PTY and keybinding adjustments

	* 32388: Doc/Zsh/mod_zutil.yo, Src/Modules/zutil.c: zparseopts -K
	preserves individual associative array elements

2014-02-14  Oliver Kiddle  <opk@zsh.org>

	* 32361: Src/Zle/zle_tricky.c: don't reset lastline before completion

2014-02-13  Barton E. Schaefer  <schaefer@zsh.org>

	* 32377: Test/comptest: change keybindings and PTY control for
	vi-mode tests to make them more reliable

2014-02-08  Barton E. Schaefer  <schaefer@zsh.org>

	* 32365: Src/Zle/zle_refresh.c, Src/init.c: another stab at the
	heuristic for initializing rprompt_indent

2014-02-07  Peter Stephenson  <p.stephenson@samsung.com>

	* Martin Vaeth: 32356: Util/helpfiles: fix a typo.

2014-02-05  Oliver Kiddle  <opk@zsh.org>

	* 32355: Doc/Zsh/zle.yo Test/X02zlevi.ztst Test/comptest: document
	and test vi mode undo changes

	* 32342: Src/Zle/zle_main.c, Src/Zle/zle_vi.c: fix overstrike for vi
	mode and use varying vi commands at line start

	* 32334 (modified so KEEPSUFFIX is unchanged for vi-cmd-mode; based on
	Jun T: 32324, 32330), 32347, Jun T: 32344, 32349: Src/Zle/iwidgets.list,
	Src/Zle/zle_main.c, Src/Zle/zle_utils.c, Src/Zle/zle_vi.c
	add split-undo zle widget for configurable breaks in undo sequence

2014-02-02  Barton E. Schaefer  <schaefer@zsh.org>

	* unposted: Doc/Zsh/builtins.yo, Doc/Zsh/expn.yo,
	Doc/Zsh/roadmap.yo: tweak index markers and related whitespace
	to make appearance consistent with other pages

	* 32341: Src/init.c: guess at best ZLE_RPROMPT_INDENT based on
	termcap/terminfo description

	* unposted: Src/Zle/zle_tricky.c: whitespace in comment

	* 32340: Src/init.c, Src/Zle/compctl.c:  add specifics to error
	messages explaining failure of "read -c" / "read -l".

	* 32338: Doc/Makefile.in: create Doc/help.txt as an empty file
	when Util/helpfiles fails, so that the rest of the build does not
	yeild a spurious error

	* 32337: Src/params.c: initialize several special parameters to
	unset for better compatibility in emulation modes; for the same
	reason, remove the readonly flag from $_

2014-01-31  Oliver Kiddle  <opk@zsh.org>

	* 32314: Src/Zle/zle_main.c, Src/Zle/zle_tricky.c,
	Src/Zle/zle_utils.c, Src/Zle/zle_vi.c: merge undo events
	corresponding to vi change in the vi-cmd-mode widget so undo from
	insert mode is useful again

2014-01-30  Barton E. Schaefer  <schaefer@zsh.org>

	* 32322: Completion/Base/Core/_main_complete: display a message
	when completion is interrupted from the keyboard

2014-01-30  Peter Stephenson  <p.stephenson@samsung.com>

	* Jun T: 32300: Completion/Unix/Command/_od: +
	Completion/Unix/Command/.distfiles: new completion.

2014-01-29  Peter Stephenson  <p.stephenson@samsung.com>

	* Christian Hesse: 32316: Completion/Unix/Command/_ssh: complete
	new ssh key type.

2014-01-28  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 32303: Src/Zle/compcore.c, Completion/Zsh/Type/_parameters,
	Completion/Zsh/Context/_brace_parameter: allow completion
	of modifiers for parameters in a fairly simplistic way.

2014-01-28  Peter Stephenson  <p.stephenson@samsung.com>

	* 32308 (slightly modified to use "a" as the vi command at start
	of line): Src/Zle/zle_main.c, Src/Zle/zle_vi.c: improve
	initialising of vi mode change when entering viins at start of
	editing.

2014-01-27  Barton E. Schaefer  <schaefer@zsh.org>

	* users/18368: Completion/Unix/Command/_git: in __git_files,
	retry ls-files if nothing matched the prefix pattern, to give
	_multi_parts a shot at the whole file list.  Restores partial
	 path completion inadvertently removed by 31159.

2014-01-27  Peter Stephenson  <p.stephenson@samsung.com>

	* unposted: Src/zsh.mdd: update 31983 to suppress stdout from
	cmp, too.

2014-01-23  Bart Schaefer  <schaefer@zsh.org>

	* unposted: Doc/Zsh/arith.yo: use LPAR()+RPAR() instead of parens
	in sqrt example

2014-01-23  Peter Stephenson  <p.stephenson@samsung.com>

	* 32299: Doc/Zsh/arith.yo, Functions/Misc/zcalc, Src/math.c,
	Src/params.c, Src/subst.c, Test/C01arith.ztst: add
	ability to use "_" at the end of a [#] arithmetic expression
	to get underscores to space numeric output.

2014-01-22  Barton E. Schaefer  <schaefer@zsh.org>

	* unposted: Src/mem.c: reformulate 32285 to lift the fheap->sp
	test out of the loop, improve commentary

2014-01-19  Barton E. Schaefer  <schaefer@zsh.org>

	* 32294 (plus typo fix): Src/utils.c: prevent buffer overflow when
	scanning very long directory paths for symbolic links

	* users/18335: Completion/Zsh/Command/_typeset: avoid passing to
	"functions" those typeset options that it does not accept

2014-01-18  Barton E. Schaefer  <schaefer@zsh.org>

	* 32285: Src/mem.c (freeheap): when the last-arena-with-free-space
	pointer (fheap) points to an arena that is going to be discarded
	because it has become empty, loop back through the entire linked
	list of arenas to find another partly-filled arena; fixes crash
	wherein pushheap followed by freeheap could orphan the whole list
	of arenas in some circumstances

	* 32283: Src/Zle/complist.c: avoid using a negative number for
	available vertical space when the terminal has only a small number
	of lines; fixes crash in menu selection

2014-01-17  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Daniel Hahler: 32271: Doc/Zsh/compsys.yo: fix matcher list
	example.

2014-01-17  Peter Stephenson  <p.stephenson@samsung.com>

	* sergio: 32267: Completion/Linux/Command/_modutils: modinfo may
	not be in user's path, so use explicit path as already done for lsmod.

2014-01-17  Frank Terbeck  <ft@bewatermyfriend.org>

	* 32264: Functions/VCS_Info/Backends/VCS_INFO_detect_hg: vcs_info,
	hg: Support detecting repos using ShareExtension

2014-01-16  Barton E. Schaefer  <schaefer@zsh.org>

	* Thomas Mitterfellner: 32265: Completion/openSUSE/Command/_zypper:
	better handling of large lists of packages

2014-01-16  Peter Stephenson  <p.stephenson@samsung.com>

	*  Holger Macht: 32257: Completion/openSUSE/Command/_zypper:
	updates.

2014-01-14  Peter Stephenson  <p.stephenson@samsung.com>

	* 32255: Completion/Unix/Command/_python: complete for Python
	with command names python2.4 ... python3.4.

2014-01-11  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 32246: Doc/Zsh/builtins.yo, Src/builtin.c, Test/.distfiles,
	Test/B08shift.ztst: add "shift -p" to pop arguments from the end
	of arrays.

2014-01-10  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Koen Wilde: 32245: Completion/Unix/Command/_mpc: complete more
	arguments.

2014-01-09  Peter Stephenson  <p.stephenson@samsung.com>

	* users/18298 (tidied up): Doc/Zsh/expn.yo, Src/glob.c,
	Test/D09brace.ztst: add {<char>..<char>} expansion.

2014-01-07  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Mark Oteiza: 32238: suppress error output completing after ip.

2014-01-06  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Config/version.mk: update to 5.0.5-dev-0 to avoid
	installation clash with 5.0.5 release.

2014-01-05  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Config/version.mk, Doc/Zsh/compsys.yo: update
	release to 5.0.5 and correct typo in compsys.yo making texinfo
	format unusable.

	* unposted but c.f. 32231: Doc/Zsh/compsys.yo: the parameter
	'line' doesn't include the original command.

	* Jun T: 32231: Completion/Unix/Command/_chmod: was confused by
	options before the mode argument.

	* Axel Beckert: 32229: LICENCE: was not correctly referring to
	Gnu General Public License.

2014-01-03  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: README: update another reference to 5.0.5.

	* users/18271 plus some additional rewriting: Etc/FAQ.yo: add
	FAQ entry to explain pattern exclusions.

	* unposted: README, Etc/FAQ.yo: update source documentation for
	5.0.5.

2014-01-02  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Danek Duvall: 32216: Completion/Solaris/Command/_svcadm,
	Completion/Solaris/Command/_zoneadm,
	Completion/Unix/Command/_zfs, Completion/Unix/Command/_zpool,
	Completion/Unix/Type/_zfs_dataset: updates for Solaris 11,
	Update 1.

	* 32196: Carl Drougge: Src/Zle/zle_misc.c: copy-prev-shell-word
	needs an extra flag to work properly.

2013-12-31  Barton E. Schaefer  <schaefer@zsh.org>

	* Eric Cook: 32210: Completion/Linux/Command/_sysstat: completion
	for mpstat, iostat, etc.

2013-12-30  Barton E. Schaefer  <schaefer@zsh.org>

	* 32208: Src/params.c: always reset pathchecked when the path
	array is modified in arrvarsetfn(), to avoid bad dereference

	* 32205: Completion/Zsh/Command/_cd: skip cdpath search when
	the prefix begins with "../" (bug introduced by 31714)

	* unposted (cf. Carlo: 32202): MACHINES: OS X 10.9.1. gcc problem

2013-12-28  Barton E. Schaefer  <schaefer@zsh.org>

	* 32190 (cf. Alexey Bezhan: 32189): Completion/Zsh/Command/_cd:
	quote _path_files -W path in case of spaces or special characters
	when completing relative to ../

	* 32186: Completion/Base/Completer/_expand: fix bad backreference;
	handle glob patterns that include backslashed quote characters

2013-12-26  Barton E. Schaefer  <schaefer@zsh.org>

	* unposted (cf. Jun Takimoto: 32184): Test/comptest,
	Test/Y01completion.ztst: back 32183 out of comptest and instead
	reset path in the individual tests in Y01completion.ztst

2013-12-25  Barton E. Schaefer  <schaefer@zsh.org>

	* 32183: Test/comptest, Test/Y01completion.ztst: regression tests
	for 32182 and 31611

	* 32182: Src/Zle/zle_tricky.c: re-enable command completion after
	a separator (tweak to 31611)

	* 32178: Src/jobs.c: fix another acquire_pgrp() infinite loop

2013-12-21  Barton E. Schaefer  <schaefer@zsh.org>

	* PWS + Bart: 32176: plug additional descriptor leaks causing
	deadlock via different code paths; expand regression test

2013-12-21  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Config/version.mk: update version to 5.0.4-dev-0 so as
	not to clash with release.

2013-12-20  Barton E. Schaefer  <schaefer@zsh.org>

	* 32172; Test/A05execution.ztst: regression test for 32171

	* 32171: Src/exec.c: fix leaked pipe descriptor that could
	deadlock a pipeline from a complex shell construct or function
	into an external command

2013-12-20  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Config/version.mk, Etc/FAQ.yo, README: release 5.0.4.

2013-12-18  Barton E. Schaefer  <schaefer@zsh.org>

	* 32157: Doc/Zsh/params.yo, Src/Zle/zle_refresh.c, Src/init.c,
	Src/params.c: make ZLE_RPROMPT_INDENT a special variable tied to
	an internal C global, to avoid having the shell variable value
	fetched on every keystroke and to make it available when testing
	how to reposition the cursor after the right-prompt is output.
	Fixes erasure in completion listing when ZLE_RPROMPT_INDENT=0.

	* 32150: Completion/compaudit: Reference loop variable rather
	than absolute path in executable ownership test

2013-12-17  Phil Pennock  <pdpennock@users.sourceforge.net>

	* 32143: INSTALL: Fix --enable-custom-patchlevel name in INSTALL

2013-12-16  Barton E. Schaefer  <schaefer@zsh.org>

	* Jun Takimoto: 32137: Test/comptest: set pseudo-terminal speed to
	prevent padding characters which confuse output parsing.

2013-12-16  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 32136: Src/pattern.c, Src/zsh.h, Test/D02glob.ztst:
	fix problem with +*, @*, !* when kshglob is set introduced
	by pattern disable feature.

	* unposted: NEWS: add ZLE_PROMPT_INDENT.

	* 32119: Src/Zle/zle_tricky.c: left square bracket completed in
	command position is not part of a subscript expression

	* Patrick Oscity + pws: 32114: Doc/Zsh/params.yo,
	Src/Zle/zle_refresh.c: ZLE_RPROMPT_INDENT allows you to make the
	right prompt flush if your terminal supports it.

2013-12-16  Barton E. Schaefer  <schaefer@zsh.org>

	* Jun Takimoto + Bart: 32131: Src/Modules/zpty.c: avoid infinite
	loop reading pseudo-terminal on platforms that do not buffer pty
	contents after child process exits

2013-12-15  Barton E. Schaefer  <schaefer@zsh.org>

	* users/18219: Completion/Zsh/Type/_command_names: compadd -Q for
	builtins, aliases, and reserved words to preserve special chars

2013-12-14  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: increment version to 5.0.3-dev-0 to avoid confusion
	with released 5.0.3.

	* unposted: version 5.0.3, finally.

2013-12-13  Barton E. Schaefer  <schaefer@zsh.org>

	* Martin Vaeth: 32105: Util/helpfiles: support all combinations of
	man or nroff with colcrt or col.

	* Aaron Peschel: 32103: Completion/Unix/Type/_hosts: parse
	host:port format in ssh known_hosts files.

2013-12-10  Barton E. Schaefer  <schaefer@zsh.org>

	* 32099: Src/init.c: fix pointer declaration to avoid compile
	time error when arithmetic on void * is not allowed.

2013-12-09  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* users/18210: Doc/Zsh/builtins.yo: document print -D better.

	* 32093: INSTALL: describe the dependency issues fixed
	by the doc bundle.

2013-12-09  Peter Stephenson  <p.stephenson@samsung.com>

	* Jun T.: 32056: Completion/Unix/Command/_iconv: Handle
	different versions of iconv.

2013-12-06  Peter Stephenson  <p.stephenson@samsung.com>

	* Daniel Shahaf: 32091: Src/exec.c, Test/E01options.ztst:
	WARN_CREATE_GLOBAL false positive for assignment before
	commands.

2013-12-05  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Daniel Shahaf: 32089:
	Functions/VCS_Info/Backends/VCS_INFO_detect_svn: tweak for
	detecting Subversion repository.

2013-12-02  Barton E. Schaefer  <schaefer@zsh.org>

	* 32080 (plus unposted second instance of same):
	Test/A05execution.ztst: suppress any error output from
	nonessential "setopt MONITOR"

2013-12-01  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Config/version.mk: 5.0.2-test-3.

2013-11-30  Barton E. Schaefer  <schaefer@zsh.org>

	* Hong Xu: 32069: Completion/Unix/Command/_git: completion for
	"git submodule update --remote"

2013-11-29  Barton E. Schaefer  <schaefer@zsh.org>

	* 32066 (via 31985 Clemens Hammacher and 32064 Hong Xu):
	Functions/VCS_Info/Backends/VCS_INFO_get_data_git,
	Functions/VCS_Info/VCS_INFO_reposub: fix %r and %S in vcs_info
	formats when a repository subdirectory is accessed via a symlink.

2013-11-27  Barton E. Schaefer  <schaefer@zsh.org>

	* 32061: Src/utils.c: Fix "use of uninitialized memory" in metafy

2013-11-27  Peter Stephenson  <p.stephenson@samsung.com>

	* unposted, see 32054 and thread:
	Completion/Unix/Command/_cdrdao, Completion/Unix/Command/_git,
	Completion/Unix/Command/_growisofs, Etc/ChangeLog-3.0,
	Etc/ChangeLog-3.1, LICENCE, Src/Modules/clone.c,
	Src/Modules/example.c, Src/module.c: Rationalise character
	encodings: shell functions are strictly ASCII for maximum
	portability; other files needed for building and documentation
	are ASCII or UTF-8; test files may use ISO-8859-X (we don't
	require the Euro symbol) where needed to get single character
	input with the top bit set.

2013-11-25  Peter Stephenson  <p.stephenson@samsung.com>

	* unposted, see 32050, 32051: remove non-ASCII characters in
	installed functions as this causes sed on MacOS problems.

2013-11-25  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Completion/Unix/Command/.distfiles,
	Config/version.mk: update for 5.0.2-test-2.

2013-11-25  Barton E. Schaefer  <schaefer@zsh.org>

	* 32045 (as corrected by Martin Vaeth 32047): Config/defs.mk.in,
	Doc/Makefile.in, configure.ac: use dependencies to determine
	whether to rebuild helpfiles.

2013-11-23  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 32031 plus missed _run_help: Completion/Zsh/Command/_run-help,
	Config/defs.mk.in, Config/installfns.sh, Doc/Makefile.in,
	Functions/Misc/run-help, Makefile.in: turn @runhelpdir@ in
	installed functions into the actual installation path.

2013-11-20  Peter Stephenson  <p.stephenson@samsung.com>

	* 32030: revert 31995 as it caused (N) to fail on an empty
	failed glob.  Add test for this case.

2013-11-19  Barton E. Schaefer  <schaefer@zsh.org>

	* 32023: Src/utils.c: better interrupt handling at RM_STAR_WAIT

2013-11-18  Peter Stephenson  <p.stephenson@samsung.com>

	* unposted but see 32012: Doc/help/.cvsignore,
	Doc/help/.distfiles: were created in the wrong place, so move.

2013-11-18  Barton E. Schaefer  <schaefer@zsh.org>

	* Martin Vaeth: 32008: Completion/Zsh/Command/.distfiles
	Completion/Zsh/Command/_run-help Doc/Makefile.in: follow-up to
	31988 - complete "." and ":" for run-help, distribute _run-help,
	clean up better during make

	* Han Pingtian: 31995: Src/glob.c: glob	qualifiers cannot
	follow an empty pattern, so a leading paren means grouping

2013-11-17  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 32001: Src/subst.c: fix crash on empty arrays with array
	intersection and disjunction.

2013-11-15  Barton E. Schaefer  <schaefer@zsh.org>

	* Martin Vaeth: 31988: Doc/Makefile.in, Util/helpfiles: remove
	LC_CTYPE heuristics, assure clean environment, force LANG=C

2013-11-14  Peter Stephenson  <p.stephenson@samsung.com>

	* Jun T.: 31984: Completion/Unix/Command/_df: new completion.

	* 31983: Src/zsh.mdd: suppress warning from cmp that doesn't
	indicate a problem when generating patchlevel header.

	* 31982: Src/math.c, Test/C01arith.ztst: detection of floating
	point constants had run rampant in users/17445.  Fix the original
	problem another way.

2013-11-13  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 31977: Src/module.c: no error if autoloading a feature that
	is already loaded in a consistent fashion.

	* Jun T.: 31971: locale fix for helpfiles.

	* Martin Vaeth: 31959: .gitignore, Doc/help/.cvsignore,
	Doc/help/.distfiles: missed files.

2013-11-12  Bart Schaefer  <schaefer@zsh.org>

	* 31966: Util/helpfiles: skip introductory paragraphs processing
	"man zshbuiltins" by assuming that all real command names start
	with a lower case letter.  Check "ztcp" file as a guess that all
	builtins were processed.

2013-11-12  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Martin Vaeth: 31959: .gitignore,
	Completion/Zsh/Command/_run-help, Doc/.cvsignore,
	Doc/.distfiles, Doc/Makefile.in, Makefile.in,
	StartupFiles/zshrc, Util/helpfiles, configure.ac: make help
	files during installation.

	* 31961: Src/Zle/zle.h, Src/Zle/zle_main.c,
	Src/Zle/zle_thingy.c: rationalise fd watch to use structures.

2013-11-08  Peter Stephenson  <p.stephenson@samsung.com>

	* unposted: fix ChangeLog to say 5.0.3 instead of 4.0.3.

	* unposted: NEWS: refer to zle -Fw.

	* 31940: Doc/Zsh/contrib.yo, Functions/Misc/zcalc: add -e option
	to zcalc to use input from arguments to command.

2013-11-07  Peter Stephenson  <p.stephenson@samsung.com>

	* 31937: Doc/Zsh/zle.yo, Src/Zle/zle_main.c,
	Src/Zle/zle_thingy.c, Src/Zle/zle_utils.c, Src/math.c,
	Test/C01arith.ztst: zle -Fw uses widget semantics for
	file descriptor handler.

2013-11-06  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Completion/Debian/Command/.distfiles,
	Completion/Unix/Type/.distfiles, Config/version.mk, Etc/FAQ.yo,
	README, Src/pattern.c, Src/signals.c, Test/.distfiles: updates
	for 5.0.2-test-1 in preparation for 5.0.3.  Updated files
	in .distfiles and add mod_export declarations.

2013-11-03  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Stefan Neudorf: 31936: Doc/Zsh/builtins.yo,
	Src/Builtins/rlimits.awk, Src/Builtins/rlimits.c: rationalise
	thread limits

	* Stefan Neudorf: 31935: Doc/Zsh/builtins.yo,
	Src/Builtins/rlimits.awk, Src/Builtins/rlimits.c: further
	limit updates for 31930, 39134.

2013-10-31  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Stefan Neudorf: 31930 / 31934: Doc/Zsh/builtins.yo,
	Src/Builtins/rlimits.awk, Src/Builtins/rlimits.c, configure.ac,
	Src/Builtins/rlimits.c:  New BSD limits; avoid clash with
	ulimit -k.

2013-10-29  Barton E. Schaefer  <schaefer@zsh.org>

	* 31929: Src/jobs.c: fix DPUTS3() test condition from 31906.

2013-10-28  Bart Schaefer  <schaefer@zsh.org>

	* unposted: NEWS: mention HISTORY_IGNORE

2013-10-28  Peter Stephenson  <p.stephenson@samsung.com>

	* 31922: Src/Zle/zle_utils.c (zlecharasstring): missing
	flip of bit five when Meta marker inserted.

2013-10-27  Barton E. Schaefer  <schaefer@zsh.org>

	* 31912: Src/exec.c: in closemn(), distinguish closing for >&-
	from closing for a real redirect.  Fixes knock-on multios bug
	introduced by workers/20666 way back in 2005.

	* unposted (cf. users/18063): Functions/Zle/keeper: clean up
	some syntax nits, add working link to old Unix Review article

	* 31919: Src/exec.c, Src/init.c: fix deadlock when a shell builtin
	with a multio redirection is used on the left side of a pipeline,
	by making sure stdin/out/err file descriptors are closed for the
	multio copy process, which means not re-using those descriptors
	after they are closed and marked FDT_UNUSED in fdtable[].  For
	completeness, initialize their fdtable[] state to FDT_EXTERNAL.

2013-10-27  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Jun T: 31909: Completion/Unix/Command/_cat: new completion.

2013-10-26  Barton E. Schaefer  <schaefer@zsh.org>

	* 31906: Src/jobs.c, Test/A05execution.ztst: printjob() should not
	reference oldjobtab for job numbers unless it is being called from
	bin_fg().  Add a DPUTS check in case this goes horribly wrong.
	printjob() also must not attempt to update pipestats when called
	from bin_fg().  Finally, acquire_pgrp() cannot acquire the tty
	group leader if the shell is not interactive, so avoid looping
	infinitely in the attempt.  Update the $pipestatus stress test so
	that it also exercises the oldjobtab repair.

2013-10-26  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Jun T: 31902: rationalise gamma function in mathfunc for
	consistency with various libraries and user expectations.

2013-10-25  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 31890 (with Mikael's fixes in 31891): NEWS: add descriptions
	of new features since 5.0.2.

2013-10-24  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 31889: Test/D02glob.ztst: tests for disable -p.

	* 31877: Src/pattern.c: fix behaviour of disable -p for
	entities with parentheses.

2013-10-24  Barton E. Schaefer  <schaefer@zsh.org>

	* 31885: Src/jobs.c: fix PIPEFAIL behavior when the last command
	in a pipeline is executed within the current shell; add comments

2013-10-24  Peter Stephenson  <p.stephenson@samsung.com>

	* 31888: Test/A05execution.ztst: add test of pipestatus
	that was reliably failing before 31879.

	* 31882: Src/Zle/compcore.c: better insulation of
	completion widget excecution against job environment.

	* 31884: Test/A05execution.ztst: eliminate variable output
	from test due to vagaries of uniq implementation.

2013-10-23  Barton E. Schaefer  <schaefer@zsh.org>

	* 31879: Src/jobs.c: improve $pipestatus behavior when the last
	command in the pipeline is executed within the current shell

	* unposted (cf. Frank Terbeck: 30047): Test/A05redirect.ztst:
	stress test for $pipestatus handling

2013-10-23  Peter Stephenson  <p.stephenson@samsung.com>

	* 31873: Doc/Zsh/builtins.yo: Document conventions for use of
	command options with builtin commands.

2013-10-21  Barton E. Schaefer  <schaefer@zsh.org>

	* 31869: Src/input.c: reduce WINCH-twaddling in shingetline()

2013-10-21  Øystein Walle  <oystwa@gmail.com>

	* 31861: Completion/Unix/Command/_git: _git: Add git-clean
	-i/--interactive support

	* 31863: Completion/Unix/Command/_git: _git: Add new arguments
	introduced in Git v1.8.4

	* 31862: Completion/Unix/Command/_git: _git: Add status.short and
	status.branch

	* 31866: Completion/Unix/Command/_git: _git: Reword --heads to
	match new meaning

	* 31864: Completion/Unix/Command/_git: _git: Add two sub-comamnds
	introduced in v1.8.4

	* 31865: Completion/Unix/Command/_git: _git: Make --batch(-check)
	accept an argument

2013-10-21  m0viefreak  <m0viefreak.cm@googlemail.com>

	* 31856: Completion/Unix/Command/_git: _git: fix a few
	"undocumented" options

	* 31855: Completion/Unix/Command/_git: _git: revert: add
	'-e,--edit'

2013-10-21  Øystein Walle  <oystwa@gmail.com>

	* 31858: Completion/Unix/Command/_git: _git: fix wrong default
	value

2013-10-21  m0viefreak  <m0viefreak.cm@googlemail.com>

	* 31857: Completion/Unix/Command/_git: _git: Remove unsupported -q
	option from diff options

2013-10-21  Øystein Walle  <oystwa@gmail.com>

	* 31853: Completion/Unix/Command/_git: _git: Add missing column.*
	config variables

	* 31854: Completion/Unix/Command/_git: _git: Make git-show accept
	diff arguments

	* 31859: Completion/Unix/Command/_git: _git: re-order the last two
	git-blame arguments

2013-10-19  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 31851: Src/exec.c: execstring() should display string to
	be executed with VERBOSE option.

2013-10-19  Barton E. Schaefer  <schaefer@zsh.org>

	* 31849: Doc/Zsh/params.yo: note effect of KSH_ZERO_SUBSCRIPT
	on the arrays of positional parameters e.g. ${argv[0]} vs. $0

2013-10-18  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 31846: Src/exec.c: fix NOEXEC option in execsimple().

2013-10-18  Barton E. Schaefer  <schaefer@zsh.org>

	* 31840: Completion/Unix/Command/_make: "read" used wrong $IFS

2013-10-17  Barton E. Schaefer  <schaefer@zsh.org>

	* 31836 (cf. 31823): Doc/Zsh/params.yo, Src/hist.c: add
	HISTORY_IGNORE pattern to exclude matching lines in the
	internal history from the HISTFILE at write time.

	* 31832: Src/exec.c: make execrestore() more signal-safe.

2013-10-17  Peter Stephenson  <p.stephenson@samsung.com>

	* 31830: Doc/Zsh/func.yo, README, Src/hist.c, Src/zsh.h:
	If a zshaddhistory hook returns status 2, save the line on
	the internal history but don't write it out.

2013-10-16  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Users/18033: Doc/Zsh/builtins.yo, Doc/Zsh/jobs.yo,
	Doc/Zsh/options.yo: try to document interaction between exit and
	asynchronous jobs that don't look asynchronous.

2013-10-16  Peter Stephenson  <p.stephenson@samsung.com>

	* 31827: Doc/Zsh/func.yo: options needed for example.  Only
	works with INCAPPENDHISTORY or SHAREHISTORY.

2013-10-15  Peter Stephenson  <p.stephenson@samsung.com>

	* unposted: Doc/Zsh/func.yo: trivial typo in zshaddhistory doc.

2013-10-12  Barton E. Schaefer  <schaefer@zsh.org>

	* 31818: Completion/Unix/Command/_sh, Doc/Zsh/compsys.yo: to avoid
	side effects, reposition the _arguments call in _sh for the zsh
	special case.  Document the side effects so avoided, and clean up
	the _arguments documentation a bit along the way.

2013-10-11  Mikael Magnusson  <mikachu@gmail.com>

	* 31805: Doc/Zsh/mod_parameter.yo, Src/Modules/parameter.c,
	Src/Modules/parameter.mdd, Src/pattern.c, Test/V01zmodload.ztst:
	Add $patchars and $dis_patchars to zsh/parameter module

	* 31805: Completion/Zsh/Command/_disable,
	Completion/Zsh/Command/_enable, Doc/Zsh/builtins.yo: Update
	_enable and _disable for -p, fix related typo in docs

	* 31806: Completion/Zsh/Command/_disable,
	Completion/Zsh/Command/_enable, Workaround special characters
	in alias and function names breaking _arguments syntax

2013-10-11  Peter Stephenson  <p.stephenson@samsung.com>

	* 31815: Src/hist.c: more fallout from 31789: we need to save
	using pushed history file before we pop.

2013-10-10  Peter Stephenson  <p.stephenson@samsung.com>

	* 31810: Test/E02xtrace.ztst: tests for simple cases of XTRACE
	output for conditions.

	* 31809: Src/exec.c: make whitespace clear in trace output for
	patterns.

2013-10-08  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Eric Cook: 31801: Completion/Linux/Command/_btrfs: some
	additional variables need to be local.

2013-10-08  Barton E. Schaefer  <schaefer@zsh.org>

	* 31797: Src/hist.c: partly fix long-standing history expansion
	bug in which in some circumstances a default history expansion
	would occur even when there is neither an event nor a word
	designator, which is contradictory to the documentation.
	There are still some cases in which expansion is attempted
	when it should not be, but in most of those cases the expansion
	simply fails.

2013-10-07  Peter Stephenson  <p.stephenson@samsung.com>

	* 31794: Src/hist.c: further refinement that SHAREHISTORY should
	work as it always did because it's careful about file locking.

	* 31793: Src/hist.c (hbegin): Modify 31789 so that the save
	history here only happens for interactive editing.

2013-10-06  Wayne Davison  <wayned@users.sourceforge.net>

	* users/18024: Completion/Unix/Command/_rsync: add new options for
	rsync 3.1.0.

2013-10-06  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* users/18023: Doc/Zsh/options.yo, Src/jobs.c, Src/options.c,
	Src/zsh.h, Test/E01options.ztst: add PIPEFAIL option and test.

2013-10-05  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Hang Pingtian: 31789: Src/hist.c: add history for
	INCAPPENDHISTORY later so history time works.

2013-10-03  Barton E. Schaefer  <schaefer@zsh.org>

	* 31784: Src/Zle/computil.c: when deciding whether there is enough
	horizontal space to show completion descriptions for each match in
	a listing, treat the separator as part of the description rather
	than as part of the match, and account for lines that have already
	wrapped due to very long matches.

	* 31781: Src/Zle/computil.c: "compdescribe -i" must clear the
	completion list column padding width along with the rest of the
	description state.  Cf. 31782.

2013-09-26  Barton E. Schaefer  <schaefer@zsh.org>

	* 31772: Src/params.c: queue_signals() to prevent re-entry into
	endparamscope().

	* 31770: Src/hist.c: memmove() instead of memcpy() for overlapping
	regions.

2013-09-25  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 31765: Src/Zle/zle_main.c: on entry to editor, if starting in
	vi insert mode mark this as the start of an insertion (duh).

2013-09-23  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 31764 (with correction of sense of a test): Src/glob.c,
	Src/pattern.c: use of array before initialisation wreaked havoc
	in detecting glob qualifiers.

2013-09-22  m0viefreak  <m0viefreak.cm@googlemail.com>

	* 31754: Completion/Unix/Command/_git: _git: git rm: make git rm
	--cached work as intended

2013-09-22  Øystein Walle  <oystwa@gmail.com>

	* 31752: Completion/Unix/Command/_git: _git: change completion
	text for consistency

2013-09-22  m0viefreak  <m0viefreak.cm@googlemail.com>

	* 31753: Completion/Unix/Command/_git: _git: correct some
	"undocumented" options

2013-09-22  Øystein Walle  <oystwa@gmail.com>

	* 31749: Completion/Unix/Command/_git: _git: fix some typos in
	description texts

	* 31751: Completion/Unix/Command/_git: _git: remove TODOs of
	actually documented options

2013-09-22  m0viefreak  <m0viefreak.cm@googlemail.com>

	* 31746: Completion/Unix/Command/_git: _git: reword _git-config
	TODO

	* 31748: Completion/Unix/Command/_git: _git: support completing
	remote branches without <remote>/ prefix

2013-09-22  Øystein Walle  <oystwa@gmail.com>

	* 31747: Completion/Unix/Command/_git: _git: completion updates to
	match latest git v1.8.3 part 2

	* 31750: Completion/Unix/Command/_git: _git: add new configuration
	options to match latest git v1.8.3

2013-09-22  m0viefreak  <m0viefreak.cm@googlemail.com>

	* 31741: Completion/Unix/Command/_git: _git: fix a wrong variable
	in __git_config_values

	* 31743: Completion/Unix/Command/_git: _git: fix usage of ->int:
	for some entries in _git-config

	* 31744: Completion/Unix/Command/_git: _git: make git submodule
	<cmd> completion work

	* 31745: Completion/Unix/Command/_git: _git: correctly use
	__git_guard_number in some cases

	* 31755: Completion/Unix/Command/_git: _git: completion updates to
	match latest git v1.8.3

2013-09-21  Barton E. Schaefer  <schaefer@zsh.org>

	* unposted: Src/glob.c: improve an error message.

2013-09-19  Barton E. Schaefer  <schaefer@zsh.org>

	* 31737: Src/Zle/computil.c (get_cadef): same fix as get_cvdef.

2013-09-19  Peter Stephenson  <p.stephenson@samsung.com>

	* Axel Beckert: 31735: Src/Zle/computil.c (get_cvdef):
	off-by-one in obscure loop handling could cause crash in complex
	completion.

2013-09-14  Luka Perkov  <luka@openwrt.org>

	* 31723: Completion/Unix/Command/_systemd: _systemd: add more
	system commands

	* 31726: Completion/Unix/Command/_git: _git: add few more
	arguments for cherry-pick and revert

2013-09-10  Barton E. Schaefer  <schaefer@zsh.org>

	* 31714: Completion/Zsh/Command/_cd: handle ".." properly when
	$PWD or the path prefix traverses a symbolic link.

2013-09-08  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 31711: Doc/Zsh/contrib.yo, Functions/MIME/zsh-mime-handler:
	add execute-never style for MIME handler for files on alien file
	systems.

2013-09-07  Luka Perkov  <luka@openwrt.org>

	* 31708: Completion/Unix/Command/_git: _git: add --fixup and
	--squash options to commit

2013-09-06  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Luka Perkov: 31702: Completion/Unix/Command/_git:
	check for presence of "-i" when checking for "--interactive".

	* 31706: Src/builtin.c, Test/C02cond.ztst: standardise
	handling of "test ! <x> <y> <z>".

2013-09-04  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 31696: Src/parse.c, Test/C02cond.ztst: in "test", no one
	can hear if you shriek.  Treat exclamation marks as strings in
	"! -a ..." and "! -o ...".

2013-09-02  Peter Stephenson  <p.stephenson@samsung.com>

	* 31685: Doc/Zsh/mod_mapfile.yo: documentation of how to get
	lines from a file is not correct.

2013-08-29  Peter Stephenson  <p.stephenson@samsung.com>

	* users/17955: Doc/Zsh/contrib.yo,
	Functions/MIME/zsh-mime-handler: "disown" style makes MIME
	handlers put into background run without job control.

	* based on 31641, 31642: Completion/Unix/Command/_make: support
	a couple of different variants of make.

2013-08-26  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 31672: Src/Modules/zpty.c, Test/V08zpty.ztst: add test that
	was failing and fix race when setting up pty.

2013-08-25  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 31665: Src/Modules/zpty.c, Test/V08zpty.ztst, Test/.distfiles:
	zpty should attach terminal on slave.

2013-08-17  Barton E. Schaefer  <schaefer@zsh.org>

	* 31637: Src/builtin.c: change of directory should not be retried
	relative to the current directory when it has already failed along
	some path that does not refer to the current directory.

2013-08-11  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 31650: Src/utils.c: use zlong for mailcheck parameters to
	ensure sufficient range.

2013-08-10  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 31648: joe M: Src/utils.c: fix timing errors in mailcheck.

2013-08-08  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Src/Zle/zle_tricky.c (inststrlen): 31644: the wrong length was
	used when inserting multibyte characters from a string from
	outside ZLE into the editing buffer.

	* users/17908: Src/hist.c Src/Zle/zle_main.c Src/zsh.h: if
	modifying history with ZLE active, keep the history line
	recorded in ZLE in sync.

2013-08-07  Phil Pennock  <pdpennock@users.sourceforge.net>

	* 31634: Functions/Misc/run-help: run-help compat with alias to
	noglob/nocorrect

2013-08-05  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 31631: configure.ac, Src/builtin.c: use cygwin_conv_path in
	preference to cygwin_conv_to_posix_path if available.

2013-08-04  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Yuusuke Yoshimoto: 31632: Completion/Unix/Type/_java_class:
	suppress stderr from jar when completing classes.

2013-08-02  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 31611: Src/Zle/zle_tricky.c: attempt to fix crash in
	"for in 1; do <[TAB] x".

2013-08-01  Peter Stephenson  <p.stephenson@samsung.com>

	* Thomas Klausner: 31625: Completion/X/Command/_mplayer: mplayer
	supports .ts (transport stream) files.

2013-07-29  Peter Stephenson  <p.stephenson@samsung.com>

	* 17891: Src/builtin.c: fix error message for invalid file
	descriptor in "print -u".

2013-07-28  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Manuel Presnitz: 31592 (with minor changes of phrasing):
	Doc/Zsh/builtins.yo, Doc/Zsh/expn.yo, Doc/Zsh/prompt.yo: improve
	documentation for named directory handling.

2013-07-25  Peter Stephenson  <p.stephenson@samsung.com>

	* Jun T.: 31756: Completion/Unix/Command/_make: further make
	completion improvements: tke care of mutually exclusive options;
	add _description using $state_descr; add completions for
	--debug=flag; fix typo (pointed out by Daniel Shahaf).

	* 31574: Src/parse.c: alternative fix to 31545 if FD_CLOEXEC is
	not available, removing dump records more consistently.

2013-07-24  Richard Hartmann  <richih.mailinglist@gmail.com>

	* 31571: Completion/Unix/Command/_vcsh: Update

	* 31572: Completion/Debian/Command/_linda,
	Completion/Debian/Command/.distfiles: Remove _linda

2013-07-24  Peter Stephenson  <p.stephenson@samsung.com>

	* Src/hist.c: 31570: with HIST_REDUCE_BLANKS don't truncate
	the line after the last word if there's more non-white-space
	text (probably a comment but we don't assume that).

2013-07-22  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Src/lex.c: correct previous commit: should call
	hwend(), not ihwend().

	* 31559: Src/lex.c: Fix problem with history lines for comments
	that occur in the middle of an alias.

	* Eric Cook: 31558: Completion/Command/Unix/_qemu: name of
	binary has changed.

2013-07-21  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 31549: Src/exec,c, Src/zsh.h: replace ad-hoc subsh_close file
	descriptor for pipes with new addfilelist() job-based mechanism.

2013-07-20  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 31545: Src/exec.c, Src/parse.c: if FD_CLOEXEC is available,
	so mark dump file file descriptors, avoiding possible
	multiple use of file descriptors.

2013-07-19  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* c.f. 31531: Completion/Unix/Command/_imagemagick,
	Completion/Unix/Command/_graphicsmagick: complete .xcf files.

2013-07-19  Peter Stephenson  <p.stephenson@samsung.com>

	* 31536 (plus memory leak fixed, plus test code):
	Src/jobs.c, Test/D03procsubst.ztst: fix hang in 31528 by
	closing process substitution file descriptors when waiting
	for job to finish.

2013-07-17  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 31528: Src/exec.c, Src/jobs.c, Src/zsh.h: use job table
	to record file descriptors associated with process
	substitution.

	* Jun T: 31525: Completion/Unix/Command/_make: fix some option
	handling.

2013-07-12  Peter Stephenson  <p.stephenson@samsung.com>

	* Nick Cross: 31512: Completion/Unix/Command/_make:
	extra GNU options plus fix to makefile completion.

2013-07-11  Peter Stephenson  <p.stephenson@samsung.com>

	* users/17856: Completion/Command/Unix/_make: rewrite to use
	_arguments so as to make adding option handling easier.

2013-07-03  Peter Stephenson  <p.stephenson@samsung.com>

	* 31503: Doc/Zsh/contrib.yo, Functions/Misc/zmv: split words
	in program passed to zmv with -p and add -P for programs
	that don't understand the "--" convention.

2013-06-28  Clint Adams  <clint@zsh.org>

	* 31500: Completion/Debian/Command/_dput: dput-ng completion
	support from Sebastian Ramacher.

	* 31499: Completion/Debian/Command/_dcut: dcut completion
	from Sebastian Ramacher.

	* 31498: Completion/Debian/Command/_dak: complete files for
	subcommands that are not explicitly specified.

2013-06-27  Mikael Magnusson  <mikachu@gmail.com>

	* 31483: Call zrefresh() before unqueue()ing signals, was
	moved in 31174.

2013-06-18  Frank Terbeck  <ft@bewatermyfriend.org>

	* 31485: Functions/VCS_Info/Backends/VCS_INFO_get_data_git:
	vcs_info, git: Avoid error messages for `guilt' users

2013-06-13  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 31465: Completion/compinit, Src/glob.c, Src/pattern.c: fix
	basic completion and globbing use of pattern disables.

	* 31444: Doc/Zsh/builtins.yo, Doc/Zsh/options.yo,
	Doc/zmacros.yo, Src/builtin.c, Src/exec.c, Src/options.c,
	Src/pattern.c, Src/zsh.h: Basic (not fully functional) code for
	enable/disable -p.

2013-06-13  Barton E. Schaefer  <schaefer@zsh.org>

	* 31474: Makefile.in, Src/zsh.mdd: create patchlevel.h correctly
	when running make in a separate build tree

2013-06-10  Peter Stephenson  <p.stephenson@samsung.com>

	* Hong Xu: 31462: .editorconfig: move comment to individual
	line.

	* Bruce Stephens (via Axel Beckert of Debian): 31459:
	Doc/ztexi.yo: alignment of zsh info menu entry is wrong.

2013-06-09  Barton E. Schaefer  <schaefer@zsh.org>

	* 31466: .cvsignore, .gitignore: Cause git and cvs to ignore
	one another.

	* 31205: Completion/Base/Widget/_complete_help:  Do not display
	"(eval)" as a tag context.

2013-06-01  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 31441: Src/glob.c, Src/pattern.c, Src/zsh.h: use an array
	based on ZPC_* enum to decide which forms of pattern are enabled.

2013-05-30  Peter Stephenson  <p.stephenson@samsung.com>

	* 31436: Doc/Zsh/expn.yo: KSH_GLOB syntax does not
	support recursive directories.

2013-05-29  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 31433: Completion/Unix/Command/_gzip: zcat -f doesn't
	need files with suffix .gz.

	* 31422: Doc/Zsh/calsys.yo, Functions/Calendar/age: better
	heuristic for timestamps in use of :file feature.

2013-05-22  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 31405: Doc/Zsh/options.yo: weasel words about
	PRINT_EXIT_STATUS option.

2013-05-21  Peter Stephenson  <p.stephenson@samsung.com>

	* 31419: Src/Modules/stat.c: Add time zone and year to
	default time format with -s option to zstat.

	* 31418: Doc/Zsh/calsys.yo, Functions/Calendar/age:
	in "age" docs correct typo and note the feature that
	you can supply a file as a timestamp on the command line.

	* Stephane: 31417: Functions/Calendar/age: needs --
	to protect againts files starting with -.

2013-05-20  Barton Schaefer  <schaefer@zsh.org>

	* 31416: Src/builtin.c: upon "read" of a short line, assign all
	variables passed as arguments.

2013-05-14  Peter Stephenson  <p.stephenson@samsung.com>

	* unposted: Completion/Unix/Command/_perforce: Improve
	Perforce jobs completion to limit potentially huge output
	using jobview by default; fix quoting of arguments passed on
	to eval within _call_program.

2013-05-10  Peter Stephenson  <p.stephenson@samsung.com>

	* Richard Hartmann <richih.mailinglist@gmail.com>: 31389:
	Completion/X/Command/_mplayer: add .ogv.

	* Mihai Moldovan <ionic@ionic.de>: 31387: Src/zsh_system.h:
	unused functions when compiling with clang.

2013-05-05  Frank Terbeck  <ft@bewatermyfriend.org>

	* unposted: Src/exec.c: Revert "31372: Do not block SIGWINCH for
	child processes" as suggested by Bart.

	* 31376: Src/exec.c: Make sure every execve() is prefixed by
	winch_unblock()

2013-05-05  Bart Schaefer  <schaefer@zsh.org>

	* 31372: Src/exec.c: Do not block SIGWINCH for child processes

2013-05-05  Kenyon Ralph  <kenyon@kenyonralph.com>

	* 31371: Completion/Linux/Command/_brctl: _brctl: update brctl
	subcommands

2013-05-04  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 31369: Completion/Base/Utility/_comp_locale: action if locale
	command is not usable.

2013-04-29  Bart Schaefer  <schaefer@zsh.org>

	* 31361: Src/init.c: handle negative optno ("no" prefix used)
	when storing options with parseopts_insert() for sticky contexts

	* 31353: Src/math.c: fix handling of floating point in ternary

	* 31350: Src/init.c, Src/input.c, Src/signals.h, Src/utils.c,
	Src/Zle/zle_main.c: block SIGWINCH nearly all the time, except
	when about to calculate prompts or do synchronous read, so
	syscalls are not interrupted by window size changes.

2013-04-29  Jun T  <takimoto-j@kba.biglobe.ne.jp>

	* 31357: Completion/Unix/Command/_cp: add support for Mac OS X

2013-04-29  Peter Stephenson  <p.stephenson@samsung.com>

	* 31356: Completion/Unix/Command/_subversion: typo noted by Bart.

	* 31355: Completion/Base/Utility/.distfiles,
	Completion/Base/Utility/_comp_locale,
	Completion/Unix/Command/_subversion: _comp_locale tries to
	sanitise locales but keep CTYPE; use this for subversion completion.

2013-04-25  Ramkumar Ramachandra  <artagnon@gmail.com>

	* 31288: Completion/Unix/Command/_git: _git: fix shortlog
	completer

2013-04-21  Ramkumar Ramachandra  <artagnon@gmail.com>

	* 31286: Completion/Unix/Command/_git: _git: add a couple of
	browsers

	* 31289: Completion/Unix/Command/_git: _git: branch.*.pushremote,
	remote.pushdefault

2013-04-20  Torstein Hegge  <hegge@resisty.net>

	* 31159: Completion/Unix/Command/_git: git: Pass prefix filter to
	ls-files even if it matches no files

2013-04-20  Jun T  <takimoto-j@kba.biglobe.ne.jp>

	* 31281: Completion/Unix/Command/_du: _du: add support for Mac OS
	X

2013-04-20  Bart Schaefer  <schaefer@zsh.org>

	* 31272: Src/Zle/compctl.c: avoid double free.

2013-04-16  Peter Stephenson  <p.stephenson@samsung.com>

	* Daniel Friesel: 31265: Completion/Unix/Command/_devtodo:
	improved option handling.

2013-04-13  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: .gitignore: ignore PDF and PS versions of intro file.

2013-04-12  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 31263 (changed * to - for consistency with elsewhere):
	Doc/Zsh/mod_curses.yo: suppress texinfo warning by adding item
	arguments.

	* 31261: Doc/Zsh/compsys.yo, Doc/ztexi.yo: updates needed
	with latest texinfo.

2013-04-10  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* users/17754: Src/builtin.c: failing to retie an array
	and colon-separated scalar shouldn't be a fatal error.

2013-04-09  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 31246: Makefile.in, Src/zsh.mdd: make a separate patch level
	header for releases.

2013-04-08  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Completion/Unix/Command/.distfiles,
	Completion/Unix/Command/.distfiles: remove mention of files no
	longer there.

2013-04-07  Bart Schaefer  <schaefer@zsh.org>

	* 31234: Completion/Base/Widget/_complete_help: use an "always"
	block instead of "trap" to clean up various function overrides

2013-04-05  Frank Terbeck  <ft@bewatermyfriend.org>

	* 31174: Src/Zle/zle_main.c: 31174: zle: Make sure state changes
	are refreshed after init hook

	* 31172: Src/Zle/zle_main.c: 31172: Let vared define custom init
	and finish hooks

	* 31175: Doc/Zsh/zle.yo: 31175: Add documentation for the new -i
	and -f options of vared

	* 31221: Completion/Unix/Command/_git: Handle zero defined aliases
	better

	* 31222: Functions/Zle/down-line-or-beginning-search,
	Functions/Zle/up-line-or-beginning-search: Don't trigger
	warn_create_global

2013-04-04  Peter Stephenson  <p.stephenson@samsung.com>

	* 31203: Completion/Unix/Command/.distfiles,
	Completion/Unix/Command/_etags: new etags completion.

2013-02-18  Aaron Schrab  <aaron@schrab.com>

	* 07478c6b: Src/zsh.mdd: Generate patch level using `git describe`

2013-04-02  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Jun T.: 31183: Src/Zle/zle_move.c: record old line rather than
	history line in vi-goto-mark.

2013-03-29  Mikael Magnusson  <mikachu@gmail.com>

	* 31182: Completion/Unix/Command/_awk: Allow sticked arguments.

2013-03-20  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Han Pingtian: 31167 (with tweak):
	Completion/Unix/Command/_ssh: limit use of colons for detecting
	a remote path.

2013-03-19  Bart Schaefer  <schaefer@zsh.org>

	* 31158: Src/pattern.c: following a wildcard with a repetition
	produces a bad pattern error instead of an unbounded search

2013-03-17  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 31156: Completion/Zsh/Context/_math,
	Completion/Zsh/Context/_zcalc_line, Completion/Zsh/Type/.distfile,
	Completion/Zsh/Type/_math_params,
	Completion/Zsh/Type/_module_math_func,
	Completion/Zsh/Type/_user_math_func: improved math context
	completion: functions.

	* 31155: Doc/Zsh/contrib.yo, Functions/Misc/zcalc: minor
	extra zcalc features and documentation.

2013-03-15  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 31154: Doc/Zsh/contrib.yo, Functions/Misc/zcalc: make zcalc
	understand continuation lines using backslash.

2013-03-14  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 31151: Pavol Juhas: complete (C etc) tags better
	when file system is not case sensitive.

2013-03-13  Mikael Magnusson  <mikachu@gmail.com>

	* unposted: Doc/Zsh/contrib.yo: Also adjust a mention of psvar
	in the vcs info documentation.

	* 31140: Src/math.c: when the math recursion limit is hit, make
	sure to not leave *ep pointing nowhere, which caused a crash
	sometimes. Also print the token that we refused to evaluate
	because of the limit.

2013-03-13  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted, c.f. thread from 31144: Doc/Zsh/params.yo: all psvar
	entries can be shown in prompts nowadays.

2013-03-10  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 31141: Src/exec.c, Test/A04redirect.ztst: NO_CLOBBER for {fd}
	syntax should only apply if $fd is exactly an fd and nothing
	else.

2013-03-10  Mikael Magnusson  <mikachu@gmail.com>

	* 30496: Src/prompt.c: Parse argument to %F and %K as prompt
	sequences. This allows constructs like %F{%3v} to use $psvar[3]
	for the color.

	* 30490: Completion/Unix/Command/_java: Complete files for the
	-keystore argument.

	* 30639: Functions/VCS_Info/Backends/VCS_INFO_get_data_git:
	Add support for showing the current action is cherry-pick (happens
	when cherry-picking a range).

	* 31136: Functions/VCS_Info/Backends/VCS_INFO_get_data_git:
	just set parameters instead of passing over a pipe.

2013-03-05  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* users/17666: Doc/Zsh/contrib.yo, Functions/Misc/zcalc: -f
	option to zcalc sets FORCE_FLOAT.

	* users/17665: Doc/Zsh/options.yo, Src/math.c, Src/options.c,
	Src/zsh.h, Test/C01arith.ztst: add FORCE_FLOAT option.

2013-02-27  Oliver Kiddle  <opk@zsh.org>

	* 31076: Completion/Linux/Command/_yast,
	Completion/Unix/Type/_pids, Completion/Unix/Type/_pdf:
	fix cases of more than one completion function for a command

	* 31077: Completion/Unix/Command/_sort: update for new
	options in GNU sort

	* c.f. 31071: Completion/Unix/Type/_postscript,
	Completion/Unix/Command/_psutils: remove duplicate _osc and
	rename _ps to avoid name clash

2013-02-22  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 31061: Completion/Zsh/Command/_typeset: "functions" completion
	takes account of options already on the command line.

	* 31060: Src/builtin.c: "+" before a flag for "functions" or
	"autoload" should suppress display of function body.

2013-02-21  Oliver Kiddle  <opk@zsh.org>

	* 31058: Completion/Zsh/Command/_fc, Completion/Unix/Command/_cut,
	Completion/Unix/Command/_sed, Completion/Unix/Command/_wget,
	Completion/Unix/Command/_xmlsoft: add options from newer
	versions of some commands to completion functions

2013-02-19  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 31055: Completion/compaudit: missing '$' in search of /proc
	file system.

2013-02-12  Oliver Kiddle  <opk@zsh.org>

	* 31041: Test/comptest, Test/X02zlevi.ztst: add support for
	testing line editor widgets from the test suite

	* unposted: Etc/zsh-development-guide: remove duplication in
	git guidelines

2013-02-09  Oliver Kiddle  <opk@zsh.org>

	* Morita Sho: 31038: Completion/Unix/Type/_terminals:
	add location of terminfo entries on Debian

	* 31037: Src/Zle/zle_move.c: return to previous position
	with vi-goto-mark using `` or ''

2013-02-07  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	*  Wieland Hoffmann: 31030: Completion/X/Command/_mplayer:
	improve label for selected files.

	*  Wieland Hoffmann: 31029: README: correct directory.

	* Han Pingtian: 31027: Completion/Unix/Type/_files: remove
	the -g's from the glob options.

2013-02-03  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Eric P. Mangold: c.f. 31016
	http://twistedmatrix.com/trac/browser/trunk/twisted/python/twisted-completion.zsh?format=txt:
	completion for twisted using internally generated completion.

2013-02-01  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 31015: Completion: compaudit: where we can find who owns the
	zsh executable, allow the same owner to own completion files.

2013-02-01  Mikael Magnusson  <mikachu@gmail.com>

	* unposted: Fix _prove completer commit.

2013-01-29  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Jesper Nygårds: 31012: Completion/Unix/Command/_gradle:
	updates.

	* Dmitry Roshchin: 31008: Completion/openSUSE/Command/_zypper,
	Completion/openSUSE/Command/_osc: updates.

2013-01-26  Bart Schaefer  <schaefer@zsh.org>

	* 31000: Doc/Zsh/contrib.yo: fix typo in example.

2013-01-24  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* users/17608: Doc/Zsh/contrib.yo,
	Functions/Zle/modify-current-argument: use function to modify
	current command line argument.

2013-01-22  Peter Stephenson  <p.stephenson@samsung.com>

	* 30993: Src/subst.c, Test/D04parameter.ztst: parameter
	modifiers :wq operating on an empty string crashed the shell.
	The shell isn't supposed to crash.

2013-01-20  Oliver Kiddle  <opk@zsh.org>

	* 30987: Completion/X/Command/_xrandr: only call xrandr when
	necessary and use _call_program

2013-01-14  Peter Stephenson  <p.stephenson@samsung.com>

	* 30960: Alexey Bezhan: Completion/Unix/Command/_django:
	compatibility issue.

2013-01-10  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 30958: Jeremy Mates: Completion/Unix/Command/_prove,
	Completion/Unix/Command/.distfiles: new completion.

2013-01-07  Bart Schaefer  <schaefer@zsh.org>

	* unposted (see 30952): Src/builtin.c: tweak to 30949 to fix the
	buffer pointer.

2013-01-06  Bart Schaefer  <schaefer@zsh.org>

	* 30949: Src/builtin.c: restore "read -q" behavior lost by 27188.

2013-01-05  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 30946: Robert Kovacsics: Completion/X/Command/_xrandr: use
	command to generate completions.

2013-01-04  Peter Stephenson  <p.stephenson@samsung.com>

	* 30941: Completion/bashcompinit: scalars giving status of bash
	completion should be exported for external programmes.

2013-01-03  Bart Schaefer  <schaefer@zsh.org>

	* users/17524: Doc/Zsh/expn.yo: misc. parameter flag clarifications.

2013-01-03  Peter Stephenson  <pws@csr.com>

	* unposted: Config/version.mk: update version to 5.0.2-dev-0
	to avoid clash with release.

2012-12-21  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: README, Config/version.mk, Etc/FAQ.yo: release
	5.0.2.

2012-12-21  Peter Stephenson  <pws@csr.com>

	* 30930: Src/parse.c, Test/D03procsubst.ztst: anonymous
	functions shouldn't be marked as simple; this prevented process
	based features from working in their arguments.

2012-12-20  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Config/version.mk: zsh 5.0.1.

2012-12-18  Oliver Kiddle  <opk@zsh.org>

	* 30877: Etc/zsh-development-guide: document git workflow

2012-12-18  Peter Stephenson  <pws@csr.com>

	* 30914: mkinstalldirs: default mode for installation
	directories is 755.

2012-12-17  Phil Pennock  <pdpennock@users.sourceforge.net>

	* 30901, 30906: Etc/zsh-development-guide: document git usage,
	update patch descriptions, mention editorconfig.

2012-12-16  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: README, Config/version.mk, Etc/FAQ.yo,
	Completion/Base/Utility/.distfiles,
	Completion/Unix/Command/.distfiles,
	Completion/Unix/Type/.distfiles, for 5.0.0-test-1.

	* unposted: Src/utils.c: missing mod_export.

2012-12-13  Peter Stephenson  <pws@csr.com>

	* 30876: Src/exec.c, Test/A06assign.ztst, Test/C03traps.ztst:
	obscure failures to process non-zero return values could result
	from optimising a list to a simple command.

2012-12-08  Bart Schaefer  <schaefer@zsh.org>

	* users/17445: Src/math.c, Test/C01arith.ztst: fix handling of
	leading zeroes in floating point.

2012-11-20  Oliver Kiddle  <opk@zsh.org>

	* 30811: Completion/Linux/Command/_btrfs,
	Completion/Unix/Command/_mount: new completion for btrfs and
	complete btrfs and ext4 mount options and new linux mount flags

2012-11-16  Vin Shelton  <acs@xemacs.org>

	* users/16865: Doc/Zsh/grammar.yo: Added missing menu item for Errors.

2012-11-18  Bart Schaefer  <schaefer@zsh.org>

	* users/17042: Src/jobs.c: don't stomp the environment in "jobs -Z"
	unless we've first copied it to new memory.

2012-11-16  Oliver Kiddle  <opk@zsh.org>

	* 30802: Completion/Unix/Command/_find: add new command switches

	* 30801: Completion/X/Command/_urxvt, Completion/X/Type/_xft_fonts:
	fix font completion for newer fontconfig & update urxvt completion

2012-11-15  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 30789: Doc/Zsh/grammar.yo, Doc/Zsh/options.yo, Src/hist.c,
	Src/init.c, Src/options.c, Src/zsh.h, Test/A04redirect.zsh:  add
	CONTINUE_ON_ERROR option for compatibility but turn it off:
	scripts exit on an error instead of returning to the top-level
	like interactive shells.

	* 30800: Michal Halenka: Completion/Unix/Command/_arping: fix
	option.

2012-11-12  Oliver Kiddle  <opk@zsh.org>

	* 30795: Completion/Unix/Command/_xz,
	Completion/Unix/Command/_bzip2: new xz completion, new bzip2 options

	* 30794: Completion/Unix/Command/_irssi,
	Completion/Unix/Command/_mutt: update for new options

2012-11-11  Oliver Kiddle  <opk@zsh.org>

	* 30793: Completion/Unix/Command/_getent,
	Completion/Unix/Command/_iconv, Completion/Unix/Command/_ldd:
	account for eglibc in _pick_variant patterns

2012-11-08  Bart Schaefer  <schaefer@zsh.org>

	* 30786: Src/builtin.c: do not enter interactive history editing
	or command execution if "fc" is called from a ZLE widget.

2012-11-08  Peter Stephenson  <pws@csr.com>

	* 30783: Src/lex.c: we don't want leading "="'s to be active when
	tokenising strings that aren't going to be treated as command
	line arguments.

	* 30780: Doc/Zsh/builds.yo: document that set -o failures are
	hard but setopt failures are soft.

2012-11-07  Oliver Kiddle  <opk@zsh.org>

	* Benjamin R. Haskell: 30737: Completion/Unix/Command/_git:
	make custom completion functions for git aliases easier

	* users/17382: Completion/Unix/Type/_remote_files,
	Completion/Unix/Command/_vim, Completion/Unix/Command/_git,
	Completion/Unix/Type/_urls: complete URLs for vim and make
	_remote_files more consistent with _files

2012-10-25  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 30735: Src/parse.c: array assignments aren't simple because
	they can contain process substitutions.

2012-10-19  Peter Stephenson  <pws@csr.com>

	* Roman Kaminski: 30738: Completion/Unix/Command/_bzr: send
	command.

	* Greg Bouzakis: 30741: Completion/Unix/Command/_systemd: add
	suspend command.

	* unposted: Doc/Zsh/expn.yo: further splitting clarifications.

2012-10-18  Peter Stephenson  <pws@csr.com>

	* 30740: Doc/Zsh/expn.yo: add example of process substitution
	with anonymous function.

	* c.f. users/17330: Doc/Zsh/expn.yo: fix reference to splitting
	rule in parameter expansion rules.

2012-10-11  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 30726: Doc/Zsh/builtins.yo, Src/builtin.c, Src/exec.c,
	Src/hashtable.c, Src/init.c, Src/options.c, Src/parse.c,
	Src/signals.c, Src/zsh.h, Src/Modules/parameter.c,
	Test/B07emulate.ztst: extend 30722 to handle the case
	where shell options passed to the emulate command need
	propagating to sticky emulation.

2012-10-11  Peter Stephenson  <pws@csr.com>

	* 30724: Src/exec.c, Src/jobs.c: shell code optimised to use
	execsimple() doesn't have a valid thisjob.

2012-10-09  Peter Stephenson  <pws@csr.com>

	* users/17318: Src/Zle/zle_utils.c: don't increment the undo
	change number for every variable read, only the first in a row.

	* users/17314: Src/Zle/zle_utils.c: ensure an undo change number
	uniquely specifies a point in editing history by incrementing
	the value returned by the variable.

	* unposted: Src/builtin.c: fix trivial typo with "functions +T".

2012-10-07  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 30722: Src/builtin.c, Src/exec.c, Src/init.c, Src/options.c,
	Src/Modules/parameter.c, Test/B07emulate.ztst: fix some cases
	where options or emulations were not propagated properly
	from the emulate command.

	* 30718: README, Doc/Zsh/builtins.yo, Src/builtin.c,
	Test/C04funcdef.ztst: emulate command evaluations should apply
	sticky emulation to autoloads, too.

2012-10-07  Oliver Kiddle  <opk@zsh.org>

	* unposted: Completion/Unix/Command/_webbrowser,
	Completion/Unix/Type/_pspdf: add evince, zathura, dwb

	* 30714: Completion/X/Command/_xclip: complete files,-t,-f for xclip

2012-10-05  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 30716: Src/options.c: IGNORECLOSEBRACES should be an emulation
	option since it changes what syntax is valid.

	* 30715: Src/init.c, Src/lex.c, Src/parse.c, Src/subst.c,
	Src/zsh.h, Src/Zle/zle_tricky.c: use a named enum for
	lexical tokens.

2012-10-03  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* users/17305: Doc/Zsh/expn.yo: fix documentation for ordering
	of word splitting and improve (z) and (Z) documentation.

	* users/17310: Doc/Zsh/params.yo, Src/lex.c, Test/A04redirect.ztst,
	Test/D06subscript.ztst: back off users/17304 owing to problem
	with [ command, document problem, and test the case that needs
	to work.

2012-10-02  Peter Stephenson  <pws@csr.com>

	* users/17304: Src/lex.c, Test/D06subscript.ztst: angle brackets
	aren't associated with special parsing inside square brackets.

2012-09-30  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Aaron Schrab: 30712: .editorconfig: multi-editor specification
	of editing formats.

	* Aaron Schrab: 30711: Completion/Unix/Type/_bind_addresses:
	improved IPv6 completion.

	* Aaron Schrab: 30710: Completion/Unix/Command/_perldoc: updates.

2012-09-29  Frank Terbeck  <ft@bewatermyfriend.org>

	* Seth House: 30702: Doc/Zsh/contrib.yo,
	Functions/VCS_Info/Backends/VCS_INFO_get_data_hg: Removed --debug
	flag from the hg vcs_info backend

	* Seth House: 30701: Misc/vcs_info-examples: Added an hg hook
	example to restore the 40-char hash

	* Baptiste Daroussin: 30703:
	Functions/VCS_Info/Backends/VCS_INFO_detect_fossil: Fix fossil
	detection on unix

2012-09-28  Oliver Kiddle  <opk@zsh.org>

	* 30697: Completion/Unix/Command/_dbus: new completion definition

2012-09-21  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 30692: Completion/Unix/Type/_path_files, Doc/Zsh/builtins.yo,
	Src/builtin.c: allow autoload +X -m to work; change _path_files
	so it works on that.

2012-09-21  Peter Stephenson  <pws@csr.com>

	* 30687 (typo fixed): Doc/Zsh/params.yo, Src/jobs.c: don't
	REPORTTIME if zleactive (but time keyword is allowed).

2012-09-15  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Александр Балезин: 30667: Completion/Unix/Command/_ip: add
	addrlabl subcommand.

2012-09-11  Peter Stephenson  <pws@csr.com>

	* unposted: NEWS: refer to some newly added features.

	* 30647, 30649: Doc/Zsh/arith.yo, Src/math.c, Src/utils.c,
	Test/C01arith.ztst: allow underscores in numeric constants
	within math evaluation.

2012-09-09  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Jun T.: 30664: configure.ac: fix some Yodl version issues.

2012-09-08  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* users/17236: Src/builtin.c: r and other fc output didn't
	unmetafy when listing to a file other than stdout.

2012-09-06  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 30656: Src/math.c: treat dividing by -1 the same as
	multiplying by it to get around SIGFPE.

2012-09-05  Peter Stephenson  <pws@csr.com>

	* Jun T.: 30658: Completion/Unix/Command/_uniq: more options.

	* Silas Silva: users/17223: Completion/Unix/Command/_lp:
	page-ranges option.

2012-09-03  Peter Stephenson  <pws@csr.com>

	* users/17213: Completion/Base/Completer/_user_expand,
	Doc/Zsh/compsys.yo: allow REPLY to pass a description for an
	expansion.

2012-08-27  Peter Stephenson  <p.w.stephenson@ntlworld. com>

	* Oliver (olipro): 30643: Completion/Linux/Command/_ipset:
	completion update.

2012-08-25  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* John Stahara: 30641: Src/Zle/zle_keymap.c: bindkey -N
	error report is misleading when copying keymap.

2012-08-23  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* Jun T: 30640 (plus additional comment): Src/zsh.h,
	Src/compat.c: MacOS doesn't define __STDC_ISO_10646__ but we
	need the replacement wcwidth() anyway.

2012-08-23  Peter Stephenson  <pws@csr.com>

	* Aaron Schrab: 30636: Completion/Unix/Command/_telnet:
	telnet-ssl options.

	* Aaron Schrab: 30637: Completion/Unix/Command/_telnet: -b option

	* Aaron Schrab: 30638: Completion/Unix/Command/_telnet: IPv4
	and IPv6 options.

2012-08-21  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* users/17211: Completion/Unix/Type/_files, Doc/Zsh/compsys.yo:
	new recursive-files style.

	* 30633: Doc/Zsh/builtins.yo, Src/builtin.c, Src/exec.c,
	Src/hashtable.c, Src/options.c, Src/subst.c, Src/zsh.h:
	"functions -T" traces only marked function and not called
	functions unless also marked.

2012-08-20  Peter Stephenson  <pws@csr.com>

	* Stepan Koltsov: 30634: Functions/Misc/zmv: use (q-) quoting
	for output for clarity.

2012-08-17  Peter Stephenson  <pws@csr.com>

	* Stepan Koltsov: 30632
	(https://raw.github.com/stepancheg/zsh/bfa81caaac44dacfa05adb77f61526ea90346219/Completion/Unix/Command/_clay):
	Completion/Unix/Command/_clay,
	Completion/Unix/Command/.distfiles:
	new completion.

	* Stepan Koltsov: 30632
	(https://github.com/stepancheg/zsh/commit/b0f1427e4983be6dfdc07ccaf86f153d5f9959b9.patch):
	Completion/Unix/Command/_gcc: aliases and clang-specific flags.

	* 30629 plus unposted formatting improvements:
	Doc/Zsh/builtins.yo, Src/Builtins/rlimits.c: more complete
	handling for socket buffer size limit (NetBSD) plus formatting
	and consistency changes (kb -> kbytes everywhere in ulimit
	output, K-bytes to kilobytes everywhere in documentation).

	* 30627: configure.ac, Doc/Zsh/builtins.yo,
	Src/Builtins/rlimits.awk, Src/Builtins/rlimits.c:
	support RLIMIT_NTHR as on NetBSD.

2012-08-16  Peter Stephenson  <pws@csr.com>

	* 30619: Doc/Zsh/builtins.yo, Src/builtin.c,
	Test/B02typeset.ztst: repeat "typeset -T" with same two first
	arguments is not an error.

	* 30617: Src/prototypes.h, Src/zsh_system.h: rationalise
	replacement of tgoto() prototype which could appear twice
	inconsistently.

2012-08-14  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: Etc/relnote_5.0.0.txt, Etc/.distfiles: add.

	* unposted: Etc/Changelog-4.3, Etc/ChangeLog-5.0,
	Etc/.distfiles: rename

2012-08-13  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: ChangeLog, Etc/ChangeLog-5.0: move changes up
	to 5.0 into subdirectory.

	* Michal Halenka: 30608: Completion/Unix/Command/_ip: del rather
	delete tunnel.

2012-08-13  Peter Stephenson  <pws@csr.com>

	* Jesse Weinstein: 30607: Doc/Makefile.in: fix ancient
	dependency problem with moved Yodl files.

	* Aaron Schrab: 30604: Src/Zle/zle_move.c: make repeating vi skip
	character useful by ignoring character just matched.

	* Aaron Schrab: 30603: Src/Zle/zle_move.c: repeating vi skip
	characters commands caused bad positioning.

2012-08-07  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* cat_in_136: 17200: Completion/Unix/Command/.distfiles,
	Completion/Unix/Command/_lha, Completion/Unix/Command/_nkf: new
	completions.  nkf is a Kanji code converter.

	* YAMAMOTO Takashi: 30599: Src/compat.c, Src/zsh.h: don't
	use the replacement wcwidth if not ISO-10646 as the assumptions
	it makes probably won't work.

2012-07-27  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* 30590: Doc/Makefile.in, Doc/.distfiles: work around problem
	turning intro.ms into PDF.

	* unposted: relabel as 5.0.0-dev-0.

2012-07-23  Geoff Wing  <gcw@zsh.org>

	* unposted: Doc/Zsh/ftp_sites.yo: Remove unavailable sites

2012-07-21  Peter Stephenson  <p.w.stephenson@ntlworld.com>

	* unposted: update for 5.0.0 release.
